"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{95754:function(e,t,n){n.d(t,{GN:function(){return d},Ml:function(){return o},jN:function(){return c}});var r=n(21468),s=n(89992),i=n(88075),a=n(44846),l=n(48644);function o(){let{layer:e}=(0,l.useLayer)("frontend"),{value:t}=(0,a.F)("chat_suggestion_chips_enabled"),n=e.get("chat_suggestion_chips",!1);return t||n}function c(e,t,n){let{activeOrganization:a}=(0,i.t)(),{account:l}=(0,i.t)(),c=o()&&n&&(null==l?void 0:l.settings.enable_chat_suggestions)!==!1,d=(0,r.z$)(),u=(0,s.uC)("/api/organizations/".concat(null==a?void 0:a.uuid,"/dust/chat_continuations"),"POST",{enabled:c,onError:()=>{console.warn("Failed to fetch suggestion chips")},onSuccess:()=>{d.track({event_key:"ccos.chatsuggestions.loaded",conversation_uuid:e,last_message_id:t})},meta:{noToast:!0}});return{suggestionsEnabled:n,mutateAsync:u.mutateAsync,isLoading:u.isLoading,isIdle:u.isIdle}}function d(){let{activeOrganization:e}=(0,i.t)(),{value:t}=(0,a.F)("chat_autocomplete"),n=(0,s.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:n.mutateAsync,isLoading:n.isLoading,isIdle:n.isIdle,enabled:t}}},35934:function(e,t,n){n.d(t,{Vq:function(){return h},mo:function(){return m},nR:function(){return p}});var r=n(77611),s=n(71854),i=n(99694),a=n(7653),l=n(48644),o=n(48970),c=n(6274),d=n(27957),u=n(23428);let m=()=>{var e,t;let{config:n}=(0,l.useConfig)("hatch_token_limits"),r=n.get("default",{raven:{hardLimit:19e4}});return Math.round(.9*(null!==(t=null==r?void 0:null===(e=r.raven)||void 0===e?void 0:e.hardLimit)&&void 0!==t?t:19e4))-4e3},p=e=>{let{data:t}=(0,o.Kf)({projectUuid:e}),{data:n}=(0,c.yg)(e),l=(0,a.useMemo)(()=>(t||[]).map(e=>e.content).join(" "),[t]),d=(0,r.c)(l),m=(0,a.useMemo)(()=>{var e;return(null!==(e=null==n?void 0:n.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==e?e:0)/s.r6},[n]),p=(0,a.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.filter(e=>e.type===i.Fg.GDRIVE).map(e=>e.config.uri))&&void 0!==e?e:[]},[n]),h=(0,u.mD)(p),x=(0,a.useMemo)(()=>{let e=h.map(e=>{let{data:t,isLoading:n}=e;return n||!t?0:t.size||0}).reduce((e,t)=>e+t,0);return e?e/s.r6:0},[h]),f=(0,a.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.filter(e=>e.type===i.Fg.OUTLINE).map(e=>e.config.outline_uri))&&void 0!==e?e:[]},[n]),g=(0,u.RS)(f),C=(0,a.useMemo)(()=>{let e=g.map(e=>{let{data:t,isLoading:n}=e;return n||!t?0:t.size||0}).reduce((e,t)=>e+t,0);return e?e/s.r6:0},[g]);return void 0!==t?void 0!==n?d+m+x+C:d:void 0!==n?m:void 0},h=e=>{let{mutate:t}=(0,d.dY)({projectUuid:e}),{data:n}=(0,d.Yc)({projectUuid:e});return()=>{t({is_starred:!(null==n?void 0:n.is_starred)})}}},41595:function(e,t,n){n.d(t,{H:function(){return s}});var r=n(27573);function s(e){var t,n;let{project:s,className:i}=e;return(0,r.jsxs)("span",{className:i,children:["Created by"," ",s.is_starter_project?"Anthropic":null!==(n=null===(t=s.creator)||void 0===t?void 0:t.full_name)&&void 0!==n?n:"Unknown"]})}},17792:function(e,t,n){n.d(t,{K:function(){return c}});var r=n(85565);n(27573);var s=n(73567);n(7654);var i=n(88075);n(11096);var a=n(3520),l=n(7653);function o(){let e=(0,r._)(["\n  text-text-400\n  text-xs\n  sm:text-[0.85rem]\n  leading-snug\n  font-normal\n  font-styrene\n  text-center\n  [&_a]:underline\n  [&_a]:hover:text-text-200\n  [&_strong_a]:no-underline\n  [&_strong_a]:text-accent-pro-100\n  [&_strong_a]:hover:text-accent-pro-100\n  [&_strong_a]:hover:no-underline\n"]);return o=function(){return e},e}function c(){let{mutate:e,isLoading:t}=(0,s.Ck)(),{account:n}=(0,i.t)();return{dismiss:(0,l.useCallback)(t=>{var r;n&&e({...n.settings,dismissed_claudeai_banners:[...(null==n?void 0:null===(r=n.settings)||void 0===r?void 0:r.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]})},[n,e]),isDismissed:(0,l.useCallback)(e=>{var t,r;return(null==n?void 0:null===(r=n.settings)||void 0===r?void 0:null===(t=r.dismissed_claudeai_banners)||void 0===t?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isLoading:t}}a.q.div(o())},15212:function(e,t,n){n.d(t,{e:function(){return l}});var r=n(27573),s=n(41464),i=n(57908),a=n(3095);let l=e=>{let{isShown:t,className:n}=e;return t?(0,r.jsx)(a.E.div,{className:(0,i.Z)("bg-bg-500/10 -mb-1 grid h-20 w-28 place-items-center rounded-lg flex-shrink-0",n),initial:{opacity:0,scale:.3},animate:{opacity:1,scale:1},children:(0,r.jsx)(s.g,{size:"sm"})}):null}},30796:function(e,t,n){n.d(t,{x:function(){return r8}});var r,s,i,a,l,o,c=n(85565),d=n(27573),u=n(98635);let m=()=>[];var p=n(49456),h=n(57851);async function x(e){let t;let n="CaptureController"in window?new CaptureController:null;null==n||n.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:n})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let r=document.createElement("video");r.srcObject=t,await new Promise((e,t)=>{r.onloadedmetadata=()=>{r.play().then(e,t)}});let s=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(r.videoWidth,e.width),e.height/Math.min(r.videoHeight,e.height));s.width=r.videoWidth*t,s.height=r.videoHeight*t}else s.width=r.videoWidth,s.height=r.videoHeight;let i=s.getContext("2d");if(!i)throw Error("Could not create 2D context");i.drawImage(r,0,0,s.width,s.height);let a=s.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:a}}var f=n(23489),g=n(24658),C=n(76335),v=n(63240),b=n(74651),j=n(17886),y=n(82343),w=n(3520),N=n(5891),k=n(2275),_=n(44846),S=n(36222),E=n(99694),z=n(7254),L=n(68260),D=n(57908),T=n(62124),F=n(7653),R=n(3982),O=n(23232),A=n(95754),P=n(23428),M=n(35934),I=n(21468),U=n(11096),H=n(61814),G=n(7738);let Z=e=>{let{size:t=16,className:n}=e;return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M7.5 4.5c-3 2-4.5 4-5.5 8L1.5 15l1-1.5"}),(0,d.jsx)("path",{d:"M2 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C8 1.9 8 .9 7 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,d.jsx)("path",{d:"M6.2 11.3c1 .4 1.8 0 2.3-1 .3.6.5 1.2 2 1.2s1.7-.6 2-1.3c.4 1.1 1.1 1.5 2.3 1m-9.6 3.4c.8.4 2 0 2.5-1.1.3.7.8 1.3 1.8 1.3s1.5-.4 2-1.3c.5.9 1.5 1.5 2.5 1"})]})},V=e=>{let{size:t=16,className:n}=e;return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,d.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,d.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};(r=a||(a={})).CREATE="create",r.CREATE_MANUALLY="create_manually",r.LIST="list",r.EDIT="edit";var B=n(67736),K=n(35747),$=n(26169),Y=n(3095),W=n(87659),q=n(77502),J=n(64006),X=n(83170),Q=n(20880),ee=n(18081),et=n(58708),en=n(35303),er=n(27222),es=n(84344),ei=n(34936),ea=n(57823),el=n(65490);let eo=()=>{let{addError:e}=(0,g.e)();return{handleRateLimitError:(t,n)=>{t instanceof el.Hx&&429===t.statusCode?e("You've reached the limit for Claude messages at this time. Please wait before trying again."):e(n)}}};var ec=n(89992),ed=n(88075),eu=n(13780);let em={duration:1,ease:"linear"},ep={},eh={duration:0};function ex(e){let{animate:t=!1}=e,n=(0,eu.E)(),r=(0,eu.E)(),s=(0,eu.E)(),i=(0,eu.E)(),a=(0,eu.E)(),l=(0,eu.E)(),o=(0,F.useRef)(!1),c=e=>new Promise(t=>setTimeout(t,e));return(0,F.useEffect)(()=>{o.current=!0;let e={pathLength:[0,1],transition:em},d=async()=>{o.current&&(await Promise.all([n.start({pathLength:1,strokeOpacity:1,transition:eh}),r.start({pathLength:1,strokeOpacity:1,transition:eh}),s.start({pathLength:1,strokeOpacity:1,transition:eh}),i.start({pathLength:1,strokeOpacity:1,transition:eh}),a.start({pathLength:1,strokeOpacity:1,transition:eh}),l.start({offsetDistance:"89%",transition:eh})]),await c(600),o.current)&&(await Promise.all([a.start({strokeOpacity:[1,0],transition:{...ep,delay:0}}),i.start({strokeOpacity:[1,0],transition:{...ep,delay:.1}}),s.start({strokeOpacity:[1,0],transition:{...ep,delay:.2}}),r.start({strokeOpacity:[1,0],transition:{...ep,delay:.3}}),n.start({strokeOpacity:[1,0],transition:{...ep,delay:.4}}),l.start({offsetDistance:"100%",transition:{...ep,delay:0}})]),o.current)&&(await Promise.all([n.start({strokeOpacity:1,pathLength:0,transition:eh}),r.start({strokeOpacity:1,pathLength:0,transition:eh}),s.start({strokeOpacity:1,pathLength:0,transition:eh}),i.start({strokeOpacity:1,pathLength:0,transition:eh}),a.start({strokeOpacity:1,pathLength:0,transition:eh})]),await Promise.all([n.start(e),l.start({offsetDistance:["0%","11%"],transition:em})]),o.current)&&(await l.start({offsetDistance:"19.5%",transition:ep}),await Promise.all([r.start(e),l.start({offsetDistance:"32%",transition:em})]),o.current)&&(await l.start({offsetDistance:"40%",transition:ep}),o.current)&&(await Promise.all([s.start(e),l.start({offsetDistance:"52%",transition:em})]),o.current)&&(await l.start({offsetDistance:"60.5%",transition:ep}),o.current)&&(await Promise.all([i.start(e),l.start({offsetDistance:"70%",transition:em})]),o.current)&&(await l.start({offsetDistance:"78%",transition:ep}),o.current&&(await Promise.all([a.start(e),l.start({offsetDistance:"89%",transition:em})]),o.current&&await d()))};return t&&d(),()=>{o.current=!1,n.stop(),r.stop(),s.stop(),i.stop(),a.stop(),l.stop()}},[n,r,s,i,a,l,t]),(0,d.jsxs)(Y.E.div,{className:"relative",layoutId:"svgAnimationFeatherPenWrite",transition:{type:"spring",stiffness:200,damping:20},children:[(0,d.jsxs)(Y.E.svg,{width:"100",height:"66",viewBox:"0 0 100 66",className:"stroke-text-200 overflow-visible fill-none",strokeWidth:1.75,strokeLinecap:"butt",children:[(0,d.jsx)("path",{className:"fill-bg-000 stroke-none",d:"M21.4706 1.60294H21.5441C21.5441 1.67647 21.5441 1.74999 21.6912 1.74999C21.9117 1.74999 22.1323 1.74999 22.4264 1.60294H22.5735C23.3088 1.74999 24.0441 1.89705 24.7059 1.89705L24.9265 1.82352C25.6617 1.82352 26.25 1.97058 26.9117 2.04411H32.8676C33.2353 2.04411 33.6029 2.11764 34.0441 2.04411H37.1323C38.0882 2.04411 39.0441 2.19117 39.9264 2.2647H56.1764C57.0588 2.11764 57.8676 2.2647 58.75 2.2647H59.7794L61.0294 2.33823C61.397 2.33823 61.7647 2.33823 62.0588 2.48529C62.2794 2.48529 62.2059 2.48529 62.2059 2.63235V3.58823C62.2628 4.02757 62.2628 4.47242 62.2059 4.91176V7.2647L62.0588 9.47058V10.0588L61.9853 11.8235V14.25C61.9853 15.2059 61.9853 16.1618 61.8382 17.1912V18.4412L61.6176 20.6471C61.6176 20.8676 61.6912 21.0882 61.6176 21.2353V22.4118L61.5441 24.9853V31.3823L61.6176 32.3382V36.2353C61.397 36.8235 61.6176 37.4118 61.5441 38V39.0294C61.397 39.5441 61.5441 40.0588 61.4706 40.5735V40.9412L61.397 42.6323V43.0735L61.25 44.3971V48C61.397 48.4412 61.25 48.8823 61.25 49.3235L61.3235 49.6912L61.1764 51.0882V52.5588C61.1029 53 61.1764 53.4412 61.0294 53.9559V55.0588C60.9852 55.4989 60.9852 55.9423 61.0294 56.3823V58.2206C61.0294 58.7353 60.8088 58.9559 60.3676 58.9559C60.0735 58.9559 59.8529 58.8088 59.5588 58.8823H58.4559L56.25 58.9559L55.9559 59.0294C55.6617 59.0294 55.2206 59.1765 55.0735 59.3971V60.5C55.0735 61.0882 54.8529 61.75 55 62.3382V62.4853C54.9145 63.095 54.9145 63.7138 55 64.3235L54.8529 64.4706C54.4117 64.7647 53.9706 64.6912 53.5294 64.6912C52.9412 64.7647 52.4264 64.3235 51.9117 64.6912V64.6176C51.6912 64.4706 51.4706 64.6176 51.25 64.6176C51.0548 64.6439 50.8569 64.6439 50.6617 64.6176H49.8529L49.4853 64.7647H48.0882C47.9676 64.7958 47.8411 64.7958 47.7206 64.7647H47.3529C46.8382 64.7647 46.3235 64.8382 45.8823 64.6912H45.7353C45.2941 64.8382 44.8529 64.7647 44.4117 64.8382H42.2059L40.7353 64.9118L39.3382 65.0588H36.4706C36.1764 65.0588 35.8823 65.2794 35.5882 65.2059H35.0735L33.6764 65.1323H31.6176C31.25 65.1323 30.8823 64.9853 30.6617 65.1323L28.5294 65.2059H25.0735L22.8676 65.2794C22.2794 65.2794 21.6912 65.4265 21.1029 65.2794H20.5882C20.3676 65.2794 20.0735 65.2794 19.8529 65.1323C19.4853 64.9853 19.1176 64.9853 18.6764 65.0588H17.2059L16.0294 64.9853C15.3676 64.9853 14.7794 64.9853 14.1912 65.1323C14.0441 65.1323 13.8235 65.1323 13.75 64.9118V60.7206C13.75 60.1323 13.897 59.5441 13.75 58.9559C13.9706 58.5147 13.897 58.0735 13.897 57.7059L13.8235 56.4559V54.3235L13.75 53.2206V51.5294L13.8235 49.3235L13.9706 46.75L13.8235 44.8382V42.2647C13.6764 41.9706 13.6764 41.6765 13.6764 41.3823V38.8823L13.5294 38.1471V33.9559C13.3823 33.3676 13.5294 32.7059 13.3823 32.1176V27.1176C13.3823 26.75 13.2353 26.3823 13.3088 26.0882V22.4118C13.4559 21.6765 13.3088 20.8676 13.5294 20.0588C13.3823 19.6176 13.5294 19.1765 13.4559 18.8088V15.7206L13.3823 14.3971V14.1029C13.4559 13.9559 13.4559 13.8823 13.3823 13.8088V11.8235L13.3088 9.91176C13.3088 9.69117 13.2353 9.54411 13.3088 9.32352V7.48529C13.3088 7.19117 13.4559 7.04411 13.75 7.04411H14.7059L15.4412 7.11764C15.8088 7.2647 16.1764 7.2647 16.6176 7.2647C17.2059 7.2647 17.7941 7.11764 18.3088 7.33823C18.3823 7.33823 18.6029 7.48529 18.6764 7.2647V3.58823L18.75 2.48529C18.75 2.2647 18.75 1.89705 19.1912 2.04411H19.2647C19.5588 1.89705 20 2.04411 20.2206 1.82352H20.3676C20.6617 1.74999 21.1029 1.74999 21.397 1.60294H21.4706Z"}),(0,d.jsx)("path",{className:"fill-text-200 stroke-none",d:"M21.1765 58.2206L22.7206 58.1471C23.4559 58.1471 24.1912 58.1471 24.9265 58.2942H26.6177C27.1324 58.5883 27.5736 58.4412 27.9412 58.4412H29.0442C29.6324 58.5883 30.2206 58.4412 30.8089 58.5147H32.2795L34.1177 58.5883H35.7354C36.0295 58.5883 36.3236 58.5883 36.6177 58.4412C37.0589 58.2942 37.5736 58.3677 38.0883 58.3677C38.4559 58.3677 38.8236 58.5883 39.3383 58.5147H43.3824L44.9265 58.5883H45.0001C45.5883 58.3677 46.2501 58.5883 46.8383 58.5883C47.4265 58.4412 48.0148 58.5147 48.603 58.4412H49.853C50.5883 58.4412 51.1765 58.5883 51.9118 58.4412L52.8677 58.3677L54.7059 58.4412C54.9265 58.4412 55.0001 58.7353 55.0001 58.9559C55.0001 59.3971 54.7059 59.6912 54.2648 59.8383C53.9707 59.9853 53.5295 59.9118 53.1618 60.0589L51.9118 60.353C51.6912 60.353 51.3971 60.2059 51.1765 60.353H45.0736L43.3824 60.2059L41.6177 59.9853C41.0295 59.8383 40.5148 59.8383 39.9265 59.9853C39.4118 60.1324 38.8236 60.2794 38.3089 60.2059L36.6177 60.0589C36.0786 59.9834 35.5301 60.0083 35.0001 60.1324C34.5589 60.2794 34.1177 60.2794 33.6765 60.2794L32.5736 60.2059C31.9118 60.1324 31.2501 60.353 30.5883 60.353H29.5589C29.0442 60.2794 28.5295 60.1324 27.9412 60.2059L27.0589 60.1324L25.3677 60.2059H22.9412C22.4265 60.2059 21.9854 60.353 21.4706 60.2059C21.3236 60.0589 21.1765 60.2059 20.9559 60.2059C20.5148 60.2059 20.0736 60.2059 19.6324 60.0589H19.3383C18.7501 60.0589 18.5295 59.9118 18.4559 59.25C18.4559 58.5883 18.2354 58 18.2354 57.4118L18.0883 56.1618L18.2354 55.6471V54.9118L18.0883 53.8089C17.9412 53.0736 17.9412 52.3383 18.0883 51.603C18.1582 51.2882 18.1582 50.9619 18.0883 50.6471V48.1471L17.8677 45.7206L18.0148 44.6177V38.3677C18.0148 37.1177 18.1618 35.9412 18.0883 34.6912L17.9412 33.8824V32.2647L17.8677 30.6471C17.7942 29.9118 17.6471 29.1765 17.7206 28.3677V25.9412L17.7942 25.0589L17.8677 23.8824L17.7942 23.2941C17.7942 22.4118 17.7942 21.5294 17.9412 20.7206V19.1765L17.7942 18.1471L17.6471 15.9412L17.7206 15.5V14.1765C17.6471 13.6618 17.5736 13.2206 17.7206 12.7794V12.6324C17.5736 12.3383 17.7206 11.9706 17.7206 11.6765V10.0589C17.7942 9.76474 17.7942 9.39709 18.0148 9.10297C18.2354 8.80886 18.603 8.80886 18.7501 9.10297L18.9706 9.61768V11.0883L19.1177 12.2647L19.2648 14.0294C19.2648 14.6177 19.2648 15.1324 19.4118 15.7206V17.1912L19.3383 18.3677C19.2648 19.25 19.1912 20.1324 19.3383 21.0147C19.5589 21.75 19.5589 22.4853 19.5589 23.2206L19.7059 24.9118L19.9265 26.75V31.5294L19.7059 33.2206C19.7059 33.8089 19.4854 34.3971 19.3383 35.0589L19.2648 36.5294L19.4118 38.8824L19.4854 40.353V41.8236C19.4854 42.5589 19.4854 43.4412 19.6324 44.3236C19.7059 44.9118 19.6324 45.5 19.7795 46.0883V50.6471L19.853 51.6765C19.853 52.1177 19.853 52.6324 20.0001 53.1471V57.1912C20.0736 57.5589 20.2942 57.9265 20.2206 58.2206L20.3677 58.2942H21.103L21.1765 58.2206Z"}),(0,d.jsx)(Y.E.path,{d:"M24.9785 13.4675C25.1301 13.4864 25.3928 13.7599 25.5437 13.8353C25.9867 14.0568 26.4228 14.1135 26.9119 14.1135C27.5281 14.1135 28.7659 14.2049 29.2581 13.7905C29.4074 13.6648 29.6374 13.6602 29.8054 13.5482C30.0114 13.4108 30.1727 13.2315 30.3885 13.0996C30.6299 12.9521 30.7694 12.6757 30.9717 12.4806C31.1672 12.2921 31.422 12.173 31.5594 11.9288C31.8496 11.4128 32.5164 10.2165 31.8868 9.67688C30.7785 8.72686 29.0579 10.6172 29.0158 11.7539C28.9642 13.149 29.7486 14.1135 31.196 14.1135C31.908 14.1135 32.7247 14.1679 33.2954 13.629C33.7817 13.1697 34.4697 13.0199 34.9552 12.5344C35.0597 12.4299 35.5473 12.0789 35.5384 12.0948C35.4014 12.3383 35.0899 12.3973 34.9731 12.66C34.6381 13.4138 35.5486 13.7905 36.1215 13.7905C36.5235 13.7905 37.101 13.5609 37.4538 13.8353C37.7492 14.065 37.5059 14.3582 37.9832 14.1493C38.8252 13.7809 39.4902 13.1418 40.3248 12.7767C40.6035 12.6547 40.9001 12.5621 41.2085 12.5793C41.5403 12.5977 41.4508 13.2616 41.4508 13.4675C41.4508 13.6086 41.3881 14.1333 41.693 14.0148C42.1717 13.8286 42.6853 13.6852 43.1465 13.4675C43.3832 13.3557 45.0716 12.5613 45.2459 12.8664C45.3794 13.1 45.4881 13.3465 45.4881 13.629C45.4881 13.8279 45.4195 14.1872 45.5868 14.3377C45.7361 14.4721 46.8712 13.7757 47.0627 13.6693C47.6793 13.3268 47.8295 14.3648 48.3546 14.0731C48.9247 13.7563 49.4662 13.3652 49.9292 12.9023C50.1925 12.6389 50.3285 12.5127 50.1893 12.9651C50.1191 13.1933 50.1574 13.5069 50.2701 13.7097C50.5212 14.1617 51.8089 13.7338 52.1497 13.629C52.7966 13.4299 53.2714 13.015 53.9261 13.306C54.3675 13.5022 55.0694 13.9073 55.5814 13.6918C55.8432 13.5816 56.1363 13.6581 56.3709 13.4495",initial:{pathLength:1},animate:n}),(0,d.jsx)(Y.E.path,{d:"M24.9373 22.521C25.1226 22.5004 25.3177 22.3116 25.4642 22.2221C25.6124 22.1315 25.7811 22.0735 25.9356 21.9941C26.0421 21.9393 26.1381 21.8666 26.2438 21.8138C26.4196 21.7259 26.613 21.6951 26.7953 21.6274C27.1023 21.5134 27.3193 21.3009 27.5595 21.0928C28.0749 20.6461 28.7066 20.3086 29.2897 19.9557C29.6951 19.7104 30.2464 19.4149 30.7333 19.4149C31.1747 19.4149 30.6982 20.701 30.5885 20.8909C30.431 21.1636 30.3641 21.4617 30.2341 21.7445C30.1472 21.9337 30.0731 22.1912 30.0416 22.3962C30.0178 22.5506 29.9549 22.691 29.9014 22.8384C29.8922 22.8637 29.8081 23.0008 29.8243 22.9585C29.8999 22.7621 30.0811 22.5759 30.2218 22.4239C30.5 22.1235 30.8305 21.8165 31.1616 21.5781C31.3226 21.4622 31.5131 21.311 31.6423 21.1621C31.7876 20.9947 31.9087 20.8016 32.0583 20.6413C32.1913 20.4988 32.3121 20.2192 32.5359 20.2192C32.7183 20.2192 32.8646 20.1977 32.9797 20.364C33.0935 20.5285 33.1183 20.7116 33.1183 20.9063C33.1183 21.0257 33.1262 21.2875 33.0767 21.3963C33.0172 21.5272 33.0906 21.6858 33.0906 21.8138C33.0906 22.0158 33.44 22.0218 33.5744 22.0218C33.901 22.0218 34.126 21.8183 34.3385 21.6058C34.4721 21.4723 34.5743 21.2399 34.7607 21.1682C34.9435 21.0979 35.0519 21.0452 35.2537 21.0512C35.4573 21.0571 35.6302 21.2093 35.8084 21.3007C36.0102 21.4044 36.1927 21.5465 36.4185 21.5996C36.7081 21.6678 36.9946 21.5557 37.2782 21.5241C37.8457 21.4611 38.335 21.0827 38.9128 21.025C39.2198 20.9943 39.4672 21.0006 39.7726 21.0635C40.1521 21.1416 40.4263 21.3156 40.7786 21.461C41.3889 21.7128 42.1831 21.8278 42.8247 21.6674C43.7013 21.4483 44.4531 20.9424 45.2867 20.609C45.6677 20.4566 46.0326 20.2285 46.4437 20.1653C46.6236 20.1376 46.7691 20.1576 46.9029 20.2746C47.0997 20.4469 47.0884 20.7724 46.9629 20.9895C46.8124 21.2501 46.5844 21.5009 46.3744 21.7167C46.2605 21.8338 46.1454 21.9488 46.0308 22.0634C45.9375 22.1567 46.0247 21.8815 46.0416 21.8277C46.2318 21.2234 46.8473 20.6629 47.4976 20.6629C47.7482 20.6629 47.9046 20.6377 48.0784 20.8432C48.2384 21.0323 48.3215 21.2856 48.5499 21.4101C48.7102 21.4976 48.7653 21.4812 48.9535 21.4394C49.0844 21.4103 49.2221 21.3328 49.3418 21.273C49.694 21.0969 50.0442 20.9079 50.3894 20.7184C50.6959 20.5502 50.9786 20.3509 51.1998 20.0805C51.3541 19.8919 51.4949 19.692 51.6497 19.5043C51.8733 19.2332 52.1134 18.983 52.3199 18.697C52.3769 18.6181 52.4116 18.5163 52.4755 18.4443C52.5722 18.3356 52.6974 17.9229 52.6974 18.0684C52.6974 18.1651 52.5693 18.3162 52.5295 18.4058C52.4488 18.5873 52.388 18.7869 52.2799 18.9558C52.1003 19.2364 51.9188 19.6486 51.8654 19.9819C51.8277 20.2176 51.6726 20.4983 51.5742 20.7168C51.4866 20.9116 51.3835 21.2147 51.4772 21.4255C51.5849 21.6679 51.8865 21.6612 52.115 21.6274C52.4799 21.5733 52.7175 21.3716 53.0025 21.1559C53.2673 20.9555 53.5227 20.8364 53.8283 20.7184C53.9373 20.6763 54.0401 20.6545 54.1549 20.6336C54.1884 20.6275 54.4055 20.5818 54.2781 20.6567C54.0709 20.7786 53.8905 21.0267 53.7928 21.2437C53.7446 21.3509 53.5335 21.7262 53.725 21.7861C53.9144 21.8452 54.2041 21.763 54.3891 21.7167C54.5758 21.6701 54.7589 21.6162 54.9437 21.5642C55.3748 21.4429 56.1235 21.3372 56.4135 21.7722",initial:{pathLength:1},animate:r}),(0,d.jsx)(Y.E.path,{d:"M24.9158 30.5229C24.8975 30.5465 25.7383 30.4294 25.8668 30.3794C26.2601 30.2264 26.6441 30.0508 27.0377 29.8994C27.3984 29.7606 27.8361 29.7293 28.1726 29.5764C28.3987 29.4736 28.8126 29.2795 29.0563 29.4149C29.3634 29.5855 29.371 29.8439 29.2761 30.1641C29.1015 30.7534 29.2511 30.6425 29.6619 30.3255C30.0011 30.0639 31.3576 29.3287 31.3576 30.2224C31.3576 30.3793 31.2824 30.928 31.3755 30.8728C31.9421 30.5371 32.4947 30.1519 33.1161 29.9218C33.416 29.8107 33.7686 29.7721 33.78 30.182C33.787 30.4358 33.78 30.6907 33.78 30.9446C33.78 31.1516 34.1799 30.8041 34.2645 30.7472C35.0286 30.2329 35.478 29.6134 36.3728 30.0609C37.0595 30.4042 37.6487 30.1644 38.3422 29.9846C38.8805 29.8451 39.4321 29.7529 39.9616 29.5764C40.8877 29.2677 41.7865 28.7265 42.1148 27.7417C42.2609 27.3033 42.056 27.1925 41.6931 27.4546C41.0023 27.9535 40.5354 28.7053 40.0962 29.4373C39.884 29.791 39.7207 30.2547 39.8808 30.6665C39.9502 30.8449 40.0227 31.2864 40.1769 31.3932C40.4421 31.5768 40.843 31.3661 41.0831 31.2317C41.5877 30.9491 42.0397 30.5936 42.5006 30.2448C43.0147 29.8558 43.4935 29.2987 44.0976 29.0515C44.2392 28.9936 44.9461 28.5739 44.8826 28.6882C44.6357 29.1326 44.6 29.6831 44.6 30.1775C44.6 30.9104 47.3432 28.8519 47.0628 30.1416C47.0235 30.3224 46.905 30.5937 46.9461 30.7786C46.9849 30.9531 47.6428 30.6926 47.7312 30.6665C48.3099 30.4957 48.9983 30.1999 49.4448 29.7783C49.5419 29.6866 49.6558 29.6121 49.7498 29.5181C49.7652 29.5028 49.9065 29.2973 49.9248 29.3431C50.0035 29.5399 49.6748 29.9047 49.6242 30.1013C49.4259 30.8726 50.7205 30.0412 50.8982 29.9039C51.4313 29.492 52.2042 28.8866 52.5446 28.2845C52.5886 28.2065 52.8414 27.7892 52.7375 27.6968C52.6273 27.5989 51.8328 28.4104 51.7506 28.4863C51.3353 28.8696 50.6066 29.7306 50.8579 30.3839C51.0922 30.9933 52.0886 30.7254 52.5894 30.6665C53.6116 30.5462 54.3236 29.7281 55.1778 29.2758C55.5374 29.0855 55.429 28.9545 55.429 28.6209C55.429 28.4713 55.4693 28.9233 55.438 29.0695",initial:{pathLength:1},animate:s}),(0,d.jsx)(Y.E.path,{d:"M24.2158 38.6604C25.5079 38.6604 26.6646 38.4439 27.8853 38.0144C28.5492 37.7808 29.0851 37.1397 29.7604 36.9826C30.1884 36.8831 30.5631 36.6194 30.9716 36.4623C30.9864 36.4566 31.3215 36.2585 31.3215 36.3367C31.3215 36.5017 30.9741 36.8737 30.8774 37.0006C30.5865 37.3824 30.2269 38.0056 30.2269 38.4944C30.2269 39.3214 31.6982 38.7547 32.1604 38.611C32.2873 38.5716 33.9323 37.7033 33.9323 38.2656C33.9323 38.5149 33.822 38.7694 33.7843 39.0147C33.7393 39.3072 34.4904 39.0718 34.6052 39.0461C35.2043 38.9124 35.826 38.6604 36.4444 38.6604C37.0472 38.6604 37.6398 38.8376 38.2567 38.6245C38.9111 38.3984 39.5302 37.9309 40.078 37.512C40.4721 37.2106 40.8373 36.8863 41.2488 36.6013C41.4087 36.4907 41.8463 35.9365 41.6526 36.238C41.4537 36.5474 39.392 38.1628 40.6881 38.2521C41.4212 38.3027 42.1337 38.2669 42.8413 38.1131C43.021 38.074 44.0313 37.7047 44.0346 37.7901C44.0395 37.9182 43.9786 38.78 44.1333 38.786C44.5253 38.801 45.9549 37.8533 46.116 38.0323C46.3012 38.238 45.9753 38.8922 46.0577 39.1807C46.1087 39.3592 47.8196 38.8399 47.9867 38.7007C48.1053 38.6019 48.392 37.9902 48.3949 38.0144C48.4741 38.6876 50.0285 38.2863 50.4136 38.1131C50.6714 37.997 51.2847 38.0635 51.544 38.1355C52.1617 38.3071 52.5616 37.9901 53.0872 37.7273C53.203 37.6693 54.1531 37.0818 54.0068 36.9647C53.9336 36.9062 53.9664 36.7599 53.9664 36.9647",initial:{pathLength:1},animate:i}),(0,d.jsx)(Y.E.path,{d:"M26.3511 47.6591C25.9312 47.9157 25.6525 48.0867 25.3417 48.4666C24.9817 48.9066 25.1871 48.9052 25.6647 48.8344C26.2149 48.7529 26.7746 48.2692 27.32 48.2692C27.6117 48.2692 27.0865 49.3457 27.32 49.4625C27.5586 49.5818 28.3459 48.9263 28.5222 48.7941C28.9052 48.5068 29.2345 48.141 29.5989 47.8296C30.2213 47.2975 31.0426 46.8287 31.5188 46.1519C31.61 46.0223 32.0022 45.2515 31.8329 45.5418C31.46 46.181 30.811 46.8578 30.7159 47.6188C30.6625 48.046 30.8193 48.3741 31.2631 48.3455C31.7988 48.3109 32.4045 48.2277 32.8736 47.9462C32.987 47.8782 33.1681 47.8036 33.2908 47.9059C33.5239 48.1002 33.3325 48.6325 33.5734 48.7357C34.1543 48.9847 35.0698 48.5125 35.592 48.3275C35.9589 48.1976 36.0332 48.3422 36.3816 48.35C37.2864 48.3701 38.4016 48.4808 39.0911 47.7668C39.5617 47.2793 40.1044 46.3109 40.078 45.6225C40.0666 45.3263 39.1666 46.1211 39.109 46.1698C38.705 46.5111 38.257 46.9331 38.0234 47.4214C37.8592 47.7648 37.5844 48.5608 38.1131 48.7088C38.8489 48.9148 39.7379 48.6065 40.4458 48.4307C41.2358 48.2346 42.0902 48.1374 42.8458 47.8296C43.1165 47.7193 43.401 47.4247 43.5142 47.1567C43.555 47.06 43.5914 46.578 43.6353 46.7754C43.6689 46.9267 43.8478 46.977 43.8686 47.1432C43.9082 47.4604 43.9537 47.7752 44.0166 48.0898C44.1425 48.7191 44.3815 48.9232 45.0394 48.978C45.9603 49.0547 46.6586 48.4411 47.1074 47.7399C47.3863 47.304 48.2314 46.0192 47.8655 46.3851C47.6578 46.5928 47.5605 46.9799 47.381 47.224C47.1784 47.4996 46.654 47.9134 46.6184 48.2692C46.5894 48.5598 47.1158 48.6157 47.3137 48.6685C48.0244 48.858 48.7337 48.6883 49.4445 48.6101C50.5202 48.4919 51.6015 48.5837 52.6565 48.3679C53.0715 48.283 53.4272 48.0463 53.8049 47.8475C53.9577 47.7671 54.3443 47.4738 54.4508 47.3406C54.7031 47.0252 54.454 46.9805 54.1682 46.6947",initial:{pathLength:1},animate:a})]}),(0,d.jsxs)(Y.E.svg,{width:"100",height:"66",viewBox:"0 0 100 66",fill:"none",style:{position:"absolute",top:0,left:0,x:-2,y:-13,offsetRotate:"0deg",offsetPath:'path("'.concat("M25.0193 13.4675C25.1709 13.4864 25.4336 13.7599 25.5845 13.8353C26.0275 14.0568 26.4636 14.1135 26.9527 14.1135C27.5689 14.1135 28.8067 14.2049 29.2989 13.7905C29.4482 13.6648 29.6782 13.6602 29.8462 13.5482C30.0522 13.4108 30.2135 13.2315 30.4293 13.0996C30.6707 12.9521 30.8102 12.6757 31.0125 12.4806C31.208 12.2921 31.4628 12.173 31.6001 11.9288C31.8904 11.4128 32.5572 10.2165 31.9276 9.67688C30.8193 8.72686 29.0987 10.6172 29.0566 11.7539C29.005 13.149 29.7894 14.1135 31.2368 14.1135C31.9488 14.1135 32.7655 14.1679 33.3362 13.629C33.8225 13.1697 34.5105 13.0199 34.996 12.5344C35.1005 12.4299 35.5881 12.0789 35.5792 12.0948C35.4422 12.3383 35.1307 12.3973 35.0139 12.66C34.6789 13.4138 35.5894 13.7905 36.1623 13.7905C36.5643 13.7905 37.1418 13.5609 37.4946 13.8353C37.79 14.065 37.5467 14.3582 38.024 14.1493C38.866 13.7809 39.531 13.1418 40.3656 12.7767C40.6443 12.6547 40.9409 12.5621 41.2493 12.5793C41.5811 12.5977 41.4916 13.2616 41.4916 13.4675C41.4916 13.6086 41.4289 14.1333 41.7338 14.0148C42.2125 13.8286 42.7261 13.6852 43.1873 13.4675C43.424 13.3557 45.1124 12.5613 45.2867 12.8664C45.4202 13.1 45.5289 13.3465 45.5289 13.629C45.5289 13.8279 45.4603 14.1872 45.6276 14.3377C45.7769 14.4721 46.912 13.7757 47.1035 13.6693C47.7201 13.3268 47.8703 14.3648 48.3954 14.0731C48.9655 13.7563 49.507 13.3652 49.97 12.9023C50.2333 12.6389 50.3693 12.5127 50.2301 12.9651C50.1599 13.1933 50.1982 13.5069 50.3109 13.7097C50.562 14.1617 51.8497 13.7338 52.1905 13.629C52.8374 13.4299 53.3122 13.015 53.9669 13.306C54.4083 13.5022 55.1102 13.9073 55.6222 13.6918C55.884 13.5816 56.1771 13.6581 56.4117 13.4495C56.5638 13.3144 56.0051 13.4675 55.8016 13.4675C54.6488 13.4675 53.5306 13.7368 52.3879 13.8712C51.447 13.9819 50.4959 14.2142 49.5662 14.3961C48.3048 14.6429 47.0345 14.8226 45.7667 15.042C44.0199 15.3444 42.205 15.4272 40.4419 15.6476C38.1908 15.929 35.9517 16.2156 33.6951 16.4551C31.2235 16.7174 28.9804 17.5117 26.7957 18.6353C25.5039 19.2996 24.9386 20.5876 24.9386 22.0221C24.9386 22.1095 24.9104 22.7931 24.9565 22.7982C25.2502 22.8308 25.5743 22.3804 25.8447 22.2868C26.7283 21.9809 27.4674 21.2419 28.3254 20.8558C29.0997 20.5074 29.6902 19.6042 30.6088 19.6042C31.5944 19.6042 31.1296 20.2986 30.8151 20.8962C30.5945 21.3152 30.3094 21.78 30.1826 22.224C30.0672 22.6278 29.3934 23.7039 29.6263 23.3544C30.3897 22.2095 31.4393 21.1639 32.6902 20.5732C33.5179 20.1823 33.2474 21.3259 33.1119 21.7664C33.0839 21.8576 32.9107 22.5829 32.9728 22.5829C33.3366 22.5829 33.8248 21.9134 34.1795 21.7844C34.7515 21.5764 35.313 20.9339 35.7182 21.6632C36.1794 22.4934 37.7032 21.7354 38.3604 21.5242C38.6698 21.4247 38.9833 21.2806 39.3114 21.2999C39.4737 21.3094 39.7962 21.5602 39.9574 21.6408C40.3506 21.8374 40.7038 22.1172 41.1686 22.1836C41.9582 22.2964 42.8535 22.3985 43.5865 21.9862C44.5433 21.4481 45.4616 20.6999 46.5427 20.4296C47.7592 20.1255 46.5062 21.4404 46.2556 21.8023C46.1588 21.9422 45.541 22.7995 45.8564 22.3855C46.2989 21.8047 47.0232 21.2077 47.7091 20.941C48.3388 20.6961 48.3094 21.3267 48.4178 21.7844C48.5193 22.2127 48.4867 22.2653 49.001 22.0894C49.433 21.9416 49.7613 21.5086 50.1315 21.255C50.4698 21.0232 50.7851 20.7988 51.1004 20.5328C51.4394 20.2468 51.663 19.9515 51.9258 19.6042C52.1504 19.3074 52.4977 19.1436 52.7109 18.8371C52.8587 18.6246 53.2999 17.7172 52.9172 18.3975C52.5748 19.0062 52.1783 19.5718 51.8271 20.1739C51.5353 20.6741 50.7953 21.9459 51.8271 21.9459C52.6372 21.9459 53.2902 21.4516 54.0073 21.1563C54.2036 21.0755 53.7872 21.9116 53.7292 21.9862C53.4386 22.3598 54.4693 22.0378 54.5725 21.9862C55.1195 21.7127 55.8279 21.5299 56.1829 22.0625C56.1939 22.079 56.1665 21.8531 56.2278 21.9145C56.3298 22.0165 56.2417 22.1818 56.2054 22.2868C56.0118 22.846 55.6547 23.1228 55.1377 23.3813C51.97 24.9652 48.1674 25.0692 44.7214 25.5615C41.2897 26.0518 37.8277 26.2815 34.3904 26.7503C32.4713 27.012 30.396 27.3322 28.6529 28.2037C27.3543 28.853 25.8351 29.3933 24.9565 30.5229C24.9382 30.5465 25.779 30.4293 25.9075 30.3794C26.3008 30.2264 26.6848 30.0508 27.0783 29.8994C27.4391 29.7606 27.8768 29.7293 28.2133 29.5764C28.4394 29.4736 28.8533 29.2795 29.097 29.4149C29.4041 29.5855 29.4117 29.8439 29.3168 30.164C29.1422 30.7534 29.2918 30.6425 29.7026 30.3255C30.0418 30.0639 31.3983 29.3287 31.3983 30.2224C31.3983 30.3793 31.3231 30.928 31.4162 30.8728C31.9828 30.5371 32.5354 30.1519 33.1568 29.9218C33.4567 29.8107 33.8093 29.7721 33.8207 30.182C33.8277 30.4358 33.8207 30.6907 33.8207 30.9446C33.8207 31.1516 34.2206 30.8041 34.3052 30.7472C35.0693 30.2329 35.5186 29.6134 36.4135 30.0609C37.1002 30.4042 37.6894 30.1644 38.3828 29.9846C38.9212 29.845 39.4728 29.7529 40.0023 29.5764C40.9284 29.2677 41.8272 28.7265 42.1555 27.7417C42.3016 27.3033 42.0966 27.1925 41.7338 27.4546C41.043 27.9535 40.576 28.7053 40.1368 29.4373C39.9247 29.791 39.7614 30.2547 39.9215 30.6665C39.9909 30.8449 40.0634 31.2864 40.2176 31.3932C40.4828 31.5768 40.8837 31.3661 41.1237 31.2317C41.6283 30.9491 42.0803 30.5936 42.5413 30.2448C43.0553 29.8558 43.5342 29.2987 44.1383 29.0515C44.2799 28.9936 44.9868 28.5739 44.9233 28.6882C44.6764 29.1326 44.6407 29.6831 44.6407 30.1775C44.6407 30.9104 47.3838 28.8518 47.1035 30.1416C47.0642 30.3224 46.9457 30.5937 46.9868 30.7786C47.0256 30.9531 47.6834 30.6926 47.7719 30.6665C48.3506 30.4957 49.039 30.1999 49.4855 29.7783C49.5826 29.6866 49.6965 29.6121 49.7905 29.5181C49.8058 29.5028 49.9471 29.2973 49.9655 29.3431C50.0442 29.5399 49.7154 29.9047 49.6649 30.1012C49.4666 30.8726 50.7612 30.0412 50.9389 29.9039C51.472 29.492 52.2449 28.8866 52.5852 28.2845C52.6293 28.2065 52.8821 27.7892 52.7781 27.6968C52.668 27.5989 51.8735 28.4104 51.7912 28.4863C51.376 28.8696 50.6473 29.7306 50.8985 30.3839C51.1329 30.9933 52.1293 30.7254 52.6301 30.6665C53.6523 30.5462 54.3643 29.728 55.2185 29.2758C55.5781 29.0855 55.4697 28.9545 55.4697 28.6209C55.4697 28.4713 55.51 28.9232 55.4787 29.0695C55.426 29.3154 55.3861 29.5847 55.214 29.7783C54.6637 30.3974 53.8866 30.9418 53.0832 31.1509C51.0791 31.6726 49.0842 32.2387 47.0631 32.6851C45.7038 32.9853 44.3591 33.334 42.9854 33.5689C41.3914 33.8413 39.777 33.9452 38.181 34.2014C36.3242 34.4994 34.4526 34.7122 32.6095 35.0896C30.9123 35.437 29.3127 35.7877 27.6929 36.4309C27.1212 36.6579 26.5409 36.8371 25.9883 37.1082C25.7215 37.2391 25.3767 37.2999 25.1449 37.4895C25.0091 37.6006 23.5338 38.6604 24.2567 38.6604C25.5488 38.6604 26.7055 38.4439 27.9262 38.0144C28.5901 37.7808 29.126 37.1397 29.8013 36.9826C30.2293 36.8831 30.604 36.6194 31.0125 36.4623C31.0273 36.4566 31.3624 36.2585 31.3624 36.3367C31.3624 36.5017 31.0149 36.8737 30.9183 37.0006C30.6273 37.3824 30.2678 38.0056 30.2678 38.4944C30.2678 39.3214 31.7391 38.7547 32.2013 38.611C32.3281 38.5716 33.9732 37.7033 33.9732 38.2656C33.9732 38.5149 33.8629 38.7695 33.8252 39.0148C33.7802 39.3072 34.5313 39.0718 34.6461 39.0462C35.2452 38.9124 35.8668 38.6604 36.4853 38.6604C37.0881 38.6604 37.6807 38.8376 38.2976 38.6245C38.952 38.3984 39.5711 37.9309 40.1189 37.512C40.513 37.2106 40.8782 36.8863 41.2897 36.6013C41.4496 36.4907 41.8872 35.9365 41.6935 36.238C41.4945 36.5474 39.4329 38.1628 40.729 38.2521C41.4621 38.3027 42.1746 38.2669 42.8822 38.1131C43.0619 38.074 44.0722 37.7047 44.0755 37.7901C44.0804 37.9182 44.0195 38.78 44.1742 38.786C44.5661 38.801 45.9958 37.8533 46.1569 38.0323C46.342 38.238 46.0162 38.8922 46.0986 39.1807C46.1496 39.3592 47.8605 38.8399 48.0276 38.7007C48.1462 38.6019 48.4329 37.9902 48.4358 38.0144C48.515 38.6876 50.0694 38.2863 50.4544 38.1131C50.7123 37.997 51.3256 38.0635 51.5849 38.1355C52.2026 38.3071 52.6025 37.9901 53.128 37.7273C53.2439 37.6694 54.194 37.0818 54.0477 36.9647C53.9745 36.9062 54.0073 36.7599 54.0073 36.9647C54.0073 37.1564 54.0187 37.3435 53.9669 37.5299C53.7793 38.2053 53.4114 38.717 52.8409 39.1448C50.9288 40.5789 48.4626 41.2884 46.1928 41.8723C44.7398 42.2461 43.2847 42.5905 41.8594 43.0655C40.6006 43.4851 39.3956 44.0225 38.1182 44.3934C36.193 44.9523 34.2443 45.2935 32.2865 45.7032C30.2363 46.1324 28.1866 46.5624 26.392 47.6591C25.9722 47.9157 25.6935 48.0867 25.3827 48.4666C25.0226 48.9066 25.2281 48.9052 25.7057 48.8344C26.2558 48.7529 26.8155 48.2692 27.361 48.2692C27.6526 48.2692 27.1274 49.3457 27.361 49.4624C27.5996 49.5818 28.3868 48.9263 28.5632 48.794C28.9461 48.5068 29.2755 48.141 29.6398 47.8296C30.2623 47.2975 31.0835 46.8286 31.5598 46.1518C31.651 46.0222 32.0431 45.2515 31.8738 45.5418C31.5009 46.181 30.8519 46.8578 30.7568 47.6187C30.7034 48.046 30.8602 48.3741 31.3041 48.3455C31.8397 48.3109 32.4455 48.2276 32.9145 47.9462C33.0279 47.8781 33.209 47.8036 33.3317 47.9058C33.5649 48.1001 33.3734 48.6325 33.6143 48.7357C34.1952 48.9847 35.1108 48.5125 35.633 48.3275C35.9999 48.1976 36.0741 48.3422 36.4225 48.3499C37.3274 48.37 38.4426 48.4808 39.132 47.7668C39.6027 47.2793 40.1454 46.3109 40.1189 45.6225C40.1075 45.3263 39.2076 46.1211 39.1499 46.1698C38.7459 46.511 38.2979 46.933 38.0643 47.4214C37.9001 47.7648 37.6253 48.5608 38.1541 48.7088C38.8898 48.9148 39.7788 48.6064 40.4867 48.4307C41.2768 48.2345 42.1311 48.1374 42.8867 47.8296C43.1574 47.7193 43.4419 47.4247 43.5551 47.1567C43.5959 47.06 43.6324 46.578 43.6762 46.7754C43.7098 46.9267 43.8887 46.9769 43.9095 47.1432C43.9491 47.4604 43.9946 47.7752 44.0575 48.0898C44.1834 48.7191 44.4224 48.9231 45.0803 48.978C46.0013 49.0547 46.6996 48.4411 47.1483 47.7399C47.4273 47.304 48.2724 46.0192 47.9064 46.3851C47.6988 46.5928 47.6014 46.9799 47.422 47.224C47.2193 47.4996 46.6949 47.9134 46.6594 48.2692C46.6303 48.5598 47.1568 48.6157 47.3547 48.6684C48.0653 48.8579 48.7747 48.6882 49.4855 48.6101C50.5612 48.4919 51.6425 48.5837 52.6974 48.3679C53.1125 48.283 53.4682 48.0463 53.8458 47.8475C53.9986 47.7671 54.3852 47.4738 54.4918 47.3406C54.7441 47.0252 54.495 46.9805 54.2091 46.6946C53.9482 46.4337 53.6303 46.2391 53.3434 46.0083C52.9903 45.7243 52.7215 45.38 52.3879 45.0797C51.5264 44.3044 50.7472 43.4393 49.8892 42.6618C48.908 41.7726 47.8501 40.9671 46.8388 40.1138C45.9407 39.3561 45.0657 38.5131 44.0934 37.8529C41.8122 36.3039 40.0094 34.2527 37.9387 32.4608C36.834 31.5048 35.8315 30.3026 34.9108 29.1771C34.4774 28.6475 33.9889 28.2545 33.6188 27.6789C32.9269 26.6026 32.2922 25.488 31.5418 24.449C31.1702 23.9344 30.827 23.3939 30.4293 22.8969C30.0713 22.4494 29.8027 21.9468 29.3168 21.6229C28.8095 21.2846 28.3827 20.8185 27.9307 20.4117C27.4493 19.9784 26.81 19.4811 26.4324 18.9582C26.2296 18.6775 25.8604 18.2399 25.5801 18.0297C25.3503 17.8574 25.2008 17.4763 25.0597 17.2222C24.8367 16.8208 24.8124 16.4539 24.6335 16.0514C24.5276 15.8131 24.5479 14.8467 24.3733 14.7594",'")')},initial:{offsetDistance:"89%"},animate:l,children:[(0,d.jsx)("path",{d:"M85.2757 34.4869C85.5576 35.0209 86.0182 35.4171 86.3161 35.9236C86.1218 36.3122 86.4843 37.728 86.3161 38.1255C86.121 38.5866 85.9445 39.0458 85.7684 39.5154C85.5509 40.0955 85.1606 40.5683 84.951 41.153C84.6922 41.8748 84.2474 42.4929 83.9601 43.1952C83.8153 43.5492 83.7152 43.9274 83.5611 44.2741C83.3656 44.7139 83.0334 45.1379 82.7216 45.5017C82.4454 45.8239 82.1295 46.1099 81.8519 46.432C81.5651 46.7646 81.3496 47.1324 81.0372 47.4448C79.8777 48.6043 79.6996 49.4075 78.2711 50.919C77.8054 51.4118 76.9648 52.0222 76.5961 52.594C76.2174 53.1813 75.5664 53.7573 75.2271 54.3724C74.8014 55.144 73.8356 55.4541 73.246 56.0981C72.9202 56.454 72.5695 56.9324 72.1294 57.0607C71.7436 57.1732 70.6975 56.7426 70.3197 56.6568C70.0406 56.5933 69.754 56.5146 69.4692 56.4861C69.067 56.4459 68.7333 56.259 68.3656 56.0981C67.4604 55.7021 66.7636 56.0846 66.0646 55.3857C65.5487 54.8698 64.8541 54.1156 64.2261 53.7107C63.3231 53.1285 62.5864 51.9023 61.683 51.32C61.4258 51.1543 61.1731 50.8975 60.9508 50.687C60.6715 50.4224 60.359 50.1942 60.0866 49.9219C59.3892 49.2245 58.6312 48.6042 57.904 47.9402C56.773 46.9075 55.5705 45.97 54.3893 44.9925C53.7769 44.4857 52.7848 43.8702 52.5874 43.1022C52.471 42.6497 52.4371 41.303 52.5874 40.8689C52.7054 40.5278 53.683 41.039 53.9765 40.8668C54.6048 40.498 55.3346 40.6993 55.9857 40.9163C56.8992 41.2208 57.8259 41.9188 58.394 42.7053C58.7697 43.2256 59.5033 43.4775 60.0343 43.8007C61.1524 44.4813 62.1386 45.1851 63.4885 45.331C64.1957 45.4075 64.8516 44.9954 65.4867 44.7668C65.665 44.7026 65.8752 43.8278 66.0646 43.8007C66.256 43.7734 66.4048 43.329 66.546 43.1952C67.0127 42.753 66.9133 42.8833 66.825 42.287C66.7064 41.4864 64.9252 43.0948 64.9252 42.287C64.9252 41.9123 63.3894 40.3105 63.3894 39.1938C63.2051 38.8622 63.1757 38.3335 62.8637 38.1255C62.7247 38.0328 62.8609 37.6273 64.2261 37.6273C63.3894 37.2117 65.1645 37.3713 64.9252 37.2117C64.704 37.0643 64.489 37.0128 64.2261 36.942C63.7642 36.8176 63.3152 36.7792 62.8637 36.5952C62.2181 36.3322 61.4809 36.1713 60.7802 36.1713C60.631 36.1713 60.5479 36.3725 60.505 36.4906C60.4188 36.7277 59.4388 36.7679 59.2875 36.9605C59.0768 37.2286 59.0338 37.3823 58.7291 37.5188C58.3453 37.6909 58.375 38.0428 58.0004 38.2301C57.5587 38.4509 57.1168 38.5924 56.627 38.6484C56.3163 38.6839 56.2566 39.1938 55.9374 39.1938C55.3681 39.1938 54.459 39.0647 54.2624 38.6484C54.0929 38.2894 54.2624 37.3592 54.2624 36.9605C54.2624 36.6593 54.5729 36.3116 54.6591 36.0227C54.7522 35.7105 54.7735 35.345 54.9288 35.0567C55.1723 34.6044 55.4308 34.261 55.8976 33.9943C56.0912 33.8836 56.2792 33.8576 56.4426 33.6943C56.5685 33.5683 56.7242 33.4531 56.8664 33.3447C57.1157 33.1548 57.373 32.916 57.6563 32.7805C57.8367 32.6943 58.0153 32.6361 58.1765 32.5163C58.4635 32.3031 58.6992 32.0457 59.0242 31.8833C59.3939 31.6984 59.8079 31.6778 60.1857 31.5144C60.3297 31.4522 60.4066 31.581 60.5352 31.5612C61.044 31.483 61.5403 31.4101 62.0573 31.4154C62.3159 31.418 62.5819 31.4664 62.836 31.5127L62.8609 31.5172C63.0377 31.5493 63.2014 31.7335 63.3894 31.7016C64.0813 31.5841 64.7371 31.4257 65.3353 31.0933C66.0082 30.7195 66.6987 30.3188 67.4656 30.152C68.3248 29.9653 69.2616 29.9495 70.1353 30.0254C70.4927 30.0565 70.7246 29.3339 71.0126 29.1437C70.7697 28.8042 71.3403 29.092 71.3635 28.9878C71.3956 28.8433 71.9568 28.6865 72.1293 28.5854C72.9815 28.0858 73.6694 28.0137 74.6133 27.7108C75.1847 27.5273 75.8246 27.5511 76.4188 27.5511C77.0376 27.5511 77.7523 27.5769 78.3289 27.8208C78.7656 28.0056 79.336 28.2197 79.6996 28.5172C79.848 28.6386 79.9546 28.806 80.1234 28.8997C80.2178 28.9522 80.2019 29.1058 80.2996 29.1337C80.9652 29.3239 81.4066 30.096 81.9565 30.5236C82.1668 30.6872 82.3476 30.7939 82.5234 31.019L82.5624 31.069C82.8774 31.4723 83.1609 31.8354 83.5308 32.197C83.8751 32.5337 84.0945 32.9123 84.373 33.2979C84.5073 33.4839 84.6103 33.6928 84.7556 33.8704C84.9263 34.0792 85.1465 34.2421 85.2757 34.4869Z",className:"fill-bg-200"}),(0,d.jsx)("path",{d:"M67.7482 22.9232C67.1896 22.9532 66.6769 23.2141 66.1398 23.3926C65.7402 23.4358 65.2866 23.5176 64.9657 23.4487C64.5427 23.3578 64.3125 22.1882 64.3125 21.8853C64.3125 21.6589 64.8596 21.1532 64.9657 20.948C65.1003 20.6878 65.1781 20.3456 65.1781 20.056C65.1781 19.8249 65.3099 19.5861 65.3099 19.3552C65.3099 19.056 65.563 18.839 65.6394 18.5623C65.7416 18.1915 66.04 17.832 66.1995 17.472C66.3388 17.1577 66.3623 16.8386 66.5253 16.5234C66.7694 16.0514 66.932 15.5397 67.1404 15.0863C67.3256 14.6835 67.2777 14.146 67.6017 13.7978C67.8348 13.5475 68.7717 12.6472 68.7792 12.3935C68.7988 11.7298 69.2298 11.0187 69.5041 10.4219C69.6883 10.0211 69.8748 9.65484 70.0972 9.27858C70.2044 9.09717 70.4028 8.83166 70.5439 8.68391C70.719 8.50053 70.7873 8.40467 71.0528 8.34764C71.4926 8.25314 71.8762 8.05731 72.3708 8.16357C72.7098 8.23642 73.1589 8.4166 73.341 8.73346C73.5765 9.14329 73.7569 9.56036 74.1025 9.89448C74.2327 10.0204 74.2754 9.13718 74.3626 9.04347C74.6608 8.72318 75.2801 7.75357 75.4793 7.36845C75.6884 6.96414 76.0376 6.69206 76.0376 6.25177C76.0376 5.94292 76.3328 6.08153 76.5554 5.86631C76.7442 5.6838 76.84 5.39132 77.0497 5.22917C77.4318 4.93358 77.6831 4.50273 77.9064 4.11416C78.0949 3.78609 78.4194 3.45438 78.6642 3.15845C78.9498 2.81332 79.1214 2.67526 79.5209 2.5036C79.9865 2.30355 80.5032 2.61564 80.7877 2.92129C81.1086 3.26599 81.0366 3.89829 81.0366 4.33716C81.0366 4.49974 81.1684 4.97052 81.1684 4.80794C81.1684 4.64738 81.6322 4.7264 81.7615 4.71945C82.0066 4.70629 82.9294 4.74159 83.0795 4.56016C83.3208 4.26856 83.9722 4.16209 84.2987 3.98673C84.6706 3.78697 85.191 4.23764 85.5741 4.03182C85.9102 3.8513 86.3749 3.64031 86.7603 3.5575C87.6503 3.36629 88.392 2.53453 89.2975 2.53453H91.0768C91.2955 2.53453 91.3795 2.34338 91.5747 2.34338H92.0324C92.3372 2.34338 92.6285 2.4071 92.922 2.4071C93.4002 2.4071 93.8062 2.49438 94.246 2.58891L94.273 2.5947C94.7017 2.68682 95.063 2.93936 95.4555 3.04778C95.9085 3.17293 96.2708 3.62799 96.7076 3.74864C97.1991 3.8844 97.2055 4.59953 97.2055 4.98754C97.2055 5.29316 97.3447 6.07773 97.1543 6.30784C97.1172 6.35257 97.0078 6.83486 97.0078 6.89897C97.0078 7.11413 96.7947 7.21943 96.693 7.37683C96.6378 7.46216 96.4169 7.61727 96.3159 7.6954C96.2074 7.77928 96.1361 7.98208 96.034 8.09185C95.9057 8.22959 96.2329 8.32441 96.1379 8.48513C96.0467 8.63948 96.2581 8.93888 96.1379 9.04347C95.9791 9.18161 95.7477 9.47176 95.5795 9.60181C95.421 9.72442 95.2141 10.0773 95.0212 10.1601C94.5563 10.3599 94.3576 10.4751 93.9045 10.7185C93.5069 10.9321 92.5714 11.5707 92.2295 11.8352C91.9572 12.0458 90.9345 12.3935 90.5545 12.3935C90.2192 12.3935 89.3731 12.6275 89.2462 12.9341C89.1525 13.1607 89.0059 13.3632 88.9021 13.589C88.8327 13.7399 88.7582 14.0432 88.6531 14.1447C88.3732 14.4154 89.1523 14.9214 88.8795 15.1852C88.6017 15.4537 87.9269 16.5253 87.7628 16.8602C87.5159 17.3642 86.9773 17.5766 86.6461 17.9769C86.4393 18.2269 85.3017 19.0936 84.9711 19.0936C84.6702 19.0936 84.1578 19.2625 83.9596 19.4861C83.8173 19.6466 83.4912 18.9703 83.2961 19.0936C83.0485 19.2501 83.1332 19.0557 82.8722 19.1959C82.6977 19.2896 82.4712 19.4449 82.2791 19.4861C82.0635 19.5325 81.7886 19.5093 81.5872 19.5959C81.3519 19.697 81.0309 19.5744 80.8293 19.7693C80.6254 19.9665 80.2783 19.9014 80.0202 19.9781C79.6026 20.1024 79.2193 20.2523 78.8194 20.4241C78.5783 20.5278 78.2309 20.5655 77.9663 20.6294C77.5466 20.7309 77.1298 20.7569 76.6959 20.7569C76.081 20.7569 75.4948 20.8843 74.8983 20.8843C74.7038 20.8843 74.381 20.9508 74.2064 21.0259C73.9687 21.128 73.6781 21.0948 73.4449 21.2383C73.1517 21.4187 72.8919 21.3848 72.5589 21.394C72.2023 21.4039 71.8578 21.8061 71.5045 21.9037C71.3559 21.9448 70.9684 22.0253 70.8601 22.109C70.718 22.219 70.443 22.1672 70.3183 22.3179C70.1737 22.4925 69.42 22.6557 69.198 22.6683C68.9317 22.6835 68.7036 22.6899 68.4438 22.7356C68.2169 22.7754 67.9784 22.9108 67.7482 22.9232Z",className:"fill-bg-200"}),(0,d.jsx)("path",{d:"M70.3117 58.241C69.7478 58.1414 69.26 57.8323 68.742 57.6088C68.4782 57.4939 68.1925 57.5284 67.9166 57.4224C67.4748 57.2512 67.0403 57.0571 66.601 56.8834C66.3226 56.7736 66.0636 56.5539 65.7744 56.4364C64.8679 56.0699 64.1925 55.3573 63.4458 54.7493C63.4216 54.7302 63.4022 54.6983 63.3901 54.6689C63.1977 54.1427 62.7789 53.8247 62.3674 53.5399C61.8954 53.2142 61.4997 52.803 61.1196 52.3867C60.7614 51.9933 60.2785 51.743 60.0074 51.2487C59.8609 50.9831 59.5608 50.8643 59.3357 50.6753C58.7971 50.2232 58.388 49.6217 57.8022 49.2283C57.2963 48.8886 56.7711 48.5744 56.293 48.1964C55.5172 47.5847 54.7729 46.9282 54.0031 46.282C53.8446 46.4914 53.8143 46.7405 53.709 46.9512C53.5069 47.3573 53.2128 47.4748 52.8025 47.3011C52.3559 47.1121 52.2458 46.8197 52.3656 46.3433C52.4576 45.978 52.7457 45.7558 52.8752 45.425C52.9284 45.2897 52.9587 45.1939 52.8461 45.0611C52.4213 44.5604 52.0497 44.0036 51.7786 43.4085C51.4918 42.7763 51.2873 42.0905 51.7193 41.3842C52.1066 40.7508 52.5508 40.208 53.2165 39.8964C53.3157 39.8491 53.4089 39.7853 53.4985 39.7188C53.6546 39.6026 53.6352 39.434 53.4985 39.36C53.1923 39.1965 53.1208 38.8887 53.0494 38.5988C52.7759 37.489 52.9647 36.4494 53.4851 35.4469C53.6909 35.0509 53.8071 34.6078 54.0721 34.2374C54.4473 33.7125 54.906 33.2821 55.3659 32.8466C55.7677 32.4673 56.155 32.0676 56.6404 31.8121C57.3193 31.4546 58.0019 31.1046 58.7305 30.8722C59.0283 30.7777 59.3357 30.7138 59.6322 30.6155C59.9263 30.5197 60.0885 30.2834 60.2664 30.0152C60.8751 29.0957 61.2431 28.0395 61.824 27.1021C62.2113 26.4776 62.4594 25.7547 62.5417 24.9846C62.6059 24.3908 62.6664 23.7854 62.9593 23.2503C63.0512 23.0817 63.0077 22.8927 63.0391 22.7152C63.1263 22.2222 63.2594 21.719 63.4349 21.2848C63.6818 20.6769 63.7653 20.0064 64.086 19.4406C64.2337 19.1814 64.2264 18.8978 64.3208 18.636C64.5823 17.9055 64.9139 17.1929 65.0833 16.4394C65.2661 15.6233 65.8518 15.0575 66.1 14.3015C66.3904 13.4151 66.9242 12.6936 67.4531 11.963C67.5426 11.8404 67.5995 11.6885 67.654 11.5416C67.7847 11.1891 68.0715 10.9643 68.2797 10.677C68.5072 10.3615 68.6682 10.0001 68.9272 9.70636C69.5202 9.03204 70.0019 8.25938 70.7692 7.74725C71.4579 7.28876 72.1502 6.96309 72.9744 6.95032C73.4621 6.94266 73.8143 7.1355 74.0576 7.61826C74.2585 7.28876 74.4291 6.99758 74.6107 6.71405C75.1263 5.90946 75.6927 5.14957 76.2966 4.41267C76.7686 3.83541 77.2527 3.26581 77.7901 2.77284C78.3505 2.25816 79.0064 1.86097 79.7798 1.7422C80.0884 1.69494 80.3886 1.61449 80.7069 1.60171C81.4827 1.57106 82.1496 2.11512 82.0503 3.00272C82.0164 3.30157 82.2064 3.60553 82.0769 3.9644C82.4122 3.79199 82.7583 3.63873 83.0815 3.44333C83.6116 3.1215 84.1913 2.92993 84.7541 2.69493C85.421 2.41652 86.0975 2.14832 86.7898 1.95165C87.5801 1.72687 88.3958 1.60427 89.2043 1.46378C89.6207 1.39099 90.0418 1.42547 90.4642 1.29648C90.7535 1.20836 91.1226 1.20964 91.4542 1.26711C91.9698 1.35523 92.4854 1.25689 93.0034 1.29648C93.5178 1.33607 94.0164 1.44718 94.5066 1.57617C95.0887 1.72943 95.6648 1.93377 96.2155 2.18536C96.7323 2.42163 97.2321 2.7358 97.5698 3.23005C97.7526 3.49825 98.0212 3.66172 98.181 3.96823C98.463 4.50845 98.4921 5.07805 98.5247 5.65915C98.5635 6.33858 98.3613 6.95926 98.1423 7.58505C97.9571 8.11378 97.6509 8.56205 97.3786 9.03331C97.3072 9.1572 97.214 9.26447 97.1668 9.40751C97.0554 9.7434 96.7529 9.89154 96.512 10.0857C96.1465 10.3794 95.8318 10.7357 95.4337 10.9873C94.8164 11.3781 94.3456 11.9567 93.7974 12.4369C93.7151 12.5097 93.6146 12.5837 93.5142 12.6042C92.9828 12.7089 92.5834 13.1035 92.0957 13.3002C91.4918 13.5441 90.8987 13.8276 90.2379 13.8494C90.0491 13.8557 90.0249 13.9311 90.0128 14.1201C89.9765 14.7101 89.9789 15.304 89.8857 15.8902C89.7986 16.4317 89.502 16.8608 89.2285 17.2989C88.8715 17.8698 88.3825 18.3231 87.9069 18.7778C87.378 19.2848 86.7329 19.6066 86.0794 19.9055C84.9223 20.4342 83.6842 20.6539 82.4654 20.9195C81.4779 21.1341 80.4769 21.3052 79.4748 21.4534C78.4654 21.6015 77.4766 21.894 76.4745 22.0996C75.5596 22.2861 74.6325 22.4125 73.7211 22.6168C73.0301 22.7726 72.3583 23.0332 71.6709 23.2043C71.0077 23.3691 70.4098 23.7215 69.7248 23.839C69.306 23.9106 68.8485 24.0268 68.4612 24.2873C68.2059 24.4585 67.9057 24.5338 67.631 24.6756C66.5006 25.2579 65.473 25.9718 64.5665 26.8978C64.1211 27.3524 63.6007 27.7177 63.2049 28.24C62.9205 28.6155 62.7826 29.0638 62.5369 29.4533C62.3977 29.6742 62.2742 29.9054 62.1556 30.1391C62.0673 30.3154 62.0866 30.4367 62.3214 30.4303C62.9653 30.4099 63.6007 30.4967 64.2349 30.6116C64.4709 30.6551 64.7009 30.6219 64.9163 30.4086C65.2503 30.0765 65.6461 29.8288 66.1229 29.7534C66.5453 29.687 66.9 29.4073 67.3187 29.3C67.6031 29.2272 67.919 29.1072 68.1732 29.1264C68.8788 29.18 69.3024 28.6398 69.8458 28.3716C70.359 28.1187 70.8697 27.8773 71.4095 27.6998C71.9698 27.5159 72.5363 27.4393 73.1281 27.4571C73.3544 27.4635 73.6074 27.2528 73.8131 27.0932C74.6664 26.4316 75.631 26.1902 76.6694 26.1851C76.7807 26.1851 76.8872 26.1838 76.9925 26.2119C77.6304 26.3844 78.3105 26.3103 78.9326 26.5861C79.021 26.6257 79.119 26.6449 79.2013 26.7036C79.6588 27.037 80.1732 27.2464 80.6887 27.4469C80.8485 27.5082 80.909 27.664 81.0264 27.7662C81.2527 27.9642 81.542 28.0319 81.7816 28.2209C82.3529 28.6691 82.7765 29.2528 83.2497 29.7956C83.5995 30.1966 83.8016 30.7036 84.1683 31.0829C84.23 31.1455 84.2712 31.2311 84.3172 31.3102C84.7965 32.1263 85.2564 32.9577 85.7429 33.7649C86.1629 34.4609 86.5598 35.1697 86.958 35.8798C87.1928 36.2987 87.0863 36.8236 86.7462 37.0433C86.5356 37.1799 86.2851 37.1774 86.1568 36.9922C85.9039 36.6269 85.4754 36.4341 85.3145 35.9884C85.1039 35.4085 84.7529 34.9079 84.466 34.3728C84.0521 33.6001 83.5595 32.8747 82.9605 32.2336C82.2996 31.5248 81.663 30.7879 80.9199 30.1774C80.5411 29.8671 80.2543 29.4507 79.844 29.1877C79.1589 28.7483 78.5683 28.1647 77.755 27.9195C77.0833 27.7164 76.4067 27.7483 75.7375 27.6436C75.5039 27.6066 75.4264 27.8505 75.2993 27.9884C75.2376 28.0561 75.3344 28.0906 75.3865 28.1276C76.0412 28.6066 76.6984 29.0855 77.3544 29.5542C78.0213 30.0293 78.4449 30.7304 79.0815 31.2132C79.6297 31.6295 79.5087 32.4929 78.8854 32.7457C78.6373 32.8466 78.3577 32.7457 78.1532 32.5644C77.6642 32.1263 77.116 31.7547 76.7384 31.1851C76.673 31.0867 76.5544 31.0242 76.4552 30.9526C75.6431 30.3664 74.8322 29.7764 73.9741 29.2656C73.945 29.249 73.9136 29.2234 73.8845 29.2247C73.3762 29.2375 72.8957 28.9935 72.3838 29.0408C72.2313 29.0548 72.0739 29.1174 71.9299 29.0893C71.6443 29.0331 71.4325 29.1136 71.2521 29.3779C71.6213 29.6002 71.9892 29.8211 72.3547 30.0433C72.8957 30.3728 73.4307 30.6959 73.8506 31.2196C74.0176 31.4277 74.2512 31.6321 74.4824 31.8007C74.8915 32.0982 75.1783 32.521 75.5087 32.899C75.7399 33.1633 75.8307 33.4673 75.6612 33.8402C75.4954 34.2029 75.2412 34.2834 74.8951 34.0663C74.463 33.7955 74.2077 33.3281 73.8119 33.0241C73.3471 32.6665 72.8848 32.3051 72.4152 31.9526C71.9735 31.6219 71.5148 31.3268 71.0319 31.0842C70.5586 30.8466 70.0661 30.6615 69.5069 30.6717C69.214 30.6768 68.8776 30.7113 68.5847 30.5491C68.5121 30.5095 68.4068 30.489 68.3305 30.512C67.8573 30.6512 67.3574 30.6512 66.8915 30.8339C66.7547 30.8875 66.6567 30.9501 66.6627 31.1123C66.6688 31.2706 66.8177 31.2145 66.8806 31.2247C67.24 31.2834 67.5196 31.5184 67.8234 31.687C68.483 32.0535 69.2503 32.1238 69.8797 32.5835C70.6591 33.1544 71.4579 33.6946 72.0981 34.4456C72.5181 34.9386 72.5254 35.6116 72.1369 36.1059C71.9698 36.3179 71.5971 36.3345 71.3417 36.0854C71.0476 35.7968 70.7656 35.4852 70.5272 35.1442C69.8942 34.2374 69.0276 33.7074 68.0437 33.3562C67.8343 33.2821 67.6382 33.1863 67.441 33.0829C66.5381 32.604 65.5735 32.3026 64.6052 32.019C64.0437 31.8543 63.4458 31.968 62.8854 31.7981C62.382 31.6448 61.8894 31.7266 61.3895 31.7955C61.0434 31.8441 60.8727 32.0727 60.7469 32.3856C60.5823 32.7943 60.3898 33.1863 60.1381 33.5465C59.9856 33.7636 59.867 34.0075 59.7326 34.2412C59.3817 34.8543 59.0851 35.5056 58.5889 36.0152C58.5792 36.0254 58.5877 36.0573 58.5877 36.1071C59.1057 35.8836 59.5765 35.581 60.1006 35.4034C61.0603 35.079 62.031 35.1429 62.9677 35.4034C63.4264 35.5311 63.867 35.8287 64.2906 36.1199C64.8776 36.5235 65.4295 36.9679 65.9245 37.4762C66.2936 37.8542 66.67 38.2948 66.8588 38.7865C67.3199 39.9909 67.7157 41.245 67.28 42.5643C67.113 43.07 66.9363 43.5834 66.5054 43.9551C66.1641 44.2488 65.9402 44.6664 65.6013 44.987C65.2152 45.3523 64.7977 45.5502 64.3245 45.6128C63.4022 45.7367 62.4715 45.7277 61.5928 45.3663C61.1438 45.1811 60.6924 44.9512 60.385 44.517C60.3608 44.4825 60.316 44.4608 60.2773 44.4391C59.286 43.8836 58.3154 43.2948 57.4404 42.5451C57.2177 42.3548 56.9393 42.2693 56.6936 42.1224C56.2954 41.8836 55.9505 41.5681 55.5438 41.3357C54.4316 40.6997 53.5832 41.1709 52.9466 42.0292C52.6912 42.3727 52.8752 42.7776 53.0749 43.0968C53.4162 43.6409 53.7575 44.1913 54.221 44.6319C54.6494 45.0381 55.0827 45.4404 55.5971 45.729C55.6903 45.7814 55.769 45.8695 55.8464 45.9499C56.3354 46.4672 56.9587 46.7814 57.5166 47.1951C58.3977 47.849 59.3865 48.3586 60.0824 49.2756C60.1962 49.4263 60.4056 49.4952 60.5677 49.6076C60.8413 49.7966 61.0627 50.0521 61.3351 50.2526C61.6921 50.5157 62.0419 50.8145 62.382 51.1134C62.5538 51.2641 62.7124 51.4339 62.8322 51.6536C62.9931 51.9499 63.2207 52.1976 63.4954 52.402C64.1381 52.8784 64.5968 53.5897 65.2503 54.0367C65.8046 54.4147 66.1992 55.052 66.854 55.2334C67.4216 55.3905 67.9287 55.6868 68.4649 55.909C68.8304 56.061 69.1656 56.2538 69.5711 56.3215C70.2367 56.4326 70.8903 56.6242 71.545 56.7991C71.729 56.8477 71.919 56.9026 72.0727 57.0456C72.3341 57.2883 72.2785 57.4262 72.0485 57.697C71.6915 58.1171 71.1953 58.0673 70.7704 58.2487H70.3093L70.3117 58.241ZM64.8086 22.2465C65.2879 22.3716 65.588 22.0792 65.8821 21.825C66.3178 21.4483 66.6906 20.9962 67.0888 20.5773C67.3587 20.2925 67.7012 20.1367 67.9565 19.8327C68.4225 19.2771 68.9042 18.7254 69.5081 18.318C70.0068 17.9809 70.503 17.6386 70.9859 17.2784C71.5789 16.8353 72.1574 16.3717 72.7396 15.9132C73.122 15.6118 73.5541 15.3921 73.9438 15.1073C74.6288 14.6067 75.3816 14.2197 76.0485 13.6897C76.2688 13.5148 76.8739 13.705 76.8606 13.9337C76.8425 14.2568 76.9078 14.631 76.6161 14.88C76.2216 15.2159 75.8403 15.5773 75.4179 15.8685C74.5284 16.4802 73.6594 17.1226 72.8037 17.7855C72.2845 18.1878 71.775 18.599 71.2776 19.0319C70.6857 19.5453 70.0854 20.046 69.5335 20.6066C69.0978 21.0485 68.604 21.4227 68.2107 21.9144C68.1139 22.0357 67.8875 22.0753 67.9916 22.2963C68.086 22.4981 68.2833 22.5581 68.4745 22.4802C68.8291 22.3371 69.2019 22.2196 69.4827 21.9285C69.5711 21.8365 69.6667 21.7522 69.7804 21.7267C70.3602 21.5939 70.8878 21.3052 71.4482 21.1149C71.8355 20.9834 72.1998 20.7918 72.5956 20.6756C72.9756 20.5645 73.381 20.5734 73.7405 20.4189C74.4231 20.1264 75.1517 20.0766 75.8585 19.9221C76.5484 19.7714 77.2697 19.8046 77.9547 19.6181C78.3505 19.5109 78.7571 19.6871 79.1432 19.4879C79.4397 19.3346 79.7798 19.3436 80.1018 19.2848C80.8352 19.1494 81.5735 19.0447 82.3057 18.8991C82.9943 18.7625 83.6866 18.6399 84.3378 18.3308C84.5411 18.235 84.788 18.2708 85.0155 18.1533C85.4524 17.9285 85.9607 17.8659 86.3408 17.5032C86.3626 17.4828 86.4013 17.4751 86.4328 17.4751C86.6252 17.4726 86.7499 17.3474 86.8745 17.2159C87.2134 16.8608 87.5027 16.4547 87.8863 16.1482C88.3668 15.7638 88.5011 15.2529 88.3825 14.6527C88.3559 14.5199 88.3656 14.3181 88.1489 14.3577C87.4893 14.4764 86.8237 14.5339 86.1592 14.6054C85.5735 14.6693 84.9925 14.797 84.4055 14.8481C83.8185 14.8992 83.2255 14.8864 82.6361 14.9107C81.7453 14.9464 81.0095 14.6361 80.5217 13.8225C80.149 13.2019 79.9759 12.5595 80.4285 11.8724C80.8788 11.1891 81.4815 10.7242 82.1834 10.373C82.5586 10.1853 82.9471 10.0116 83.3514 9.97839C83.7532 9.94518 84.1623 9.9554 84.575 10.0256C85.237 10.1393 85.9148 10.2147 86.5465 10.4292C87.5136 10.7574 88.4213 11.2402 89.0857 12.1086C89.2116 12.2721 89.3544 12.3347 89.5928 12.2504C90.0806 12.078 90.5017 11.7702 90.9762 11.5774C91.7157 11.2759 92.4636 10.9988 93.1644 10.5965C93.5734 10.3615 93.9329 10.0397 94.3492 9.83152C94.8987 9.55694 95.2207 9.0397 95.6297 8.61569C96.0957 8.13166 96.3414 7.48927 96.6742 6.91201C97.0845 6.20193 97.1535 5.45991 96.7601 4.70385C96.466 4.13681 95.9081 3.92098 95.4228 3.63745C95.0379 3.41268 94.578 3.31562 94.1399 3.20834C92.748 2.86607 91.3465 2.80988 89.9196 2.97335C89.2128 3.05508 88.5362 3.216 87.8524 3.3948C86.8551 3.65533 85.8615 3.92864 84.9247 4.37691C84.1853 4.73067 83.3574 4.91714 82.7813 5.59401C82.6385 5.76259 82.48 5.91585 82.3287 6.07549C81.9535 6.47268 81.519 6.82644 81.2188 7.27854C80.8957 7.76513 80.4285 8.07036 80.0667 8.50203C79.9565 8.6323 79.7169 8.66678 79.5305 8.69488C79.2618 8.73574 78.8322 8.41263 78.8189 8.18786C78.7959 7.79578 78.8745 7.40115 79.1553 7.15722C79.4264 6.92222 79.614 6.63998 79.7653 6.33475C80.1744 5.50844 80.6161 4.69236 80.7698 3.75367C80.8182 3.45483 80.6924 3.05508 80.5241 3.07296C80.0243 3.12533 79.516 3.17641 79.0754 3.45866C78.5151 3.81881 78.0576 4.32455 77.617 4.81624C77.0264 5.47396 76.5181 6.22108 76.0013 6.94777C75.5535 7.57867 75.113 8.22745 74.7801 8.94775C74.4667 9.62718 74.1108 10.2721 73.991 11.0448C73.8833 11.7447 73.7453 12.4509 72.9671 12.7804C72.6222 12.926 72.3741 12.9579 72.0727 12.7612C71.8137 12.5914 71.7314 12.3628 71.7496 12.0461C71.7956 11.2542 72.1393 10.585 72.4903 9.91453C72.6779 9.55694 72.8364 9.18274 72.9175 8.77917C72.9586 8.5761 72.9018 8.45989 72.6815 8.49437C72.2107 8.56844 71.7738 8.75618 71.4167 9.07674C70.8939 9.548 70.3723 10.0078 69.9608 10.6208C69.513 11.2874 69.093 11.9733 68.673 12.6565C68.2736 13.3066 67.9807 14.0269 67.5934 14.6859C67.4071 15.0026 67.2146 15.3091 67.0767 15.6539C66.9181 16.0473 66.7765 16.4534 66.5986 16.8302C66.4243 17.2005 66.313 17.585 66.1968 17.9681C65.9317 18.8429 65.582 19.6833 65.3145 20.5581C65.1426 21.1188 64.9574 21.6743 64.8074 22.2465H64.8086ZM63.608 44.342C63.9505 44.2922 64.3281 44.3574 64.5968 43.9321C64.7275 43.7252 64.8764 43.4915 65.0652 43.3267C65.231 43.1824 65.1644 43.1352 65.0313 43.0675C64.4782 42.7839 64.0727 42.328 63.6939 41.8299C62.6071 40.4034 62.0661 38.7687 61.9862 36.9539C61.9801 36.8134 61.9535 36.7597 61.8192 36.7929C61.7453 36.8108 61.6667 36.8415 61.5953 36.8274C60.6319 36.6461 59.8416 37.0918 59.1807 37.7176C58.4945 38.3676 57.9136 39.1454 57.3012 39.8785C57.139 40.0726 56.88 40.3242 57.346 40.4915C57.3653 40.4979 57.3859 40.5196 57.3919 40.5388C57.49 40.8606 57.755 41.0024 57.9947 41.1786C58.7317 41.7201 59.3974 42.3689 60.2555 42.7226C60.8207 42.9551 61.3072 43.3535 61.824 43.6856C62.1907 43.9219 62.5562 44.1645 62.9665 44.3178C63.1735 44.3957 63.378 44.2641 63.608 44.3395V44.342ZM58.6531 32.5593C57.8494 32.8185 57.1632 33.2259 56.604 33.8134C55.7932 34.664 54.8165 35.3919 54.641 36.7419C54.5635 37.3396 54.1496 37.9283 54.7463 38.4698C54.745 39.0305 55.1941 38.7572 55.4301 38.867C55.6031 38.9475 55.7254 38.7252 55.7689 38.6128C56.0122 37.9705 56.4745 37.4583 56.6791 36.7878C56.8594 36.1978 57.0797 35.6039 57.3823 35.0765C57.7199 34.489 58.1314 33.9462 58.3735 33.3C58.4618 33.065 58.6579 32.876 58.6531 32.5593ZM87.4978 12.903C87.188 12.7025 86.9604 12.5186 86.7063 12.3985C86.0334 12.0805 85.3181 11.903 84.5943 11.7817C83.666 11.6272 82.7341 11.5148 81.8942 12.1444C81.6437 12.3321 81.5541 12.6693 81.7441 12.9171C81.8712 13.0831 82.0128 13.2376 82.2294 13.3066C82.8951 13.5199 83.5716 13.419 84.2434 13.4088C84.8691 13.3998 85.4924 13.2989 86.1108 13.1967C86.5489 13.124 86.9992 13.1112 87.499 12.903H87.4978ZM63.7181 38.5528C63.7036 38.8121 63.7617 39.0547 63.867 39.2872C64.2482 40.1288 64.7069 40.9206 65.2552 41.6511C65.3532 41.7814 65.5069 41.9385 65.6667 41.8836C65.7998 41.8376 65.7744 41.6256 65.7925 41.4787C65.7938 41.4672 65.7925 41.4557 65.7901 41.4442C65.7006 40.7048 65.64 39.95 65.3314 39.2731C65.1269 38.8249 64.8364 38.4213 64.431 38.1186C64.2313 37.9692 64.0981 38.0088 63.9045 38.0943C63.677 38.1952 63.7217 38.3753 63.7181 38.5541V38.5528Z",className:"fill-text-200"})]})]})}let ef={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},eg=(0,F.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:r,animateBoolRef:s}=e,i=(0,I.z$)(),[l,o]=(0,F.useState)(!1),[c,u]=(0,F.useState)(""),{handleRateLimitError:m}=eo(),{mutateAsync:h}=(0,et.GB)(),x=(0,F.useRef)(null),f=(0,F.useRef)(null);(0,F.useEffect)(()=>{l&&setTimeout(()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.focus()},50)},[l]);let[C,b]=(0,F.useState)(!1),[j,y]=(0,F.useState)(!1),w=(0,F.useRef)(null),N=(0,F.useRef)(null),k=4e3,{handleFileUpload:_,handleTextUpload:S}=function(e){let[t,n]=(0,F.useState)(!1),{activeOrganization:r}=(0,ed.t)(),{addError:s}=(0,g.e)(),i=(0,ec.OJ)();return{handleFileUpload:async a=>{if(t||!r)return;if(n(!0),!(0,p.dF)(a))try{let t=await (0,p.CL)(a);await e(t),n(!1);return}catch(e){}let l=new FormData;l.append("file",a);try{let t=await i("/api/organizations/".concat(r.uuid,"/convert_document"),{method:"POST",body:l});if(!t.ok)throw Error("Document conversion failed");let n=await t.json();if(!(null==n?void 0:n.extracted_content))throw Error("Document conversion failed: No extracted content");await e(n.extracted_content)}catch(e){s(e instanceof Error?e.message:"Error uploading file")}finally{n(!1)}},handleTextUpload:async s=>{!t&&r&&0!==s.trim().length&&(n(!0),await e(s),n(!1))},isUploading:t}}(async e=>{try{let t=await h({content_example:e});w.current=t}catch(e){m(e,"Failed to create style. Please try again."),b(!1)}}),E=()=>{w.current?r(w.current,!0):(k=1e3,N.current=setTimeout(E,k))},z=async()=>{R(),await S(c)},L=async e=>{let t=Array.from(e.dataTransfer.files);t&&(y(!0),setTimeout(R,20),await _(t[0]))},D=async e=>{let t=e.target.files;t&&(R(),await _(Array.from(t)[0])),e.target.value=""},R=()=>{b(!0),N.current=setTimeout(E,k)};return(0,d.jsx)(Y.E.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:s.current?ef:{duration:0},children:(0,d.jsxs)(T.M,{mode:"popLayout",children:[C&&(0,d.jsx)(Y.E.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:ef,children:(0,d.jsx)(ev,{})},"CreateStyleAnalyzingContentScreen"),!C&&(0,d.jsxs)(Y.E.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,d.jsxs)(Y.E.div,{exit:{opacity:0,y:40,transition:ef},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,d.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,d.jsx)(ex,{})}),(0,d.jsx)("p",{className:" text-text-300 font-tiempos sm:text-lg",children:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you."})]},"CreatStyleStartScreenExplainer"),(0,d.jsx)(Y.E.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:ef}},children:l?(0,d.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,d.jsx)("textarea",{ref:f,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",value:c,onChange:e=>u(e.target.value),required:!0}),(0,d.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,d.jsx)(U.z,{variant:"secondary",onClick:()=>o(!1),children:"取消"}),(0,d.jsx)(U.z,{onClick:z,children:"Create Style"})]})]}):(0,d.jsxs)(v.rE,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:L,children:[(0,d.jsx)(eC,{showDropCover:j},"DropZoneOverlay"),(0,d.jsx)("input",{ref:x,type:"file",className:"hidden",accept:(0,p.tB)({imagesEnabled:!1}).join(","),onChange:D,multiple:!0}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(H.Lt,{trigger:(0,d.jsx)(U.z,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,d.jsx)(en.$,{weight:"bold"}),children:"Add Writing Example"}),children:[(0,d.jsx)(H.hP,{children:(0,d.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{x.current&&x.current.click()},children:[(0,d.jsx)(er.p,{size:16})," Upload from device"]})}),(0,d.jsx)(H.hP,{onClick:()=>o(!0),children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(es.P,{size:16}),"Paste text content"]})})]}),(0,d.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,d.jsxs)("p",{children:["Select",(0,d.jsx)("span",{className:"max-sm:hidden",children:", drop,"})," or paste existing doc, post, message, etc."]}),(0,d.jsx)("p",{children:"Content is not stored after matching style."})]})]}),(0,d.jsx)("div",{className:"absolute w-full bottom-6",children:(0,d.jsx)(U.z,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,d.jsx)(ei.x,{}),onClick:()=>{i.track({event_key:"styles.custom.describe_clicked"}),n(a.CREATE_MANUALLY)},children:"Describe style instead"})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});eg.displayName="CreateStyle";let eC=e=>{let{showDropCover:t}=e,{dragState:n}=(0,v.EO)(),r=n===v.h7.DRAGGING_OFF_TARGET||n===v.h7.DRAGGING_ON_TARGET||t;return(0,d.jsx)(T.M,{children:r&&(0,d.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,D.Z)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",n===v.h7.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,d.jsxs)("div",{className:"py-1.5 text-center",children:[(0,d.jsx)("div",{className:"relative inline-block opacity-60",children:(0,d.jsx)(ea.y,{size:36,weight:"thin"})}),(0,d.jsxs)("div",{className:"font-tiempos pt-2 pb-4 italic tracking-tight",children:["Drop example writing here",(0,d.jsx)("br",{}),"to match the style"]})]})},"drop-zone-overlay")})},ev=()=>(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,d.jsx)(ex,{animate:!0}),(0,d.jsx)(Y.E.div,{className:"font-tiempos italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:"Analyzing your writing..."})]});var eb=n(55132),ej=n(9214),ey=n(56224),ew=n(95940);let eN={objective:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eb.V,{})," Define style objective"]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I'd like the writing to serve this purpose:"},audience:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ew.E,{})," Tailor to an audience"]}),description:"Describe details of the target audience you'd like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They're tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I'd like to tailor this style to a specific audience:"},voicetone:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ej.i,{})," Use specific voice & tone"]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I'd like to write in this voice and tone:"},general:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ei.x,{})," Describe generally"]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:""},custom:{label:(0,d.jsx)(d.Fragment,{children:"Use custom instructions (advanced)"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don't follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},ek=(0,F.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:r}=e,s=(0,I.z$)(),[i,l]=(0,F.useState)(!1),[o,c]=(0,F.useState)(""),[u,m]=(0,F.useState)(Object.keys(eN)[0]),{handleRateLimitError:p}=eo(),{mutateAsync:h}=(0,et.GB)(),x=(0,F.useRef)(null);(0,F.useEffect)(()=>{setTimeout(()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.focus()},50)},[u]);let f=o.replace(/\s/g,"").length>24,g=async()=>{if(!i&&f){l(!0);try{let e="custom"===u?{prompt:o}:{input_text:eN[u].promptPrepend+"\n"+o},t=await h(e);r(t,!1)}catch(e){p(e,"Failed to create style. Please try again.")}finally{l(!1)}}},C=e=>{s.track({event_key:"styles.custom.describe_selected",key:e}),m(e)};return(0,d.jsxs)(Y.E.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,d.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,d.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:"Generate style from a starting point:"}),(0,d.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(eN).map(e=>(0,d.jsx)("li",{children:(0,d.jsxs)("button",{className:(0,D.Z)("flex gap-1.5 items-center font-styrene h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",u===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>C(e),children:[(0,d.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:u===e&&(0,d.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),eN[e].label]})},e))}),(0,d.jsx)("div",{className:"sm:hidden",children:(0,d.jsx)(H.Lt,{trigger:(0,d.jsx)(U.z,{variant:"ghost",append:(0,d.jsx)(B.p,{}),className:"w-full !border !border-border-300",children:(0,d.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:eN[u].label})}),children:Object.keys(eN).map(e=>(0,d.jsx)(H.hP,{onSelect:()=>C(e),children:(0,d.jsx)("div",{className:"flex items-center gap-1",children:eN[e].label})},e))})})]}),(0,d.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,d.jsx)(U.z,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>n(a.CREATE),prepend:(0,d.jsx)(ey.D,{}),children:"Nevermind, I’ll add an example"})})]}),(0,d.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),g()},children:[(0,d.jsx)("p",{className:"pt-0 p-1 text-text-300 font-tiempos max-sm:text-sm",children:eN[u].description}),(0,d.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,d.jsx)("textarea",{ref:x,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:eN[u].placeholder,value:o,required:!0,onChange:e=>c(e.target.value)}),(0,d.jsx)(T.M,{children:o.length>0&&!f&&(0,d.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:"Be as descriptive as possible to help Claude generate the best possible style for you"})})]}),(0,d.jsx)(j.u,{tooltipContent:f?"":"More description needed in order to generate style",side:"bottom",className:"text-center",children:(0,d.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,d.jsx)(U.z,{className:"w-full",type:"submit",loading:i,disabled:!f,children:"custom"===u?"Create Style":"Generate Style"})})})]})]})});ek.displayName="CreateStyleManually";var e_=n(7654),eS=n(73240),eE=n(43205),ez=n(80498),eL=n(61641),eD=n(1119),eT=n(958),eF=n(70452),eR=n(93914),eO=n(48644);function eA(e){return"default"===e.type?e.key:e.uuid}var eP=n(79373),eM=n(20504);function eI(){let[e,t,n,r]=(0,eM.Rr)("userHiddenStyles",[]),s=(0,F.useCallback)(e=>{let n=eA(e);t(e=>[...e,n])},[t]),i=(0,F.useCallback)(()=>{t([])},[t]),a=(0,F.useCallback)(t=>t.filter(t=>{let n=eA(t);return!e.includes(n)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:s,resetHiddenPresetStyles:i,filterHiddenStyles:a,refreshHiddenStyles:r}}(s=l||(l={})).VIEW="view",s.EDIT="edit",s.EDIT_MANUALLY="edit_manually";let eU=()=>{let{config:e}=(0,eO.useConfig)("claude_style_previews");return e.get("previewExamples",[])},eH=e=>{let{isSaveButton:t,children:n}=e;return(0,d.jsx)("div",{className:(0,D.Z)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:n})},eG=(0,F.forwardRef)((e,t)=>{let{animateBoolRef:n,style:r,setCurrentStyle:s,returnToListScreen:i,setChatStyle:a,setIsEditing:l,setIsEditingName:o}=e,c=eA(r),u="default"===r.type,[m,p]=(0,F.useState)("view"),{mutateAsync:h}=(0,et.fq)(c,u),{handleRateLimitError:x}=eo(),f=async e=>{let{prompt:t,editInput:n}=e;try{let e=await h({prompt:t,edit_instructions:n});e&&s(e)}catch(e){throw x(e,"Failed to edit style. Please try again."),Error}},g=e=>{l("edit"===e||"edit_manually"===e),p(e)};return(0,d.jsxs)(Y.E.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===m&&(0,d.jsxs)(eH,{children:[(0,d.jsx)(U.z,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>a(r),children:"Use Style"}),(0,d.jsx)(e$,{style:r,returnToListScreen:i,onRename:()=>o(!0),setStateToManualEdit:()=>g("edit_manually")})]}),(0,d.jsxs)(Y.E.div,{className:"min-h-0",initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===m&&(0,d.jsx)(eB,{style:r,onClick:()=>g("edit")}),"edit"===m&&(0,d.jsx)(eZ,{style:r,updateStyle:f,onClose:()=>g("view")}),"edit_manually"===m&&(0,d.jsx)(eV,{style:r,updateStyle:f,onClose:()=>g("view")})]}),(0,d.jsx)(eK,{style:r,animateBoolRef:n})]})});eG.displayName="EditStyle";let eZ=e=>{let{style:t,updateStyle:n,onClose:r}=e,s=(0,F.useRef)(t.prompt),i=(0,F.useRef)(null),[a,l]=(0,F.useState)(!1),[o,c]=(0,F.useState)(!1),[u,m]=(0,F.useState)([]),[p,h]=(0,F.useState)(""),x=async e=>{if(e.preventDefault(),a||o)return!1;await f(p)},f=async e=>{h(""),l(!0),m([...u,e]);try{await n({editInput:e})}catch(e){h(p),m(e=>e.slice(0,-1))}l(!1)},g=async()=>{u.length&&(c(!0),await n({prompt:s.current}),c(!1)),r()},C=(0,F.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),n=e+1<t.attributes.length?e+1:e-1;return["A bit more "+t.attributes[e].name.toLowerCase(),"Much less "+t.attributes[n].name.toLowerCase()]},[t.attributes]);return(0,F.useEffect)(()=>{if(u.length>0){var e;null===(e=i.current)||void 0===e||e.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})}},[u,t.summary]),(0,d.jsxs)("div",{className:"h-full flex flex-col",children:[(0,d.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,d.jsxs)("div",{className:(0,D.Z)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",a?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,d.jsx)("div",{className:(0,D.Z)("font-tiempos font-normal text-pretty leading-snug tracking-tight text-text-200 transition",a?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,d.jsx)(T.M,{children:a&&(0,d.jsx)(Y.E.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,d.jsx)(eS.p,{state:"thinking"})})})]}),(0,d.jsx)("ul",{ref:i,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:u.map(e=>(0,d.jsx)("li",{children:(0,d.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),u.length>0?(0,d.jsx)("div",{className:"text-sm text-center text-text-500",children:"Ask for more edits, save, or discard changes"}):(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("div",{className:"text-sm text-text-500 mb-2",children:"Describe how you'd like to edit the style, like:"}),(0,d.jsx)("ul",{className:"flex flex-col gap-2",children:C.map(e=>(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:t=>{t.preventDefault(),f(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},e))})]}),(0,d.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>x(e),children:(0,d.jsx)(J.oi,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:"Ask Claude to edit the style...",size:"lg",value:p,onChange:e=>h(e.target.value),append:(0,d.jsx)(T.M,{children:p.length>0&&(0,d.jsx)(Y.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,d.jsx)(U.z,{type:"submit",size:"icon_sm",variant:"flat",disabled:a||o,children:(0,d.jsx)(eE.a,{})})})})})})]}),(0,d.jsxs)(eH,{isSaveButton:!0,children:[(0,d.jsx)(U.z,{onClick:r,disabled:a||o||p.length>0||0===u.length,children:"Save Changes"}),(0,d.jsx)(U.z,{onClick:g,disabled:a,loading:o,variant:"secondary",children:u.length>0?"Discard":"取消"})]})]})},eV=e=>{let{style:t,updateStyle:n,onClose:r}=e,[s,i]=(0,F.useState)(!1),[a,l]=(0,F.useState)(t.prompt),o=async e=>{e.preventDefault(),i(!0),await n({prompt:a}),i(!1),r()};return(0,d.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>o(e),children:[(0,d.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:"Edit style instructions manually"}),(0,d.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:"Describe your style instructions",value:a,disabled:s,onChange:e=>l(e.target.value),autoFocus:!0}),(0,d.jsxs)(eH,{isSaveButton:!0,children:[(0,d.jsx)(U.z,{type:"submit",loading:s,children:"Save Changes"}),(0,d.jsx)(U.z,{onClick:()=>{l(t.prompt),r()},disabled:s,variant:"secondary",children:"取消"})]})]})},eB=e=>{let{style:t,onClick:n}=e,r="default"===t.type;return(0,d.jsxs)("div",{className:(0,D.Z)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!r&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",r&&"bg-bg-300 border border-border-300"),children:[(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsx)("div",{className:(0,D.Z)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",r?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:r?"Preset style":"Your custom style"})}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!r&&(0,d.jsx)(j.u,{className:"text-center",tooltipContent:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",children:(0,d.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Style summary"}),(0,d.jsx)($.k,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,d.jsx)("div",{"data-testid":"style-summary",className:"font-tiempos text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:t.summary})]}),(0,d.jsx)("div",{className:"flex-1 flex items-center text-sm",children:r?"Preset styles are not editable":(0,d.jsx)(U.z,{variant:"outline",onClick:n,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,d.jsx)(eF.A,{weight:"bold"}),children:"Edit with Claude"})})]})},eK=e=>{let{style:t,animateBoolRef:n}=e,[r,s]=(0,F.useState)(""),[i,a]=(0,F.useState)(),l=(0,F.useRef)(t.prompt),o=(0,F.useRef)(i),c=eU(),{handleRateLimitError:u}=eo(),{isLoading:m,mutateAsync:p}=(0,et.HK)(),h=(0,F.useCallback)(async()=>{if(i)try{let e=await p({style_prompt:t.prompt,example_key:i.key});s(e)}catch(e){u(e,"Failed to preview style. Please try again.")}},[u,p,i,t.prompt]);return(0,F.useEffect)(()=>{var e;(l.current!==t.prompt||(null===(e=o.current)||void 0===e?void 0:e.key)!==(null==i?void 0:i.key))&&(l.current=t.prompt,o.current=i,h())},[h,i,t.prompt]),(0,d.jsx)(Y.E.div,{className:(0,D.Z)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",i?"bg-bg-000/70":"bg-bg-000/20"),initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:i?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:["Previewing with",(0,d.jsx)(H.Lt,{align:"center",trigger:(0,d.jsx)(U.z,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,d.jsx)(eR.p,{className:"translate-y-px"}),children:i?i.name:"Example"}),children:c.map(e=>(0,d.jsx)(H.hP,{disabled:m,onClick:()=>a(e),children:e.name},e.key))})]}),(0,d.jsxs)(y.$,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,d.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:i.text}),(0,d.jsx)(T.M,{children:m?(0,d.jsx)("div",{className:"pt-2",children:(0,d.jsx)(eS.p,{state:"writing"})}):(0,d.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,d.jsx)(e_.ux,{className:"font-tiempos flex-1 flex flex-col gap-2",text:r})})})]})]}):(0,d.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:"Preview with an example..."}),(0,d.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:c.map(e=>(0,d.jsx)("button",{onClick:()=>a(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-black/0\n                    to-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.name},e.key))})]})})})},e$=e=>{let{style:t,returnToListScreen:n,onRename:r,setStateToManualEdit:s}=e,i=eA(t),a="default"===t.type,{isLoading:l,mutateAsync:o}=(0,et.KM)(i),{addHiddenPresetStyle:c}=eI(),{clearStoredStyle:u,storedStyle:m}=(0,eP.O)(),{addError:p}=(0,g.e)(),h=async()=>{if(a)c(t),setTimeout(()=>{n()},500);else try{await o(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),n()}catch(e){p("Failed to delete style. Please try again.")}};return(0,d.jsxs)(H.Lt,{className:"z-50",align:"end",unstyledTrigger:!0,trigger:(0,d.jsxs)(U.z,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,d.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:["Options ",(0,d.jsx)(eR.p,{})]}),(0,d.jsx)("span",{className:"sm:hidden",children:(0,d.jsx)(ez.F,{weight:"bold",size:20})})]}),children:[!a&&(0,d.jsx)(H.hP,{disabled:l,onClick:()=>{r()},children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(eL.z,{className:"mr-2"}),(0,d.jsx)("span",{children:"Rename Style"})]})}),"Concise"===i?(0,d.jsx)(H.AZ,{className:"text-sm",children:"Concise style can’t be hidden"}):(0,d.jsx)(H.hP,{className:"pr-0 !text-danger-000",disabled:l,onClick:h,children:a?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(eD.M,{}),"Hide preset style"]}):(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(eT.r,{}),"Delete style"]})}),!a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(H.u2,{}),(0,d.jsx)(H.hP,{onClick:s,children:"Edit style manually"})]})]})};var eY=n(71473),eW=n(44155),eq=n(66829),eJ=n(5989);function eX(){let[e,t,n,r]=(0,eM.Rr)("userStylesOrder",[]);return{sortStyles:(0,F.useCallback)(t=>[...t].sort((t,n)=>{let r=eA(t),s=eA(n);if("默认"===r)return -1;if("默认"===s)return 1;let i=e.indexOf(r),a=e.indexOf(s);return -1===i&&-1===a?0:-1===i?1:-1===a?-1:i-a}),[e]),stylesOrder:e,setOrder:(0,F.useCallback)(e=>{t(e.map(e=>eA(e)))},[t]),refreshOrder:r}}let eQ=(0,F.forwardRef)((e,t)=>{let{setScreen:n,styles:r,onStyleChange:s}=e,{hiddenPresetStyles:i,resetHiddenPresetStyles:l}=eI(),{sortStyles:o,setOrder:c}=eX(),[u,m]=(0,F.useState)([]),p=(0,F.useCallback)(e=>{let t=[...i,"默认"];return o(e.filter(e=>!t.includes(eA(e))))},[i,o]);(0,F.useEffect)(()=>{m(p(r))},[r,p]);let h=(0,F.useCallback)(e=>{Array.isArray(e)&&(m(e),c(e))},[c]),x=(0,F.useMemo)(()=>r.some(e=>"custom"===e.type),[r]);return(0,d.jsxs)(Y.E.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,d.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,d.jsx)(eq.t.Group,{as:"ul",axis:"y",values:u,onReorder:h,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,rgba(0,0,0,0)_0%,_rgba(0,0,0,1)_3%)]",children:u.map(e=>(0,d.jsx)(e0,{style:e,onClick:()=>s(e,!1)},eA(e)))}),!x&&(0,d.jsxs)(Y.E.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,d.jsx)("div",{className:"font-copernicus font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:"Tip"}),(0,d.jsxs)("p",{children:["Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more."," ",(0,d.jsx)("a",{href:"https://support.anthropic.com/en/articles/10185698-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:"Learn about styles"})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,d.jsx)(U.z,{onClick:()=>n(a.CREATE),prepend:(0,d.jsx)(V,{}),children:"Create Custom Style"}),i.length>0&&(0,d.jsx)(U.z,{variant:"underline",onClick:l,children:"Reset preset styles"})]})]})});eQ.displayName="ListStyles";let e0=e=>{let{style:t,onClick:n}=e,r="default"===t.type,s=(0,eJ.o)(),[i,a]=(0,F.useState)(!1);return(0,d.jsxs)(eq.t.Item,{value:t,dragListener:!1,dragControls:s,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>a(!0),onDragEnd:()=>a(!1),className:"relative my-2 min-w-0",children:[(0,d.jsxs)("button",{className:(0,D.Z)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",i?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:n,children:[(0,d.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:t.name}),r&&(0,d.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:"Preset"}),(0,d.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:r?(0,d.jsx)(eY.o,{}):(0,d.jsx)(eL.z,{})})]}),(0,d.jsx)("div",{onPointerDown:e=>s.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,d.jsx)(eW.f,{size:16,weight:"bold"})})]})},e1=e=>{let{openWithScreen:t,onClose:n,styles:r,setChatStyle:s}=e,i=!!t,l=(0,I.z$)(),[o,c]=(0,F.useState)(t||a.LIST),[u,m]=(0,F.useState)(),[p,h]=(0,F.useState)(!1),[x,f]=(0,F.useState)(!1),g=(0,F.useRef)(!1);(0,F.useEffect)(()=>{t&&c(t)},[t]);let C=()=>{g.current=!1,c(a.LIST),h(!1),f(!1)},v=()=>{(!p||window.confirm("Are you sure? Closing while editing may not syncronize changes."))&&(l.track({event_key:"styles.modal",open:!1}),C(),n())},y=(e,t)=>{g.current=t,m(e),c(a.EDIT),h(!1),f(!1)};return(0,d.jsx)(b.u_,{modalSize:"xl",title:(e=>{switch(e){case a.CREATE:return(0,d.jsx)("div",{className:"font-copernicus font-normal",children:"Create a style"});case a.CREATE_MANUALLY:return(0,d.jsx)("div",{className:"font-copernicus font-normal",children:"Describe your style"});case a.LIST:return(0,d.jsx)("div",{className:"font-copernicus font-normal",children:"Customize your styles"});case a.EDIT:return(0,d.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:x?(0,d.jsx)(e2,{style:u,onClose:e=>{e&&m(e),f(!1)}}):(0,d.jsxs)("button",{title:u.name,className:"w-full font-copernicus font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!p&&f(!0),children:[p?"Edit ":"",u.name]})})}})(o),icon:(e=>{switch(e){case a.CREATE:case a.EDIT:return(0,d.jsx)(U.z,{variant:"ghost",size:"icon_sm",disabled:p,onClick:()=>C(),children:(0,d.jsx)(X.X,{})});case a.CREATE_MANUALLY:return(0,d.jsx)(U.z,{variant:"ghost",size:"icon_sm",onClick:()=>c(a.CREATE),children:(0,d.jsx)(X.X,{})});case a.LIST:return null}})(o),isOpen:i,onClose:v,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,d.jsx)(d.Fragment,{children:o===a.LIST&&(0,d.jsx)(j.u,{tooltipContent:"了解更多about styles ↗",children:(0,d.jsx)("div",{className:"mr-1",children:(0,d.jsx)(U.z,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,d.jsx)(Q.H,{size:18})})})})}),hasCloseButton:!0,children:(0,d.jsxs)(T.M,{mode:"popLayout",children:[o===a.CREATE&&(0,d.jsx)(eg,{onStyleChange:y,setScreen:c,animateBoolRef:g},"CreateStyleScreen"),o===a.CREATE_MANUALLY&&(0,d.jsx)(ek,{onStyleChange:y,setScreen:c},"CreateStyleManuallyScreen"),o===a.LIST&&(0,d.jsx)(eQ,{setScreen:c,styles:r,onStyleChange:y},"ListStylesScreen"),o===a.EDIT&&u&&(0,d.jsx)(eG,{animateBoolRef:g,style:u,returnToListScreen:C,setIsEditingName:f,setCurrentStyle:m,setIsEditing:h,setChatStyle:e=>{s(e),v()}},"EditStyleScreen")]})})},e2=e=>{let{style:t,onClose:n}=e,r=eA(t),s="default"===t.type,[i,a]=(0,F.useState)(t.name),{isLoading:l,mutateAsync:o}=(0,et.fq)(r,s),c=async()=>{n(await o({name:i}))};return(0,d.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await c()},children:(0,d.jsx)(J.oi,{autoFocus:!0,className:"w-full text-base font-styrene font-normal",value:i,maxLength:64,onChange:e=>a(e.target.value),error:0===i.length,append:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(U.z,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>n(),disabled:l,children:(0,d.jsx)(ee.X,{})}),(0,d.jsx)(U.z,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:l,children:(0,d.jsx)(K.J,{weight:"bold"})})]})})})},e3={FROM_ANCHOR:8,POINTER_OFFSET:18,POINTER_HEIGHT:16},e5=e=>{let{anchorRef:t,children:n,side:r,align:s="center",accentColor:i="default",onClose:a,className:l,introDelay:o=0}=e,c=(0,F.useRef)(null),[u,m]=(0,F.useState)(r),[p,h]=(0,F.useState)(s);(0,F.useEffect)(()=>{if(!c.current||!t.current)return;let e=()=>{let{current:e}=c,{current:n}=t;if(!e||!n)return;let r=n.getBoundingClientRect(),s=e.getBoundingClientRect(),i=window.innerWidth,a=window.innerHeight,l=u,o=p,d=0,x=0,f=()=>{d="top"===l?r.top-s.height-e3.FROM_ANCHOR:"bottom"===l?r.bottom+e3.FROM_ANCHOR:r.top-e3.POINTER_OFFSET+.5*r.height-.5*e3.POINTER_HEIGHT},g=()=>{if("left"===l)x=r.left-s.width-e3.FROM_ANCHOR;else if("right"===l)x=r.right+e3.FROM_ANCHOR;else switch(o){case"start":x=r.left-e3.FROM_ANCHOR;break;case"center":x=r.left+(r.width-s.width)/2;break;case"end":x=r.right-s.width+e3.FROM_ANCHOR}};f(),g(),x<0?"top"===l||"bottom"===l?o="start":l="bottom":x+s.width>i&&("top"===l||"bottom"===l?o="end":l="bottom"),d<0?l="bottom":d+s.height>a&&(l="top"),f(),g(),e.style.top="".concat(d,"px"),e.style.left="".concat(x,"px"),l!==u&&m(l),o!==p&&h(o)};e();let n=new ResizeObserver(e);t.current&&(n.observe(t.current),t.current.parentElement&&n.observe(t.current.parentElement));let r=e=>{if(a){var t;(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))||a()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",r),()=>{n.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",r)}},[u,p,t,a]);let x={};switch(u){case"right":x={translateX:-e3.FROM_ANCHOR,opacity:0};break;case"left":x={translateX:e3.FROM_ANCHOR,opacity:0};break;case"bottom":x={translateY:-e3.FROM_ANCHOR,opacity:0};break;case"top":x={translateY:e3.FROM_ANCHOR,opacity:0}}return(0,d.jsxs)(Y.E.div,{ref:c,initial:x,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:o,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,D.Z)("fixed z-50 rounded-xl pl-4 pt-3.5 pb-4 border-0.5 shadow-sm max-w-72",a?"pr-10":"pr-4","default"===i&&"bg-bg-200 border-border-300","secondary"===i&&"text-accent-secondary-000 bg-bg-100 bg-gradient-to-b from-accent-secondary-900/40 via-30% via-accent-secondary-900 to-accent-secondary-900/60 border-accent-secondary-100/50","pro"===i&&"text-accent-pro-000 bg-bg-100 bg-gradient-to-b from-accent-pro-900/60 via-30% via-accent-pro-900 to-accent-pro-900/50 border-accent-pro-100/50",l),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,d.jsx)(e4,{side:u,align:p,accentColor:i}),a&&(0,d.jsx)(U.z,{variant:"ghost",size:"icon_xs",className:"!absolute hover:bg-black/5 active:bg-black/10 top-1.5 right-1.5 z-10",onClick:a,children:(0,d.jsx)(ee.X,{size:16})}),n]})},e4=e=>{let{accentColor:t,side:n,align:r}=e,s="fill-bg-200",i="fill-border-300";"secondary"===t&&(s="fill-accent-secondary-900",i="fill-accent-secondary-100/50"),"pro"===t&&(s="fill-accent-pro-900",i="fill-accent-pro-100/50");let a={};switch(n){case"top":a={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":a={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":a={top:e3.POINTER_OFFSET};break;case"left":a={top:e3.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===n||"bottom"===n)switch(r){case"start":a.left=e3.POINTER_OFFSET;break;case"end":a.left="auto",a.right=e3.POINTER_OFFSET}return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:e3.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,D.Z)("absolute origin-center pointer-events-none","right"===n&&"right-full"),style:a,children:[(0,d.jsx)("path",{className:s,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,d.jsx)("path",{className:i,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})};(i=o||(o={}))[i.HIGH=30]="HIGH",i[i.MEDIUM=20]="MEDIUM",i[i.LOW=10]="LOW",i[i.NONE=0]="NONE";var e6=n(17792),e8=n(61461);let e7=e=>{let{onClickCreate:t,anchorRef:n}=e,{shouldShow:r,dismiss:s}=function(e,t){let{dateAdded:n,priority:r,showAfterOthersDismiss:s}=t,i=(0,F.useContext)(e8.s),{dismiss:a,isDismissed:l}=(0,e6.K)();if(!i)throw Error("useNux must be used within a NuxProvider");let{registerNux:o,unregisterNux:c,currentlyShowing:d}=i;return(0,F.useEffect)(()=>{if(!l(e))return o(e,{dateAdded:n,priority:r,showAfterOthersDismiss:s}),()=>c(e)},[e,n,r,s,l,o,c]),{shouldShow:d===e,dismiss:()=>{a(e),c(e)}}}("styles-dropdown-intro-5",{dateAdded:"2024-11-14",priority:o.HIGH,showAfterOthersDismiss:!0});return r?(0,d.jsxs)(e5,{side:"right",anchorRef:n,onClose:s,accentColor:"pro",introDelay:.5,children:[(0,d.jsxs)("p",{className:"font-tiempos tracking-tight font-medium leading-snug pr-1",children:["Tailor Claude’s writing with",(0,d.jsx)("br",{}),"preset or custom styles"]}),(0,d.jsx)("div",{className:"flex items-center gap-3 mt-2.5",children:(0,d.jsx)(U.z,{variant:"outline",className:"!gap-0 !text-sm !text-accent-pro-000 !border-accent-pro-100/30 !rounded-lg hover:!bg-accent-pro-100 hover:!text-oncolor-100 !px-3",onClick:t,prepend:(0,d.jsx)(V,{className:"mr-1.5 w-5 h-5"}),children:"Create Your Style"})})]}):null};var e9=n(50987);let te=e=>{let{personalizedStyle:t,onSelect:n,placement:r,isFirstMessage:s}=e,i=(0,F.useRef)(null),l=(0,I.z$)(),{value:o}=(0,_.F)("claudeai_custom_styles"),{value:c}=(0,_.F)("claude_ai_cayenne"),{data:u}=(0,q.by)(),[m,p]=(0,F.useState)(null),[h,x]=(0,F.useState)(!1),{sortStyles:f,refreshOrder:g}=eX(),{filterHiddenStyles:C,refreshHiddenStyles:v}=eI(),{personalizedStyleOptions:b,setStoredStyle:w,defaultStyle:N,conciseModeEnabled:k}=(0,eP.O)(),[S,E]=(0,F.useState)();(0,F.useEffect)(()=>{g(),v()},[m]);let z=f(C(b));if(!b.length)return null;let L=t&&eA(t),R=b.find(e=>L&&(0,eP.g)(e,L))||N;if(!R)return null;let O="默认"===eA(R)&&R.isDefault,A=e=>{n(e);let t=eA(e);w({styleKey:t,timestamp:new Date}),l.track({event_key:"styles.selected",style_key:t})},P=c&&s&&(null==u?void 0:u.conversation_preferences);return(0,d.jsxs)("div",{className:"flex items-center min-w-0 max-w-full",children:[(0,d.jsx)(e1,{openWithScreen:m,onClose:()=>p(null),styles:b,setChatStyle:A}),(0,d.jsx)(T.M,{children:o&&s&&"onpage"===r&&(0,d.jsx)(e7,{anchorRef:i,onClickCreate:()=>{setTimeout(()=>{p(a.CREATE)},50),l.track({event_key:"styles.nux.create_clicked"})}})}),(0,d.jsxs)(H.Lt,{className:(0,D.Z)("!bg-bg-200 !rounded-xl w-64 sm:w-[28rem]","modal"===r?"!z-50":"!z-30"),align:"center",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:h,onOpenChange:e=>{x(e),l.track({event_key:"styles.selector.clicked",open:e})},trigger:(0,d.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},className:"min-w-24",children:(0,d.jsx)(U.z,{ref:i,variant:"unstyled",size:"unset","data-testid":"style-selector-dropdown",className:(0,D.Z)("max-w-full min-w-0 pl-1.5 pr-1 h-7 ml-0.5 mr-1 hover:bg-bg-200 hover:border-border-400 border-0.5 text-sm rounded-md border-transparent transition",O?"text-text-500 hover:text-text-200":"text-accent-secondary-000"),children:(0,d.jsx)(j.u,{tooltipContent:k&&"Due to high demand, a concise response option is available to ensure more messages & faster service. You can switch back to full responses if preferred.",side:"bottom",delayDuration:500,children:(0,d.jsxs)("div",{className:"inline-flex items-center min-w-0",children:[(0,d.jsx)(Z,{className:"mr-1 -translate-y-px"}),(0,d.jsx)("span",{className:"flex-1 truncate -translate-y-px font-tiempos mr-px",children:O?"Choose style":R.name}),(0,d.jsx)(B.p,{size:12,className:"text-text-500/80 ml-1 shrink-0"})]})})})}),children:[(0,d.jsxs)("div",{className:"sm:flex justify-between items-center flex-1 text-xs font-medium text-text-300 px-1.5 pt-1 pb-1.5 min-h-5",children:[(0,d.jsx)("div",{className:"translate-y-[0.5px]",children:"How should Claude write responses?"}),P&&(0,d.jsx)(tt,{})]}),(0,d.jsxs)("div",{className:"grid sm:grid-cols-2 mt-0.5 pb-1 px-1",children:[(0,d.jsxs)("div",{className:"min-h-0",children:[(0,d.jsx)(y.$,{className:"pr-1 sm:mr-1 pb-1 min-h-40 max-h-64",children:z.map(e=>(0,d.jsx)(H.hP,{onClick:()=>A(e),className:(0,D.Z)("pr-0 mb-0.5 line-clamp-2 leading-tight",eA(R)===eA(e)&&"bg-bg-300"),onFocus:()=>E(e),onMouseEnter:()=>E(e),onMouseLeave:()=>E(void 0),children:(0,d.jsxs)("div",{className:"flex items-center justfy-between",children:[(0,d.jsx)("div",{className:"flex-1 text-wrap line-clamp-2",children:e.name}),eA(R)===eA(e)&&(0,d.jsx)(K.J,{className:"text-accent-secondary-200 mb-0.5 mr-0.5",size:20,weight:"bold"})]})},eA(e)))}),o&&(0,d.jsx)(H.hP,{"data-testid":"style-selector-open-modal",className:"bg-transparent border border-border-300 hover:!bg-accent-main-100 hover:!text-oncolor-100 hover:!border-transparent transition mr-1 sm:mr-3 ml-1 mb-1 mt-1 !rounded-lg text-center text-sm font-medium",onClick:()=>{x(!1),p(a.LIST),l.track({event_key:"styles.modal",open:!0})},children:"Create & Edit Styles"},"create-and-edit")]}),(0,d.jsx)("div",{className:"flex flex-col",children:(0,d.jsx)("div",{className:(0,D.Z)("flex-1 mr-1 mb-1 text-wrap py-3 px-3.5 gap-2.5 rounded-lg border-0.5 transition max-sm:hidden",(null==S?void 0:S.type)!=="custom"&&(S||"custom"!==R.type)?"bg-bg-100/40 border-border-300":"border-accent-secondary-100/50 bg-gradient-to-b from-accent-secondary-900/60 to-accent-secondary-900/30"),children:(0,d.jsx)(Y.E.div,{className:"font-tiempos text-[0.9375rem] leading-snug",initial:{opacity:0,filter:"blur(0.5px)"},animate:{opacity:1,filter:"blur(0px)",transition:{ease:"easeOut",duration:.5,opacity:{duration:.25}}},exit:{opacity:0,transition:{duration:.05}},children:(null==S?void 0:S.summary)||R.summary},eA(S||R))})})]}),k&&(0,d.jsxs)("div",{className:"text-xs px-2 py-1.5 mx-1 mt-2 mb-1.5 border border-accent-secondary-200/50 rounded-md flex",children:[(0,d.jsx)($.k,{size:20,className:"shrink-0 mr-2 opacity-80"}),"We’re experiencing high demand. Choosing Concise responses will help you chat more with Claude."]})]})]})},tt=()=>{let{includeProfilePreferences:e,setIncludeProfilePreferences:t}=(0,e9.r)();return(0,d.jsxs)("label",{className:"inline-flex mt-0.5 font-normal gap-1.5 items-center text-xs text-text-400",children:[(0,d.jsxs)("span",{className:"-translate-y-[0.5px]",children:["Include"," ",(0,d.jsx)(W.default,{href:"/settings/profile",className:"underline underline-offset-2 transition-colors hover:text-text-000",children:"preferences"})]}),(0,d.jsx)(G.Z,{checked:e,onChange:()=>t(!e)})]})};var tn=n(41911),tr=n(2282),ts=n(71854),ti=n(31702),ta=n(6273),tl=n(57362);let to=e=>{let t=(0,M.nR)(e),n=(0,M.mo)();return void 0!==t&&t>n};var tc=n(64969);let td="sonnet_hint_dismissed_until";var tu=n(64997),tm=n(92973),tp=n(90345),th=n.n(tp),tx=n(67754);function tf(e){let{onDismiss:t}=e,n=(0,tm.K)(),r=(0,tx.useRouter)();(0,F.useEffect)(()=>{n.track("chat.conversation.too_long_prompt_warning:loaded").catch(th())},[n]);let s=(0,F.useCallback)(()=>{n.track("chat.conversation.too_long_prompt_warning:accepted").catch(th()),r.push("/chats")},[n,r]),i=(0,F.useCallback)(()=>{n.track("chat.conversation.too_long_prompt_warning:dismissed").catch(th()),t()},[n,t]);return(0,d.jsx)(tu.A,{children:(0,d.jsxs)("div",{className:"text-text-200 flex w-full items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("b",{children:"提示："}),(0,d.jsx)("span",{children:"长对话会导致你更快达到你的用量限制，请尽量使用短对话。"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{className:"text-accent-pro-000 font-medium hover:underline",onClick:s,children:"开启一个新的对话"})," ",(0,d.jsx)(U.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:i,children:(0,d.jsx)(ti.X,{size:12})})]})]})})}var tg=n(75706);function tC(){let e=(0,ed.cs)();return(0,d.jsxs)(tg.P,{actionButton:null,title:"Team plan canceled",children:["You can no longer chat with Claude.",e&&(0,d.jsxs)(d.Fragment,{children:[" ","To restore full access,"," ",(0,d.jsx)(W.default,{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:"renew your subscription"}),"."]})]})}var tv=n(82542),tb=n(2554);let tj=()=>{let e=(0,tv.F)(tb.n,{allowSelfUpgrade:!1});return(0,d.jsxs)(tg.P,{actionButton:e,children:["Due to capacity constraints, chatting with Claude is currently not"," ","available. Please try again\xa0shortly."]})};var ty=n(85047),tw=n(24550),tN=n(91237),tk=n(93124),t_=n(48970);function tS(e){let{isOpen:t,setIsOpen:n,files:r,isNewConversation:s}=e,i=(0,tN.Z)();return(0,d.jsxs)(b.u_,{isOpen:t,hasCloseButton:!0,title:i.formatMessage({defaultMessage:"Analysis Tool Required",id:"Cp9J2U"}),onClose:()=>n(!1),children:[(0,d.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,d.jsx)("div",{children:(0,d.jsx)(tk.Z,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKt"})}),(0,d.jsx)("ul",{className:"list-disc pl-4",children:r.map(e=>(0,d.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,d.jsx)("div",{children:s?i.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTi"}):i.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8"})})]}),(0,d.jsx)(b.dm,{layout:"right",children:(0,d.jsx)(b.mH,{type:"button",size:"lg",onClick:()=>n(!1),children:(0,d.jsx)(tk.Z,{defaultMessage:"OK",id:"kAEQyV"})})})]})}function tE(e){let{files:t,isNewConversation:n}=e,[r,s]=(0,F.useState)(!1),{track:i}=(0,I.z$)(),{openModal:a}=(0,C.h)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tS,{isOpen:r,setIsOpen:s,isNewConversation:n,files:t}),(0,d.jsx)(tu.A,{children:(0,d.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,d.jsx)("div",{children:(0,d.jsx)(tk.Z,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this converstion",id:"rmV7oB",values:{a:e=>(0,d.jsx)("a",{className:"underline",href:"#",onClick:()=>s(!0),children:e})}})}),(0,d.jsx)("div",{children:(0,d.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{i({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),a()},children:(0,d.jsx)(tk.Z,{defaultMessage:"Enable analysis tool",id:"UDUWEA"})})})]})})]})}var tz=n(27920),tL=n(20126),tD=n(79442);let tT=e=>{let{config:t}=(0,eO.useConfig)("claude_ai_system_alerts"),n=t.get("alert",null),[r,s]=(0,eM.Rr)("".concat(e,":").concat(null==n?void 0:n.id,":hideAlertOnConversation"),!1),i=null==n?void 0:n.alertForModels,a=(0,tz.wN)(e);return e&&(!i||i.includes(a))&&n&&!r?{systemAlertFromConfig:{alert:n,component:(0,d.jsx)(tF,{alert:n,setHideAlert:s})}}:{}},tF=e=>{let{alert:t,setHideAlert:n}=e,r=(0,ed.w7)(),s=(0,tv.F)(tD.r);return(0,d.jsxs)(tu.A,{children:[(0,d.jsx)(e_.J$,{children:(0,d.jsx)(tL.U,{children:t.bodyMd})}),r&&t.proUpsell&&s,t.isDismissable&&(0,d.jsx)(U.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>n(!0),children:(0,d.jsx)(ee.X,{size:12})})]})};var tR=n(91014),tO=n(77611);let tA=e=>Math.min(1600,Math.ceil(e.preview_asset.image_width*e.preview_asset.image_height/700)),tP=e=>e.reduce((e,t)=>e+tA(t),0),tM=(e,t,n)=>{let r=(0,tO.c)(e),s=(0,F.useMemo)(()=>n.map(e=>e.extracted_content).join(" "),[n]);return r+(0,tO.c)(s)+tP(t)},tI=(e,t)=>e/t>.4,tU=e=>{let t=tI(e.projectKnowledgebaseTokens,e.maxConversationTokens),n=(0,tR.$H)("push");return(0,d.jsxs)(tg.P,{actionButton:(0,d.jsx)(tb.n,{onClick:n,children:"Start a new conversation"}),children:["This conversation reached its"," ",(0,d.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:ts.jC,children:"maximum length"}),".",t?" You may want to remove some files from your project's knowledge base.":""]})};var tH=n(78011),tG=n(65899);let tZ=e=>{let{conversationUUID:t,conversationTokensSoFar:n,conversationFiles:r,projectKnowledgebaseTokens:s,input:i,attachments:a,syncSourceUuids:l}=e;s=null!=s?s:0;let o=r.filter(e=>e.file_kind===tw.Y.Image),c=n+tP(o)+s,d=tM(i,o,a),u=c+d+(0,O.fg)(l),m=(0,tG.e)(t),p=null;return c>m?p="exceeded":u>m&&(p="will-exceed"),[p,{conversationTokens:c,msgTokens:d,totalTokens:u,maxConversationTokens:m}]},tV=e=>{let t;let n=(0,tR.$H)("push"),{tokenTotals:r,numAttachments:s,projectKnowledgebaseTokens:i}=e,{conversationTokens:a,msgTokens:l,totalTokens:o,maxConversationTokens:c}=r,u=tI(a,c),m=o/c-1,p=(0,S._6)(s,"file");return t=s&&u?"Try replacing the attached ".concat(p," with smaller excerpts or removing files from your project's knowledge base."):s?"Try replacing the attached ".concat(p," with smaller excerpts."):u?"Try removing files from your project's knowledge base.":"Try shortening your message.",(0,d.jsx)(tu.A,{children:(0,d.jsxs)("span",{children:["Conversation is ",Math.ceil(100*m),"% over the"," ",(0,d.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:ts.jC,children:"长度限制"}),"."," "+t+" ",l+(null!=i?i:0)<c&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)("a",{className:"underline",href:"#",onClick:n,children:"Start a new conversation?"})]})]})})},tB="claude-3-5-sonnet-20241022",tK=e=>{let{switchToSonnet:t,dismissOpusHint:n,copyText:r}=e;return(0,d.jsx)(tu.A,{children:(0,d.jsxs)("div",{className:"text-text-200 flex w-full items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center gap-1",children:r}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{className:"text-accent-pro-000 font-medium hover:underline",onClick:t,children:"Chat with Sonnet"})," ",n&&(0,d.jsx)(U.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:n,children:(0,d.jsx)(ti.X,{size:12})})]})]})})},t$=e=>{var t,n,r,s,i,a,l,o,c,u,m,h,x,g,C,v,b,j;let{placement:y}=e,{prompt:w,model:N,setModel:k,attachments:_,conversation:S,projectUuid:E,syncSourceUuids:z,files:L}=(0,e9.r)(),R=(null==N?void 0:N.toLowerCase().includes("opus"))&&!N.toLowerCase().includes("3.5"),O=(null==N?void 0:N.toLowerCase())===tB.toLowerCase(),{showHint:A,dismissHint:P,switchToSonnet:I}=function(e,t){let[n,r]=(0,F.useState)(!1),{allModelOptions:s}=(0,f.u)(),{setStickyModelPreference:i}=(0,tc.M)();(0,F.useEffect)(()=>{if(!e){r(!1);return}let t=localStorage.getItem(td);t&&new Date(t)>new Date?r(!1):r(!0)},[e]);let a=()=>{let e=new Date(Date.now()+432e5);localStorage.setItem(td,e.toISOString()),r(!1)};return{showHint:n,dismissHint:a,switchToSonnet:()=>{let e=s.find(e=>e.name.toLocaleLowerCase().includes("sonnet"));e&&(t(e.model),i(e.model),a())}}}(!!R,e=>{k(e)}),U=A?(0,d.jsx)(tK,{switchToSonnet:I,dismissOpusHint:P,copyText:"Try Claude 3.5 Sonnet — our newest and most intelligent model."}):void 0,H=(0,M.nR)(E),[G,Z]=tZ({conversationUUID:null!==(t=null==S?void 0:S.id)&&void 0!==t?t:null,conversationTokensSoFar:null!==(n=null==S?void 0:S.tokensSoFar)&&void 0!==n?n:0,conversationFiles:null!==(r=null==S?void 0:S.files)&&void 0!==r?r:[],projectKnowledgebaseTokens:null!==(s=null==S?void 0:S.projectKnowledgebaseTokens)&&void 0!==s?s:H,input:w,attachments:_,syncSourceUuids:z}),{exceededMessageLimitWarning:V}=(0,ty.k)(null!==(i=null==S?void 0:S.id)&&void 0!==i?i:null),B="exceeded"===G?(0,d.jsx)(tU,{projectKnowledgebaseTokens:null!==(a=null==S?void 0:S.projectKnowledgebaseTokens)&&void 0!==a?a:0,maxConversationTokens:Z.maxConversationTokens}):null,{isRavenCanceled:K}=(0,tl.pV)(),$=K?(0,d.jsx)(tC,{}):void 0,W=(0,ed.uh)()?(0,d.jsx)(tj,{}):void 0,q=(0,tG.c)(tB),J=!O&&("exceeded"===G||"will-exceed"===G)&&Z.totalTokens<q?(0,d.jsx)(tK,{switchToSonnet:I,copyText:(0,d.jsxs)("span",{children:["Your message is over the"," ",(0,d.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:ts.jC,children:"长度限制"}),". Switch to Claude 3.5 Sonnet."]})}):void 0,X="will-exceed"===G?(0,d.jsx)(tV,{tokenTotals:Z,numAttachments:_.length,projectKnowledgebaseTokens:null==S?void 0:S.projectKnowledgebaseTokens}):null,Q=Z.msgTokens<tH.D?null:(0,d.jsx)(tH.w,{}),ee=to(E)?(0,d.jsx)(tu.A,{children:(0,d.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,d.jsx)(ta.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,d.jsx)("span",{children:"Project knowledge exceeds maximum. Remove files to continue."})]})}):void 0,[et,en]=(0,F.useState)(!1),er=function(e){let{config:t}=(0,eO.useConfig)("prompt_new_conversation_count"),n=t.get("warningCount",null),r=t.get("blockInputCount",null);return void 0!==e&&null!==n&&null!==r&&e>=n&&e<r}(null==S?void 0:S.messagesSoFar)&&!et,es=er?(0,d.jsx)(tf,{onDismiss:()=>en(!0)}):null,{systemAlertFromConfig:ei}=tT(null!==(l=null==S?void 0:S.id)&&void 0!==l?l:null),ea=ei?ei.component:null,el=function(e,t,n){let{data:r=[]}=(0,t_.pK)({projectUuid:n}),s=(0,p.eh)(),i=[...e,...t?t.files:[],...r].filter(e=>e.file_kind===tw.Y.Blob);return!s&&i.length?(0,d.jsx)(tE,{files:i,isNewConversation:!t}):null}(L,S,E),eo=null!==(j=null!==(b=null!==(v=null!==(C=null!==(g=null!==(x=null!==(h=null!==(m=null!==(u=null!==(c=null!==(o=null!=ee?ee:V)&&void 0!==o?o:B)&&void 0!==c?c:$)&&void 0!==u?u:W)&&void 0!==m?m:J)&&void 0!==h?h:X)&&void 0!==x?x:el)&&void 0!==g?g:Q)&&void 0!==C?C:es)&&void 0!==v?v:ea)&&void 0!==b?b:U)&&void 0!==j?j:null;return(0,d.jsx)(T.M,{children:eo&&(0,d.jsx)(Y.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,d.jsx)("div",{className:(0,D.Z)("border-0.5 relative z-[5] px-3.5",ei&&ei.alert.proUpsell||er||U?"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":el?"bg-bg-300 border-border-300":"bg-danger-900 border-danger-100/20","bottom"===y?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5"),children:eo})})})};function tY(e){let{children:t,className:n}=e,r=(0,F.useRef)(null),s=(0,F.useRef)(null),[i,a]=(0,F.useState)("auto");(0,F.useEffect)(()=>{var e,t;let n=(null===(e=s.current)||void 0===e?void 0:e.offsetHeight)||0;i!==n?a(n):null===(t=r.current)||void 0===t||t.removeAttribute("style")},[t,i]);let l=0===i?{ease:"easeOut",duration:.1}:{type:"spring",stiffness:1e3,damping:45,mass:1};return(0,d.jsx)(Y.E.div,{ref:r,animate:{height:i},transition:l,onAnimationComplete:()=>{setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.removeAttribute("style")},10)},children:(0,d.jsx)("div",{className:n,ref:s,children:t})})}var tW=n(68002),tq=n(23130),tJ=n(6274),tX=n(27957),tQ=n(69602),t0=n(99172),t1=n(86825),t2=n(15212),t3=n(39581);let t5=e=>{let{attachments:t,files:n,syncSourceResults:r,onRemoveAttachment:s,onRemoveFile:i,onRemoveSyncSource:a,isUploadingFile:l,isUploadingSync:o}=e;return(0,d.jsxs)("div",{className:"flex items-end gap-x-1 gap-y-2 px-4 pb-3 pt-2.5 flex-wrap",children:[t.map((e,t)=>(0,d.jsx)(t1.mB,{file:e,size:"md",onRemoveFile:()=>s(t)},t)),n.map((e,t)=>(0,d.jsx)(t1.mB,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>i(t)},e.file_uuid)),(0,d.jsx)(t2.e,{isShown:l}),r.map(e=>{let{syncSource:t,uuid:n}=e;return(0,d.jsx)(t3.Q,{uuid:n,syncSource:t,size:"md",onRemove:()=>a(n)},n)}),(0,d.jsx)(t2.e,{isShown:o,className:"p-0.5"})]})};var t4=n(73567),t6=n(62973),t8=n(42978),t7=n.n(t8);let t9={Other:[{id:"99700868408274280",title:"Polish your prose"},{id:"43114568093822746",title:"Generate interview questions"},{id:"42665171453908646",title:"Write a memo"},{id:"13658107890000882",title:"Summarize meeting notes"},{id:"98710402263724850",title:"Generate excel formulas"},{id:"12345678901234567",title:"Provide stakeholder perspective"},{id:"98765432109876543",title:"Extract insights from report"}],Engineering:[{id:"77006472433045320",title:"Generate Git commands"},{id:"23672783609437165",title:"Detect and fix bugs in my code"},{id:"54709237334922990",title:"Optimize code performance"},{id:"76483481533138620",title:"Explain complex code in plain language"},{id:"49035229639700416",title:"Refactor my code"},{id:"22278195957902858",title:"Help me integrate with an API"},{id:"94299038774707560",title:"Create a Python function"},{id:"31185073020420883",title:"Turn unstructured text into JSON tables"},{id:"28298329876891693",title:"Create a game in a single HTML file"},{id:"41655807803803650",title:"Code translation"}],"Product Management":[{id:"82918428936569660",title:"Prioritize product backlog"},{id:"24170702836678570",title:"Craft a product update announcement"},{id:"49676294185024326",title:"Analyze competitor features"},{id:"25795996224555970",title:"Analyze user feedback"},{id:"79509579700432370",title:"Create catchy product names from descriptions and keywords"},{id:"24508246371842147",title:"Explain complex code in plain language"},{id:"54107552753210730",title:"Transform everyday language into SQL queries"},{id:"46558961414653875",title:"Brainstorm feature ideas"}],Marketing:[{id:"97675156954045180",title:"Craft a compelling product launch announcement"},{id:"64570977187031160",title:"Create product announcement tweets"},{id:"85284883020582100",title:"Develop a social media content calendar"},{id:"7089202722400656",title:"Analyze competitor marketing strategies"},{id:"40167006041527520",title:"Write a campaign performance email"}],Sales:[{id:"90120536939409660",title:"Craft personalized outreach emails"},{id:"69406094485570740",title:"Analyze financial statements"},{id:"5584768640389593",title:"Overcoming common sales objections"},{id:"78193848943320030",title:"Identifying potential partnership opportunities"},{id:"73173993695351400",title:"Create an account plan"}],"Data Science":[],Design:[],"Human Resources":[],Finance:[],Operations:[],Legal:[]};var ne=n(59026);n(71364);var nt=(0,n(30359).$)("f10fe46710f8024ed33f6006aec89cbeef434527");let nn={initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:30,mass:1}}};function nr(e){let{example:t}=e,{track:n}=(0,I.z$)(),{setAttachments:r,setPrompt:s,focusInput:i}=(0,e9.r)(),{mutate:a,isLoading:l}=(0,ne.useMutation)({mutationFn:async()=>{n({event_key:"claudeai.conversation.suggestion.applied",suggestion_id:t.id});let{prompt:e,attachment:a}=await nt(t.id),l=null;a&&(l={file_type:"",file_size:new TextEncoder().encode(null==a?void 0:a.extracted_content).length,...a}),l&&r([l]),s(e,{forceUpdateTiptap:!0}),i()}});return(0,d.jsxs)(Y.E.div,{variants:nn,className:"text-border-100 hover:text-accent-secondary-100 relative flex-1",children:[(0,d.jsx)(j.u,{tooltipContent:"试试这个 Prompt 嘛~",side:"bottom",children:(0,d.jsx)("button",{className:"bg-bg-300 from-bg-200/30 to-bg-200/0 border-border-200 md:border-border-300 border-0.5 text-text-300 hover:text-accent-secondary-000 hover:border-accent-secondary-100/80 hover:bg-accent-secondary-900 relative z-[1] flex min-h-12 w-full flex-1 items-center justify-between gap-2 overflow-hidden rounded-xl bg-gradient-to-b px-2.5 text-left text-sm leading-[1.15] transition disabled:opacity-50",disabled:l,onClick:()=>a(),children:(0,d.jsx)("div",{className:"line-clamp-2",children:t.title})})}),(0,d.jsxs)("svg",{className:"pointer-events-none absolute right-full top-full -mr-[0.1875rem] -mt-[0.1875rem] -translate-y-1/2 translate-x-1/2",width:"12",height:"12",viewBox:"0 0 12 12",stroke:"currentColor",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeWidth:"0.5",children:[(0,d.jsx)("circle",{className:"opacity-70",cx:"7.5",cy:"4.5",r:"4"}),(0,d.jsx)("circle",{className:"opacity-50",cx:"2",cy:"9.5",r:"1.5"})]})]})}let ns={initial:{opacity:0},animate:{opacity:1,transition:{staggerChildren:.05}}};function ni(){let{account:e}=(0,ed.t)(),{addSuccess:t}=(0,g.e)(),{mutate:n}=(0,t4.Ck)(),{examples:r,refresh:s}=function(){let{account:e}=(0,ed.t)(),t=null==e?void 0:e.settings.work_function,{count:n,increment:r}=(0,R.Cf)(t7()(0,100));return{examples:(0,F.useMemo)(()=>{let e=t9.Other.map(e=>{let{id:t,title:n}=e;return{id:t,title:n}}),r=[];t&&t in t9&&(r=t9[t].map(e=>{let{id:t,title:n}=e;return{id:t,title:n}}));let s=r.concat(e),i=s.concat(s),a=3*n%s.length;return i.slice(a,a+3)},[n,t]),refresh:r}}();return(0,d.jsxs)("div",{className:"flex flex-col gap-2 pb-1.5 pl-3.5 pr-3 pt-2 md:flex-row",children:[(0,d.jsx)(Y.E.div,{variants:ns,initial:"initial",animate:"animate",className:"grid min-h-12 min-w-0 flex-1 gap-2 md:grid-cols-3",children:r.map(e=>(0,d.jsx)(nr,{example:e},e.id))}),(0,d.jsxs)("div",{className:"flex flex-row-reverse justify-start gap-0.5 max-md:mt-2 md:flex-col md:justify-center",children:[(0,d.jsx)(j.u,{tooltipContent:"隐藏建议",side:"right",children:(0,d.jsx)(U.z,{variant:"ghost",size:"unset",className:"text-text-300 h-6 w-6 rounded-md active:scale-90 max-md:ml-2",onClick:()=>{n({...null==e?void 0:e.settings,has_seen_starter_prompts:!0}),t("You can re-enable prompt suggestions in profile settings")},children:(0,d.jsx)(ee.X,{size:16})})}),(0,d.jsx)(j.u,{tooltipContent:"再来点建议",side:"right",children:(0,d.jsx)(U.z,{variant:"ghost",size:"unset",className:"text-text-400 h-6 w-6 rounded-md active:scale-90",onClick:s,children:(0,d.jsx)(t6.t,{size:16})})})]})]})}var na=n(92458),nl=n(53491),no=n(82862),nc=n(41595);let nd=e=>{let{hasProjectSelectorOpen:t,setHasProjectSelectorOpen:n,currentProject:r}=e;return(0,d.jsx)(j.u,{className:"text-center",tooltipContent:t?"Close":r?"切换项目":"使用项目去组织聊天和提供 Claude 带有知识的上下文",side:"left",children:(0,d.jsxs)(U.z,{variant:"unstyled",size:"unset",className:(0,D.Z)("border-0.5 border-border-300 hover:bg-bg-500/30 flex h-7 max-w-full items-center gap-1 overflow-hidden whitespace-nowrap rounded-lg pl-2 pr-1.5 text-xs transition-colors",void 0!==r?"text-accent-secondary-000 border-accent-secondary-000":"text-text-300",t&&"bg-bg-300 max-sm:flex-1"),onClick:()=>n(!t),children:[(0,d.jsx)(tW.j,{size:14,className:"shrink-0"}),void 0===r?(0,d.jsx)(d.Fragment,{children:t?(0,d.jsxs)(d.Fragment,{children:["选择一个项目",(0,d.jsx)(na.U,{size:12,className:"shrink-0"})]}):(0,d.jsxs)(d.Fragment,{children:["试试 Project （此和 GPTs 功能类似）",(0,d.jsx)(eR.p,{size:12,className:"shrink-0"})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"min-w-0 truncate font-medium",children:r.name}),t?(0,d.jsx)(na.U,{size:12,className:"shrink-0"}):(0,d.jsx)(eR.p,{size:12,className:"shrink-0"})]})]})})},nu=(0,F.forwardRef)((e,t)=>{let{query:n,onChange:r}=e;return(0,d.jsxs)("label",{className:"ml-1 flex flex-1 items-center gap-2 sm:ml-2",children:[(0,d.jsx)(nl.Y,{size:16,className:"text-text-400"}),(0,d.jsx)(J.oi,{ref:t,placeholder:"搜索最近的项目",className:"!h-auto w-full !rounded-none border-0 bg-transparent !px-0 !py-0",value:n,onChange:e=>{r(e.target.value)},autoFocus:!0})]})});nu.displayName="ProjectSearchInput";let nm=e=>{let{currentProject:t,matchingProjects:n,hasProjects:r,searchQuery:s,searchInputRef:i,onSelectProject:a}=e,l=(0,F.useRef)(null),o=!n||0===n.length,[c,u]=(0,F.useState)(-1);return((0,F.useEffect)(()=>{-1===c&&(null==i?void 0:i.current)&&i.current.focus()},[i,c]),(0,F.useEffect)(()=>{var e;let t=null===(e=l.current)||void 0===e?void 0:e.children;t&&c>=0&&c<t.length&&t[c].focus()},[i,c]),(0,F.useEffect)(()=>{let e=e=>{n&&0!==n.length&&("ArrowUp"===e.key?(e.preventDefault(),u(e=>e<=0?-1:e-1)):"ArrowDown"===e.key&&(e.preventDefault(),u(e=>e<n.length-1?e+1:n.length-1)))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),o||!r)?(0,d.jsx)("div",{className:"bg-bg-500/20 text-text-300 mx-3.5 mb-1.5 mt-2 flex flex-1 flex-col items-center justify-center gap-1 rounded-lg py-4 text-center text-sm",children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{children:["No projects matching “",s,"”"]}),(0,d.jsx)(U.z,{href:"/projects/create",variant:"secondary",children:"Create a Project"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:"使用项目去组织聊天和复用文件中的知识"}),(0,d.jsx)(U.z,{href:"/projects/create",variant:"secondary",children:"创建你的第一个项目"})]})}):(0,d.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,d.jsx)("ul",{ref:l,role:"listbox",className:"mb-1 mt-1 flex min-h-[6.125rem] flex-col gap-px px-1.5 sm:px-2.5",onBlur:()=>u(-1),children:n.map((e,n)=>(0,d.jsx)(np,{project:e,isSelected:(null==t?void 0:t.uuid)===e.uuid,searchQuery:s,onSelect:a,onFocus:()=>u(n)},e.uuid))})},"projects")},np=e=>{let{project:t,isSelected:n,searchQuery:r,onSelect:s,onFocus:i}=e,a=(0,F.useRef)(null),l=RegExp("(".concat(r,")"),"gi"),o=t.name.split(l),c=(0,d.jsx)(d.Fragment,{children:o.map((e,t)=>(0,d.jsx)(F.Fragment,{children:e.toLowerCase()===r.toLowerCase()&&""!==e?(0,d.jsx)("span",{className:"text-accent-secondary-100",children:e}):e},t))});return(0,d.jsxs)("li",{ref:a,role:"option","aria-selected":n,tabIndex:0,onClick:()=>{s(t.uuid)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&s(t.uuid)},onFocus:i,className:"group relative cursor-pointer rounded-lg px-2 py-1.5 text-sm outline-none",children:[(0,d.jsx)("div",{className:(0,D.Z)("border-0.5 pointer-events-none absolute inset-0 rounded-[inherit] transition",n?"bg-accent-secondary-900 border-accent-secondary-100/20 group-hover:border-accent-secondary-100/50 group-focus-visible:border-accent-secondary-100/50":"bg-bg-400/50 scale-95 border-transparent opacity-0 group-hover:scale-100 group-hover:opacity-100 group-focus-visible:scale-100 group-focus-visible:opacity-100")}),(0,d.jsxs)("div",{className:"relative z-[1] flex items-center gap-1.5",children:[n?(0,d.jsx)(no.f,{size:16,className:"text-accent-secondary-000 shrink-0"}):(0,d.jsx)(tW.j,{size:16,className:"text-text-300 shrink-0"}),(0,d.jsx)("div",{className:(0,D.Z)("font-tiempos line-clamp-1 min-w-0",n?"text-text-100":"text-text-300 group-hover:text-text-100 group-focus-visible:text-text-100 transition-colors"),children:c}),t.creator&&(0,d.jsx)(nc.H,{project:t,className:"text-text-400 flex-1 text-xs max-md:hidden"}),n&&(0,d.jsx)("div",{className:"text-accent-secondary-000 text-xs font-medium opacity-0 group-hover:opacity-100 group-focus-visible:opacity-100",children:"Unselect"})]})]})};var nh=n(41464),nx=n(76328),nf=n(769),ng=n(12063);let nC=e=>{let{directory:t,refreshDirectories:n}=e,[r,s]=(0,F.useState)(!1),i=async()=>{s(!0);try{await (0,nf.y3)(t.uuid),n()}finally{s(!1)}};return(0,d.jsxs)("div",{className:(0,D.Z)("border-0.5 flex h-7 max-w-full items-center gap-1 overflow-hidden whitespace-nowrap rounded-lg pl-2 pr-1 text-xs transition-colors","text-accent-secondary-000 border-accent-secondary-200"),children:[(0,d.jsx)(nx.P,{}),(0,d.jsx)("span",{className:"mb-0.5",children:(0,ng.T7)(t.uri.replace(/\/$/,""))}),r?(0,d.jsx)(nh.g,{size:"sm"}):(0,d.jsx)(U.z,{size:"unset",variant:"ghost",className:"!rounded-full w-4 h-4",onClick:i,children:(0,d.jsx)(ee.X,{className:"text-accent-secondary-100"})})]})};var nv=n(10398),nb=n(60240);let nj=e=>{let{onNewDirectory:t,disabled:n}=e,{account:r}=(0,ed.t)(),{config:s}=(0,eO.useConfig)("harmony_product_strings"),{value:i,toggle:a,setFalse:l}=(0,R.kt)(!1),o=(0,nv.f)(),c="true"===o.get(ts.cn.SKIP_HARMONY_INFO_MODAL),[u,m]=(0,F.useState)(c),p=async()=>{l();try{let e=await window.showDirectoryPicker();t(e)}catch(e){}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.u,{tooltipContent:n?s.get("button_disabled_in_projects",""):(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[s.get("button_tooltip",""),(null==r?void 0:r.email_address.endsWith("@anthropic.com"))&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"opacity-65",children:s.get("button_employee_tooltip","")})]})]}),side:"bottom",children:(0,d.jsx)(U.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":n?s.get("button_disabled_in_projects",""):s.get("button_tooltip",""),onClick:()=>{u?p():a()},disabled:n,children:(0,d.jsx)(nx.P,{size:16})})}),(0,d.jsxs)(b.u_,{isOpen:i,onClose:l,modalSize:"lg",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:s.get("modal_title","")}),(0,d.jsx)(U.z,{onClick:l,size:"icon",variant:"ghost",children:(0,d.jsx)(ee.X,{size:16})})]}),(0,d.jsx)("p",{className:"text-sm text-text-300 mb-4",children:s.get("modal_description","")}),(0,d.jsx)("div",{className:"bg-accent-pro-200 rounded-xl mb-4 h-56 flex items-center justify-center text-oncolor-100",children:"Image FPO"}),(0,d.jsx)("div",{className:"rounded-xl bg-bg-100 border-border-500 p-4 text-xs text-text-400 mb-4",children:(0,d.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[s.get("modal_bullets",[]).map(e=>(0,d.jsx)("li",{children:e},e)),(null==r?void 0:r.email_address.endsWith("@anthropic.com"))&&s.get("employee_modal_bullets",[]).map(e=>(0,d.jsx)("li",{children:e},e))]})}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"text-sm text-text-400",children:(0,d.jsx)(nb.X,{checked:u,onChange:()=>{m(!u),o.set(ts.cn.SKIP_HARMONY_INFO_MODAL,(!c).toString())},label:"Don't show this again"})}),(0,d.jsx)(U.z,{onClick:p,children:s.get("modal_cta","")})]})]})]})};var ny=n(15854),nw=n(81885);let nN=e=>{let{setIsUploadingGithubSync:t}=e,[n,r]=(0,F.useState)(!1),s=(0,tG.e)(null),{setSyncSourceUuids:i}=(0,e9.r)(),{isGithubAuthenticated:a,initGithubAuth:l}=(0,P.Yn)({callerIdentifier:"chat",handleSuccess:()=>r(!0)}),o=(0,F.useCallback)(e=>{i(t=>[...t,e.uuid]),t(!1)},[i,t]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.u,{tooltipContent:"GitHub",side:"bottom",children:(0,d.jsx)(U.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":"GitHub",onClick:()=>{if(a){r(!0);return}l()},children:(0,d.jsx)(nw.j0,{type:E.Fg.GITHUB,size:16})})}),(0,d.jsx)(ny.U,{isOpen:n,onClose:()=>r(!1),onCreated:o,tokenLimit:s,setIsUploadingGithubSync:t})]})};var nk=n(64965);let n_=e=>{var t;let{dropdownAlign:n="start",setIsUploadingDriveSync:r,isOpen:s,setIsOpen:i}=e,{isDriveAuthenticated:a,initDriveAuth:l}=(0,P.nC)({callerIdentifier:"chat",handleSuccess:()=>i(!0)}),{setSyncSourceUuids:o}=(0,e9.r)(),c=null===(t=(0,eO.useConfig)("kingfisher_int_notice").config)||void 0===t?void 0:t.get("notice",""),u=(0,F.useCallback)(e=>{o(t=>[...t,e.uuid]),r(!1)},[o,r]),m=(0,d.jsx)("div",{children:(0,d.jsx)(j.u,{tooltipContent:"Google Drive (Docs only)"+c,side:"bottom",children:(0,d.jsx)(U.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":"Google Drive",onClick:()=>{a||l()},children:(0,d.jsx)(nw.j0,{type:E.Fg.GDRIVE,size:16})})})});return a?(0,d.jsx)(nk.C,{align:n,trigger:m,setIsUploadingDriveSync:r,onCreated:u,isOpen:s,setIsOpen:i}):m};var nS=n(95950),nE=n(57012),nz=n(28294),nL=n(35506),nD=n(75639),nT=n(92494),nF=n(25318);let nR="https://modelcontextprotocol.io";function nO(e,t){if(!Array.isArray(e))return[];let n=e=>e.split(/(\d+)/).map((e,t)=>{if(t%2==1){let t=parseInt(e,10);return isNaN(t)?e.toLowerCase():t}return e.toLowerCase()}),r=(e,t)=>{if(null===e)return null===t?0:-1;if(null===t)return 1;if("number"==typeof e&&"number"==typeof t)return e-t;let r=String(e),s=String(t),i=n(r),a=n(s);for(let e=0;e<Math.min(i.length,a.length);e++){let t=i[e],n=a[e];if(t!==n){if("number"==typeof t&&"number"==typeof n)return t-n;return String(t).localeCompare(String(n))}}return i.length-a.length};return[...e].sort((e,n)=>{for(let s of t){let t=r(e[s],n[s]);if(0!==t)return t}return 0})}let nA=e=>{let{icon:t,name:n,onClick:r}=e;return(0,d.jsxs)("div",{className:"cursor-pointer p-1.5 transition-colors duration-200 hover:bg-bg-100 flex items-center gap-1.5 text-sm",onClick:r,children:[(0,d.jsx)(t,{size:20,weight:"light"})," ",(0,d.jsx)("div",{className:"flex-1",children:n})]})},nP=e=>{var t;let{prompt:n,onSubmit:r,onClose:s}=e,[i,a]=(0,F.useState)({});return(0,d.jsxs)(b.u_,{title:(0,d.jsx)("div",{className:"font-medium mb-4",children:"Fill Prompt Arguments"}),isOpen:!0,onClose:s,modalSize:"md",children:[null===(t=n.arguments)||void 0===t?void 0:t.map(e=>(0,d.jsx)(J.oi,{label:e.name,value:i[e.name]||"",onChange:t=>a(n=>({...n,[e.name]:t.target.value})),className:"mb-4"},e.name)),(0,d.jsx)(U.z,{onClick:()=>{r(i)},children:"Submit"})]})},nM=e=>{let{handleUpload:t,mcpClients:n}=e,[r,s]=(0,F.useState)({}),[i,a]=(0,F.useState)({}),[l,o]=(0,F.useState)(!1),[c,u]=(0,F.useState)(null),{addError:m}=(0,g.e)(),{track:h}=(0,I.z$)();(0,F.useEffect)(()=>{let e=!1;async function t(){if(!n)return;let t=await (0,nE.k)(n,{method:"resources/list",params:{}},nz.Ol,{timeout:5e3}),r=await (0,nE.k)(n,{method:"prompts/list",params:{}},nz.ev,{timeout:5e3});if(e)return;let i={},l={};Object.entries(t).forEach(e=>{var t,n,r;let[s,a]=e;h({event_key:"mcp.resources.listed",resource_count_on_server:null!==(n=null===(t=a.resources)||void 0===t?void 0:t.length)&&void 0!==n?n:0}),i[s]=(null!==(r=a.resources)&&void 0!==r?r:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(r).forEach(e=>{var t,n,r;let[s,i]=e;h({event_key:"mcp.prompts.listed",prompt_count_on_server:null!==(n=null===(t=i.prompts)||void 0===t?void 0:t.length)&&void 0!==n?n:0}),l[s]=(null!==(r=i.prompts)&&void 0!==r?r:[]).sort((e,t)=>e.name.localeCompare(t.name))}),s(i),a(l)}t();let r=setInterval(()=>void t(),5e3);return()=>{e=!0,clearInterval(r)}},[n,m,h]);let x=async(e,s)=>{var i;let a=null===(i=r[e])||void 0===i?void 0:i.find(e=>e.uri===s);if(!a){m("Resource not found: ".concat(s));return}let l=n[e];if(!l){m("MCP server not known: ".concat(e));return}o(!1);try{let e=(await l.request({method:"resources/read",params:{uri:s}},nz.vg,{timeout:15e3})).contents.map(e=>{let t;return"text"in e?(t=String(e.text),h({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(t=nI(e.blob),h({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([t],a.name,{type:e.mimeType})});e.length>0&&await t(e)}catch(e){m("Error uploading resource: ".concat(e))}},f=(e,t)=>{o(!1),t.arguments&&t.arguments.length>0?u({serverName:e,prompt:t}):C(e,t,{})},C=async(e,r,s)=>{let i=n[e];if(!i){m("MCP server not known: ".concat(e));return}try{let e=await i.request({method:"prompts/get",params:{name:r.name,arguments:s}},nz.Go,{timeout:15e3});h({event_key:"mcp.prompts.used",argument_count:Object.keys(s).length,assistant_messages:e.messages.filter(e=>"assistant"===e.role).length,user_messages:e.messages.filter(e=>"user"===e.role).length,text_messages:e.messages.filter(e=>"text"===e.content.type).length,image_messages:e.messages.filter(e=>"image"===e.content.type).length});let n=(e,t)=>{let n=e=>{let t=p.wI[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},s=e=>"".concat(r.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],s("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([nI(e.content.data)],s(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var i;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!==(i=t.mimeType)&&void 0!==i?i:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let r=n(t.mimeType);return new File([nI(t.blob)],"".concat(t.uri,".").concat(r),{type:t.mimeType})}throw Error("Invalid resource content")}};if(1===e.messages.length)await t([n(e.messages[0],0)]);else if(e.messages.length>1){let s=e.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[n(e,t)]:[]),i=e.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(i.length>0){let e=JSON.stringify(i,null,2);s.push(new File([e],"".concat(r.name,"_messages.json"),{type:"application/json"}))}await t(s)}u(null)}catch(e){m("Error getting prompt: ".concat(e))}},v=(0,F.useMemo)(()=>[...new Set([...Object.keys(r),...Object.keys(i)])].sort(),[r,i]),w=(0,F.useMemo)(()=>Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e,r=n.getServerVersion();return r?[t,r]:null}).filter(e=>null!==e).sort((e,t)=>{let[n]=e,[r]=t;return n.localeCompare(r)})),[n]);return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(j.u,{className:"text-center",side:"bottom",tooltipContent:(0,d.jsx)(d.Fragment,{children:"Attach from MCP"}),children:(0,d.jsx)(U.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":"Attach from MCP",onClick:()=>o(!0),children:(0,d.jsx)(nL.F,{size:20,className:"text-text-300"})})}),(0,d.jsxs)(b.u_,{title:(0,d.jsx)("div",{className:"font-medium mb-4",children:"Share context with Claude"}),isOpen:l,onClose:()=>o(!1),modalSize:"lg",children:[(0,d.jsxs)("p",{className:"text-sm mb-2",children:["Claude can receive information like prompts and attachments from specialized servers using Model Context Protocol."," ",(0,d.jsx)("a",{className:"underline",href:nR,target:"_blank",children:"了解更多about MCP"}),"."]}),Object.keys(n).length>0?(0,d.jsxs)(d.Fragment,{children:[v.length>0&&(0,d.jsxs)(nF.fC,{children:[(0,d.jsxs)(nF.xz,{className:"bg-bg-300 rounded px-2 py-1 w-fit",children:[(0,d.jsx)(nF.B4,{className:"text-text-000",placeholder:"Choose an integration"}),(0,d.jsx)(nF.JO,{className:"text-text-400 icon",children:(0,d.jsx)(B.p,{size:16,className:"inline-block ml-2"})})]}),(0,d.jsx)(nF.h_,{children:(0,d.jsx)(nF.VY,{className:"border-0.5 border-border-300 bg-bg-200 min-w-72 rounded-lg p-1 shadow-sm z-50 cursor-pointer",position:"popper",side:"bottom",align:"start",sideOffset:4,alignOffset:0,avoidCollisions:!0,collisionPadding:8,children:(0,d.jsx)(nF.l_,{className:"p-2 ",children:(0,d.jsx)(y.$,{className:"max-h-[40vh] pr-4",children:v.map((e,t)=>{var n,s;return(0,d.jsxs)(nF.ZA,{children:[(0,d.jsx)(nF.__,{className:(0,D.Z)(0===t?"mb-1":"my-1"),children:e}),null===(n=nO(i[e],["name"]))||void 0===n?void 0:n.map(t=>(0,d.jsx)(nA,{icon:nD.N,name:t.name,onClick:()=>f(e,t)},t.name)),null===(s=nO(r[e],["name","uri"]))||void 0===s?void 0:s.map(t=>(0,d.jsx)(nA,{icon:nT.$,name:t.name||t.uri,onClick:()=>x(e,t.uri)},t.uri))]},e)})})})})})]}),(0,d.jsx)("div",{className:"mt-4 text-text-400",children:(0,d.jsxs)("details",{children:[(0,d.jsx)("summary",{className:"font-medium mb-2 text-sm cursor-pointer",children:"Installed MCP Servers"}),(0,d.jsx)("ul",{children:Object.entries(w).map(e=>{let[t,n]=e;return(0,d.jsxs)("li",{className:"text-xs flex",children:[(0,d.jsx)("div",{className:"flex-1",children:n.name}),(0,d.jsx)("div",{className:"font-extralight",children:n.version})]},t)})})]})})]}):(0,d.jsx)("p",{children:"No servers are installed."})]}),c&&(0,d.jsx)(nP,{prompt:c.prompt,onSubmit:e=>C(c.serverName,c.prompt,e),onClose:()=>u(null)})]})};function nI(e){let t=window.atob(e),n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return n}var nU=n(24647);let nH=e=>{let{onClick:t}=e;return(0,d.jsx)(j.u,{tooltipContent:"Capture screenshot",side:"bottom",children:(0,d.jsx)(U.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":"Capture screenshot",onClick:t,children:(0,d.jsx)(nU.V,{size:18})})})};var nG=n(90067);let nZ=e=>{let t=(0,F.useRef)(null);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{ref:t,"data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0",...e}),(0,d.jsx)(j.u,{className:"text-center !max-w-96",side:"bottom",tooltipContent:(0,d.jsxs)(d.Fragment,{children:["Upload files"," ",(0,d.jsxs)("span",{className:"opacity-65",children:["(max ",u.Qe,", ",p.MR/1e6,"mb each)"]})]}),children:(0,d.jsx)(U.z,{size:"icon_sm",variant:"ghost",className:"!rounded-lg","aria-label":"Upload content",onClick:e=>{var n;e.preventDefault(),null===(n=t.current)||void 0===n||n.click()},children:(0,d.jsx)(nG.p,{size:18})})},"upload-tooltip")]})},nV=e=>{let{projectUuid:t,mcpClients:n,handleScreenshotCapture:r,handleNewHarmonyDirectory:s,handleUpload:i,showHarmonyButton:a,showScreenshotButton:l,showMcpButton:o,harmonyDisabled:c,uploadInputProps:u,isRightAligned:m}=e,[p,h]=(0,F.useState)(!1),x=(0,P.P8)(),f=(0,P.E4)(),{userHasHarmony:g}=(0,nS.Y)(t),{setIsUploadingDriveSync:C,setIsUploadingGithubSync:v}=(0,e9.r)(),b=a&&g&&s,j=!(0,N.r3)()&&[l,b,x,f,o].filter(Boolean).length>=2,y=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(nZ,{...u}),(0,d.jsxs)(Y.E.div,{className:(0,D.Z)("inline-flex gap-0",m&&"flex-row-reverse",j&&"opacity-0 pointer-events-none group-hover:scale-100 group-hover:opacity-100 group-hover:pointer-events-auto group-hover:translate-x-0 transition duration-300",p?"scale-100 opacity-100 translate-x-0":m?"scale-95 translate-x-1":"scale-95 -translate-x-1"),children:[l&&r&&(0,d.jsx)(nH,{onClick:()=>void r()}),b&&(0,d.jsx)(nj,{onNewDirectory:s,disabled:c}),x&&(0,d.jsx)(nN,{setIsUploadingGithubSync:v}),f&&(0,d.jsx)(n_,{dropdownAlign:m?"end":"start",setIsUploadingDriveSync:e=>{C(e)},setIsOpen:h,isOpen:p}),o&&n&&(0,d.jsx)(nM,{mcpClients:n,handleUpload:i})]})]});return(0,d.jsx)("div",{className:(0,D.Z)("relative inline-flex h-8 group",j&&"w-8"),children:j?(0,d.jsx)("div",{className:(0,D.Z)("absolute",m?"right-0":"left-0"),children:(0,d.jsx)(Y.E.div,{className:(0,D.Z)("inline-flex gap-0","border-0.5 -m-0.5 p-0.5","hover:bg-bg-000 hover:shadow-md hover:border-border-300 rounded-[10px]",p?"shadow-md border-border-300 bg-bg-000":"border-transparent",m?"flex-row-reverse":"flex-row"),initial:!1,animate:{width:p?"auto":32},whileHover:{width:"auto",transition:{duration:.2,ease:"easeOut"}},children:y})}):(0,d.jsx)("div",{className:(0,D.Z)(m?"flex-row-reverse":"flex-row","inline-flex gap-0"),children:y})})},nB=e=>{let{addError:t}=(0,g.e)(),{setProjectUuid:n}=(0,e9.r)(),[r,s]=(0,F.useState)([]),[i,a]=(0,F.useState)(),{config:l}=(0,nS.Y)(null==e?void 0:e.uuid),{mutateAsync:o}=(0,tX.Qs)(),{mutate:c}=(0,tX.L8)({projectUuid:(null==e?void 0:e.uuid)||""}),[d,u]=(0,F.useState)(!1),m=(0,F.useCallback)(async t=>{if(e){if(!e.is_harmony_project)throw Error("Cannot add a synced directory to a project")}else n((await o({name:"[Synced directory] ".concat(t.name.substring(0,12),"..."),description:"This project was generated automatically on ".concat(new Date().toLocaleString()," from ").concat(t.name,". You can safely ignore it."),is_private:!0,is_harmony_project:!0})).uuid);a(t)},[o,e,n]);return(0,F.useEffect)(()=>{i&&e&&((0,ng.Zn)(i,e.uuid,l.get("ignore",[])).then(()=>u(!0)).catch(t),a(void 0))},[i,l,e,t]),(0,F.useEffect)(()=>{(null==e?void 0:e.uuid)&&d&&((async()=>{let t=await (0,nf.Zz)(e.uuid);s(t),0===t.length&&(c(),n(void 0))})(),u(!1))},[e,n,d,c]),{syncedDirectories:r,handleNewDirectory:m,setDirectoriesNeedRefresh:u}},nK=e=>{let{isProjectLocked:t,hasProjectSelectorOpen:n,setHasProjectSelectorOpen:r,uploadInputProps:s,isUploadingFile:i,hideExamples:a,handleScreenshotCapture:l,mcpClients:o,handleUpload:c,isReply:u,hasAttachmentsOrSyncs:m}=e,{conversation:p,projectUuid:h,setProjectUuid:x,attachments:f,setAttachments:C,files:v,setFiles:j,syncSourceUuids:y,setSyncSourceUuids:w,isAtMaxNumUploads:N,prompt:k,isSending:_,isUploadingDriveSync:S,isUploadingGithubSync:E}=(0,e9.r)(),{addError:z,addSuccess:L}=(0,g.e)(),T=(0,tQ.U)(),R=!T,{data:A}=(0,tX.u0)(),M=(0,O.aP)(y),I=(0,ec.Wk)(M),H=M.map((e,t)=>{let{data:n}=e;return{syncSource:n,uuid:y[t]}}),G=null==A?void 0:A.find(e=>e.uuid===h),{syncedDirectories:Z,handleNewDirectory:V,setDirectoriesNeedRefresh:B}=nB(G),[K,$]=(0,F.useState)(""),W=(()=>{if(A&&K.length>1)return new tq.Z(A,{includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4,keys:["name","description"]}).search(K);let e=null==A?void 0:A.filter(e=>e.uuid!==(null==G?void 0:G.uuid)).map(e=>({item:e,score:0}));return G&&(null==e||e.unshift({item:G,score:0})),e})(),q=W&&Array.isArray(W)?W.filter(e=>e&&e.item&&!e.item.is_harmony_project).slice(0,3).map(e=>e.item):[],J=(0,F.useRef)(null),X=!t&&!a&&0===k.length&&!n&&!m&&!_,[Q,ee]=(0,F.useState)(!1),{mutate:et}=(0,t_.u3)({projectUuid:h}),{mutate:en}=(0,tJ.gr)({projectUuid:h}),er=(0,F.useCallback)(()=>{G&&(f.length||I.length&&G.is_private)&&(f.forEach(e=>{let{file_name:t,extracted_content:n}=e;et({file_name:t,content:n})}),G.is_private&&(I.forEach(e=>{let t=(0,P.hJ)(e);t&&en(t)}),w([])),C([]),window.location.href.includes("/new")?window.location.href="/project/".concat(G.uuid):L("Attachments successfully added to ".concat(G.name||"your project")))},[L,f,et,G,C,en,w,I]);return(0,F.useEffect)(()=>{Q&&G&&(ee(!1),er())},[G,er,Q]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:(0,D.Z)("mr-px flex gap-2 pl-2.5 pr-2 sm:gap-4",n?"flex-col sm:flex-row-reverse":"flex-row-reverse"),children:[T&&(0,d.jsx)("div",{className:"flex flex-1 items-center justify-end gap-1",children:!u&&(0,d.jsx)(()=>{if(null==G?void 0:G.is_harmony_project)return(0,d.jsx)(d.Fragment,{children:Z.map(e=>(0,d.jsx)(nC,{directory:e,refreshDirectories:()=>B(!0)},e.uuid))});if(t){var e;return G&&(0,d.jsxs)("span",{className:"border-0.5 border-border-300 text-accent-secondary-000 border-accent-secondary-000 flex h-7 max-w-full items-center gap-1 overflow-hidden whitespace-nowrap rounded-lg pl-2 pr-1.5 text-xs",children:[(0,d.jsx)(tW.j,{size:14,className:"shrink-0"}),(0,d.jsx)("span",{className:"min-w-0 truncate font-medium",children:null!==(e=null==G?void 0:G.name)&&void 0!==e?e:"Unknown Project"})]})}return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(nd,{currentProject:G,hasProjectSelectorOpen:n,setHasProjectSelectorOpen:e=>{r(e),$("")}}),n&&(0,d.jsx)(U.z,{"aria-label":"Close projects menu",size:"unset",variant:"ghost",className:"h-7 w-7 rounded-md",onClick:()=>r(!1),children:(0,d.jsx)(ti.X,{size:16})})]})},{})}),n?(0,d.jsx)(nu,{ref:J,query:K,onChange:e=>$(e)}):(0,d.jsxs)("div",{className:(0,D.Z)("flex min-w-0 items-center gap-0.5",R&&"flex-1 flex-row-reverse"),children:[N?(0,d.jsx)(n$,{onCreateProjectFromAttachments:()=>{ee(!0)},hideProjectPrompt:!!(p&&!G)||!!(G&&!G.is_private&&y.length),alreadyHasProject:!!G}):!u&&(0,d.jsx)(nV,{projectUuid:h,mcpClients:o,handleScreenshotCapture:l,handleNewHarmonyDirectory:V,handleUpload:c,isRightAligned:R,showHarmonyButton:!0,showScreenshotButton:!!l,showMcpButton:!!o,harmonyDisabled:!!G&&!G.is_harmony_project,uploadInputProps:s}),!u&&!T&&!m&&!N&&(0,d.jsxs)("div",{className:"text-text-400 flex-1 pl-1 text-xs",children:["Collaborate with Claude using"," ",(0,d.jsx)("span",{className:"inline-block",children:"documents, images, and more"})]})]})]}),(0,d.jsxs)("div",{className:"flex flex-col",children:[X&&(0,d.jsx)(ni,{}),T&&n?(0,d.jsx)(nm,{currentProject:G,matchingProjects:q,hasProjects:void 0!==A&&A.length>0,searchQuery:K,searchInputRef:J,onSelectProject:e=>{e===(null==G?void 0:G.uuid)?x(void 0):(x(e),r(!1))}}):m?(0,d.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(0,d.jsx)(t5,{isUploadingFile:i,isUploadingSync:S||E,attachments:f,files:v,syncSourceResults:H,onRemoveAttachment:e=>{C(t=>t.filter((t,n)=>n!==e))},onRemoveFile:e=>{j(t=>t.filter((t,n)=>n!==e))},onRemoveSyncSource:e=>{w(t=>t.filter(t=>t!==e))}})},"attachments"):null]}),(0,d.jsxs)(b.u_,{isOpen:Q&&!h,onClose:()=>ee(!1),modalSize:"xl",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:"Create a project with attachments"}),(0,d.jsx)(U.z,{onClick:()=>ee(!1),size:"icon",variant:"ghost",children:(0,d.jsx)(ti.X,{size:16})})]}),(0,d.jsx)(t0.hK,{isAddingSyncSources:!!y.length,syncSources:I,onProjectCreated:e=>{x(e.uuid)},onError:z,onCancel:()=>ee(!1)})]})]})},n$=e=>{let{onCreateProjectFromAttachments:t,alreadyHasProject:n,hideProjectPrompt:r}=e,s=(0,tQ.U)();return(0,d.jsx)("div",{className:"text-text-400 flex-1 whitespace-nowrap pl-1 text-sm h-8 flex items-center",children:(0,d.jsxs)("span",{className:"text-xs",children:[(0,d.jsx)("span",{className:"hidden sm:inline",children:"Maximum attachments reached."}),s&&!r&&(0,d.jsx)(U.z,{variant:"unstyled",className:"!pl-1.5 !pr-0 !py-0 h-[unset] hover:underline hover:text-text-200 transition-colors",onClick:t,children:n?"添加".concat(u.Qe," documents to project?"):"Create project with ".concat(u.Qe," documents?")})]})})};var nY=n(8353),nW=n(59771);let nq=e=>{let{dragState:t,placement:n}=e;return(0,d.jsx)(Y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"linear",duration:.075},className:(0,D.Z)("absolute inset-0 left-2 right-2 z-30 flex flex-col justify-center border border-dashed transition-colors",t===v.h7.DRAGGING_ON_TARGET?"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-200":"text-text-300 bg-bg-100 border-border-200","bottom"===n?"rounded-t-lg":"rounded-b-lg"),children:(0,d.jsxs)(Y.E.div,{initial:{opacity:0,scaleX:.85,scaleY:.9},animate:{opacity:1,scaleX:1,scaleY:1},transition:{delay:.075,type:"spring",stiffness:750,damping:40},className:"py-1.5 text-center",children:[(0,d.jsxs)("div",{className:"font-tiempos inline-flex items-center gap-3.5 text-lg",children:[(0,d.jsx)(nY.f,{size:22,className:"translate-y-0.5 -rotate-12 opacity-60"}),"Drop files here to add to chat",(0,d.jsx)(nW.a,{size:22,className:"translate-y-0.5 rotate-12 opacity-60"})]}),(0,d.jsxs)("div",{className:"text-xs opacity-70",children:["Max ",u.Qe," files per chat at"," ",p.MR/1e6," MB each"]})]})},"drop-zone-overlay")},nJ=e=>{let{placement:t}=e,{conversation:n,attachments:r,files:s,syncSourceUuids:i,isUploadingDriveSync:a,isUploadingGithubSync:l}=(0,e9.r)(),{dragState:o}=(0,v.EO)(),c=o===v.h7.DRAGGING_OFF_TARGET||o===v.h7.DRAGGING_ON_TARGET,u=o===v.h7.DROPPED,m="bottom"===t?"6.375rem":"7.875rem",p=u?{height:m}:{},h=!!n,x=r.length+s.length,f=i.length,g=e.isUploadingFile||a||l,C=x>0||f>0||g;if(!h||C||c||u)return(0,d.jsx)("div",{className:(0,D.Z)("from-bg-400/10 to-bg-400/30 border-0.5 border-border-300 relative flex bg-gradient-to-b backdrop-blur-md overflow-hidden","bottom"===t?"-mb-2 flex-col-reverse rounded-t-2xl pb-5 pt-2.5":"-mt-1.5 flex-col rounded-b-xl pb-2 pt-3.5 md:rounded-b-2xl","bg-bg-200"),children:(0,d.jsxs)(Y.E.div,{animate:{opacity:1,minHeight:c?m:0,transition:c?{type:"spring",stiffness:1e3,damping:60,mass:1}:{ease:"linear",duration:.15}},className:(0,D.Z)("relative flex min-h-0 flex-col transition","bottom"===t?"flex-col-reverse":"flex-col"),style:p,children:[(0,d.jsx)(T.M,{children:c&&(0,d.jsx)(nq,{dragState:o,placement:t})}),(0,d.jsx)(tY,{className:(0,D.Z)("flex","bottom"===t?"flex-col-reverse":"flex-col"),children:(0,d.jsx)(nK,{...e,isReply:h,hasAttachmentsOrSyncs:C})})]},"drop-zone")})};n(74293);var nX=n(95014),nQ=n(84343);let n0={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},n1=e=>{let{model:t,currentModelOption:n,opensInNewChat:r,onSelect:s}=e,i=t.model===(null==n?void 0:n.model);return(0,d.jsxs)(H.hP,{onClick:()=>{i||s(t)},className:(0,D.Z)("group pr-1",i&&"bg-bg-300"),children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:(0,D.Z)("flex-1 text-sm font-medium",i?"text-text-100":"text-text-300 group-hover:text-text-100"),children:t.name}),!i&&r&&(0,d.jsx)("div",{className:"bg-bg-300 -mr-1.5 translate-y-px rounded-full px-2 py-0.5 text-[0.6rem] font-medium tracking-tight",children:"Starts new chat"})]}),(0,d.jsx)("div",{className:"text-text-400 pr-4 text-xs",children:t.description})]}),i&&(0,d.jsx)(K.J,{className:"text-accent-main-100 mb-1 mr-1.5",size:20,weight:"bold"})]})},n2=e=>{let{conversationUUID:t,selectedModel:n,onSelect:r,placement:s,opensInNewChat:i,disabled:a}=e,{allModelOptions:l,mainModels:o,overflowModels:c}=(0,f.u)(),u=(0,tz.wN)(t||null),m=null!=n?n:u,p=l.find(e=>e.model===m);p||(p=n0);let{value:h}=(0,_.F)("model_selector_enabled"),x=a||!h,{setStickyModelPreference:g}=(0,tc.M)(),C=e=>{g(e.model),r(e)},v=e=>e.map(e=>(0,d.jsx)(n1,{model:e,currentModelOption:p,opensInNewChat:i,onSelect:C},e.model));return(0,d.jsxs)(H.Lt,{className:(0,D.Z)("!bg-bg-200","modal"===s?"!z-50":"!z-30"),align:"start",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),trigger:(0,d.jsxs)(U.z,{variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:"h-7 hover:bg-bg-200 hover:border-border-400 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] self-start rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 sm:ml-0 sm:pb-1.5 sm:pl-1.5 sm:pr-1 sm:pt-1",disabled:x,children:[(0,d.jsx)(nQ.u,{modelName:p.name}),!x&&(0,d.jsx)(B.p,{size:12,className:"text-text-500 ml-px shrink-0 translate-y-px"})]}),children:[v(o),c.length>0&&((0,N.tq)()?v(c):(0,d.jsxs)(H.Vy,{children:[(0,d.jsxs)(H.WR,{className:"text-sm pl-2 py-1.5 gap-2",children:[(0,d.jsx)("div",{className:"text-text-300 group-hover:text-text-100 flex-1",children:"More Models"}),(0,d.jsx)(nX.T,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,d.jsx)(H.nI,{children:(0,d.jsx)(H.A2,{sideOffset:4,className:"!bg-bg-200",children:v(c)})})]}))]})};var n3=n(33293),n5=n(68593),n4=n(52406),n6=n(25675);let n8=e=>{let{prompt:t,files:n,attachments:r,syncSourceUuids:s,conversation:i,onSend:a,onStop:l,isSending:o,isDisabled:c,disabledReason:u}=e,m=(null==i?void 0:i.isStoppingSampling)===!0&&(null==i?void 0:i.isSampling)===!0?"stopping":(null==i?void 0:i.isSampling)===!0?"sampling":t.length>0||n.length>0||r.length>0||s.length>0?"drafting":"empty";return(0,d.jsx)(T.M,{children:"drafting"===m?(0,d.jsx)(n9,{isSending:o,isDisabled:c,disabledReason:u,onSend:a},"send"):"sampling"===m||"stopping"===m?(0,d.jsx)(n7,{onStop:l,isLoading:"stopping"===m},"stop"):null})},n7=e=>{let{onStop:t,isLoading:n}=e;return(0,F.useEffect)(()=>{let e=e=>{"Escape"!==e.key||n||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,n]),(0,d.jsx)(j.u,{tooltipContent:(0,d.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:["Stop Claude response",(0,d.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:"ESC"})]}),children:(0,d.jsx)(U.z,{variant:"secondary",size:"icon_sm",className:"!rounded-xl",onClick:()=>t(),"aria-label":"Stop Response",children:n?(0,d.jsx)(n5.U,{className:"animate-spin",size:18}):(0,d.jsx)(n4.P,{weight:"bold",size:16})})})},n9=e=>{let{isSending:t,isDisabled:n,disabledReason:r,onSend:s}=e,i=(0,F.useCallback)(()=>{(0,n3.bq)("event","msg_sent",{location:"chat_input"}),s()},[s]);return(0,d.jsx)(re,{children:(0,d.jsx)(j.u,{tooltipContent:r,children:(0,d.jsx)("div",{children:(0,d.jsx)(U.z,{variant:"flat",size:"icon_sm",className:"!rounded-xl",disabled:n,onClick:()=>i(),"aria-label":"Send Message",children:t?(0,d.jsx)(n5.U,{className:"animate-spin",weight:"bold",size:16}):(0,d.jsx)(n6.a,{weight:"bold",size:16})})})})})},re=e=>{let{children:t}=e;return(0,d.jsx)(Y.E.div,{initial:{width:0},animate:{width:"auto"},transition:{ease:"linear",duration:.125},children:(0,d.jsx)(Y.E.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:t})})};var rt=n(38711),rn=n(43112),rr=n(6435),rs=n(6200),ri=n(70267),ra=n(88588),rl=n(75461),ro=n(31461),rc=n(97733),rd=n(18292),ru=n(89444),rm=n(94029),rp=n.n(rm);let rh=new ri.H$("inputAutocomplete"),rx=()=>({decoration:null,completion:null}),rf=(e,t)=>ri.Y1.atEnd(e).$anchor.pos===t.$anchor.pos,rg=e=>{let{editor:t}=e;if(!rf(t.state.doc,t.state.selection))return!1;let n=rh.getState(t.state);return!!n.decoration&&(t.view.dispatch(t.state.tr.insertText(n.completion.content)),!0)},rC=(e,t,n,r)=>{let s=e.getMeta(rh);if(s&&s.prompt===r.doc.textContent&&(t.completion=s),!rf(r.doc,r.selection)||!t.completion||t.completion.prompt!==r.doc.textContent)return t.decoration=null,t;let i=document.createElement("span");i.className="text-text-500",i.textContent=t.completion.content;let a=document.createElement("span");a.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",a.textContent="Tab";let l=r.selection.$head.pos,o=ra.p.widget(l,i),c=ra.p.widget(l,a),d=ra.EH.create(r.doc,[o,c]);return t.decoration=d,t},rv=rl.hj.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=rp()(async(e,t)=>{try{let n=this.options.fetchInputAutocompletion,r=await n(t);r&&e.dispatch(e.state.tr.setMeta(rh,{prompt:t,content:r}))}catch(e){}},300);return[new ri.Sy({key:rh,state:{init:rx,apply:rC},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:n}=t.state.doc;return n.length>=3&&e(t,n),{update:(t,n)=>{var r;let{state:s}=t,{doc:i}=s;!n.doc.eq(i)&&(null===(r=rh.getState(s).completion)||void 0===r?void 0:r.prompt)!==i.textContent&&i.textContent.length>=3&&e(t,i.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:rg})}),rb=e=>0===e.state.selection.$from.parentOffset,rj=e=>"codeBlock"===e.state.selection.$from.parent.type.name,ry=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),rw=e=>"heading"===e.state.selection.$from.parent.type.name,rN=e=>e.state.selection.$from.marks().some(e=>"bold"===e.type.name),rk=e=>e.state.selection.$from.marks().some(e=>"italic"===e.type.name),r_=e=>e.state.selection.$from.marks().some(e=>"strike"===e.type.name),rS=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},rE=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText("​"),e.view.dispatch(t)},rz=e=>!(e.state.selection.$from.before()>0)&&(rE(e),!0),rL=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(rE(e),!0),rD=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),rT=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),rF=rl.hj.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(rj(t)&&rb(t))&&rD(t)}})}),rR=rl.hj.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(ry(t)&&rb(t))&&rD(t)},ArrowDown:e=>{let{editor:t}=e;return!!(ry(t)&&rS(t))&&rT(t)},ArrowRight:e=>{let{editor:t}=e;return!!(ry(t)&&rS(t))&&rL(t)},ArrowLeft:e=>{let{editor:t}=e;return!!(ry(t)&&rb(t))&&rz(t)}})}),rO=rl.hj.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(rw(t)&&rb(t))&&rD(t)},ArrowDown:e=>{let{editor:t}=e;return!!(rw(t)&&rS(t))&&rT(t)}})}),rA=rl.hj.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(rN(t)&&rS(t))&&rL(t)}})}),rP=rl.hj.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(rk(t)&&rS(t))&&rL(t)}})}),rM=rl.hj.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(r_(t)&&rS(t))&&rL(t)}})}),rI=rl.hj.create({name:"SnippetCommandParamPlaceholder",addOptions:()=>({snippetCommands:[]}),addProseMirrorPlugins(){let e=this.options;return[new ri.Sy({key:new ri.H$("SnippetCommandParamPlaceholder"),props:{decorations(t){let n=[];return t.doc.descendants((r,s)=>{if("mention"===r.type.name){var i;let a=e.snippetCommands.find(e=>e.label===r.attrs.id);if(!a)return;let l=t.doc.resolve(s+r.nodeSize),o=s+r.nodeSize+1;l.nodeAfter&&l.nodeAfter.isText&&(null===(i=l.nodeAfter.text)||void 0===i?void 0:i.trim())===""&&n.push(ra.p.widget(o,()=>{let e=document.createElement("span");return e.innerText=a.paramPlaceholder,e.className=ru.Lt,e}));let c=t.doc.nodeSize;n.push(ra.p.inline(o,c,{class:ru.Lt}))}}),ra.EH.create(t.doc,n)}}})]}}),rU=rl.hj.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),rH=rl.hj.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new ri.Sy({key:new ri.H$("pasteCodeAsPlainText"),props:{handlePaste:(e,t,n)=>{let{schema:r}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let s=t.clipboardData.getData("text/plain"),i=r.text(s);return e.dispatch(e.state.tr.replaceSelectionWith(i)),!0}}})]}),rG=()=>(0,d.jsx)(ro.T5,{className:"code-block",children:(0,d.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,d.jsx)(ro.ms,{as:"code"})})}),rZ=(e,t)=>{let n=e.getJSON(),r="",s=0,i=function(e){var n,a;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("doc"===e.type&&e.content)for(let t of e.content)i(t);else if("paragraph"===e.type){if(e.content)for(let t of e.content)i(t);r+="\n"}else if("text"===e.type){let t=e.text;if(e.marks)for(let n of e.marks)"bold"===n.type?t="**".concat(t,"**"):"italic"===n.type?t="*".concat(t,"*"):"underline"===n.type?t="__".concat(t,"__"):"strike"===n.type?t="~~".concat(t,"~~"):"code"===n.type&&(t="`".concat(t,"`"));r+=t}else if("codeBlock"===e.type){let t=e.attrs&&"string"==typeof e.attrs.language?e.attrs.language:"";if(r+="\n```".concat(t,"\n"),e.content)for(let t of e.content)i(t);r+="\n```\n\n"}else if("bulletList"===e.type&&e.content)for(let t of e.content)i(t);else if("orderedList"===e.type&&e.content)for(let t=0;t<e.content.length;t++)i(e.content[t],t+1,!0);else if("listItem"===e.type&&e.content){let t="   ".repeat(s);for(let n of(o?r+="".concat(t).concat(l,". "):r+="".concat(t,"* "),e.content))s+=1,i(n),s-=1}else if("mention"===e.type&&(null===(n=e.attrs)||void 0===n?void 0:n.id)){let n=String(e.attrs.id),s=t.find(e=>e.label===n);r+=null!==(a=null==s?void 0:s.substitution)&&void 0!==a?a:"@".concat(n)}};return i(n),r.replace("​","").trim()},rV=e=>{let{input:t,setInput:n,onReady:r,placeholder:s,snippetCommands:i,extraEditorAttributes:a={},fetchInputAutocompletion:l}=e,o=(0,ru.k7)(i),c=[rc.Z.configure({codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),rn.Z.extend({addNodeView:()=>(0,ro.fW)(rG)}).configure({lowlight:rd.$}),rA,rF,rO,rR,rP,rM,rH,rU,rs.Z.configure({placeholder:s,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),rI.configure({snippetCommands:i}),rv.configure({fetchInputAutocompletion:l})],d=(0,ru.Fy)(i),u=(0,ru.Bw)(i),{value:m}=(0,_.F)("chat_editor_snippets"),{value:p}=(0,_.F)("claude_ai_afm_enabled");m&&(c=[...c,rr.ZP.configure({HTMLAttributes:{class:ru.ms},suggestion:d})]);let h=(0,ro.jE)({editorProps:{attributes:{enterkeyhint:"enter",class:"break-words max-w-[60ch]",...a}},onCreate:()=>{null==r||r()},autofocus:!(0,N.tq)()&&"end",extensions:c,content:t,onUpdate(e){let{editor:t}=e,r=t.isEmpty;if(p)n(rZ(t,u));else{let e=t.getHTML().replace("​","");n(o.turndown(e))}r&&t.commands.focus("end")}}),x=(0,F.useCallback)(()=>{if(!h)return null;let e=null;return h.state.doc.descendants(t=>{if("mention"===t.type.name){let n=i.find(e=>e.label===t.attrs.id);n&&!e&&(e=n)}}),e},[h,i]);return{editor:h,getActiveSnippetCommand:x}},rB=(0,F.forwardRef)((e,t)=>{let{disabled:n,input:r,setInput:s,placeholder:i,onSubmit:a,onReady:l,onFocus:o,onBlur:c,snippetCommands:u,isFirstMessage:m,placement:p,fetchInputAutocompletion:h}=e,{addError:x}=(0,g.e)(),{editor:f,getActiveSnippetCommand:C}=rV({input:r,setInput:s,onReady:l,snippetCommands:u,placeholder:i,fetchInputAutocompletion:h}),[v,b]=(0,F.useState)(!1);(0,F.useImperativeHandle)(t,()=>({setContent(e){e!==r&&(null==f||f.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){f.setOptions({editable:e})},focus(){null==f||f.commands.focus()},getPosition:()=>null==f?void 0:f.state.selection.$anchor,getEditor:()=>f,getIsAtEnd(){if(!f)return;let e=f.state.selection.$anchor.pos;return ri.Y1.atEnd(f.state.doc).$anchor.pos===e}}),[f,r]),(0,F.useEffect)(()=>{null==f||f.setOptions({editable:!n})},[f,n]),(0,F.useEffect)(()=>{if(null!==f&&""!==i){let e=f.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=i,f.view.dispatch(f.state.tr))}},[f,i]);let j=(0,tm.K)();return(0,d.jsx)(rt.g.Provider,{value:{setOverrideSubmit:b},children:(0,d.jsx)(ro.kg,{"aria-label":"Write your prompt to Claude",className:(0,D.Z)("mt-1 max-h-96 w-full overflow-y-auto break-words","bottom"!==p&&"min-h-[4.5rem]"),editor:f,onKeyDownCapture:e=>{if("Enter"!==e.key)return;let t=C();if(t){j.track("snippets_command_used",{command:t.label,isFirstMessage:m}),e.preventDefault(),t.action(r).then(e=>{void 0!==e&&(s(e),null==f||f.commands.setContent(e))},e=>{x("Error substituting snippet: ".concat(e))});return}!a||v||e.shiftKey||e.nativeEvent.isComposing||(0,N.tq)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),a(e))},onFocus:o,onBlur:c})})});rB.displayName="PromptInput";var rK=n(13623),r$=n(54811),rY=n(46840);let rW=()=>{let{setPrompt:e,setAttachments:t,setFiles:n}=(0,e9.r)(),{failedStreamRetryData:r,setFailedStreamRetryData:s}=(0,tz.Qk)();(0,F.useEffect)(()=>{null!==r&&(e(r.prompt),t(r.attachments),n(r.files),s(null))},[r,t,s,n,e])};function rq(){let e=(0,c._)(["\n  flex\n  flex-row\n  gap-2\n  justify-between\n  items-center\n  bg-bg-000\n  rounded-t-2xl\n  border-t-0.5\n  border-x-0.5\n  border-border-300\n  p-6\n  mt-6\n  -mx-1\n  sm:mx-0\n  flex\n  items-start\n  transition-all\n  focus-within:border-border-200\n  relative\n  z-[5]\n  shadow-[0_0.25rem_1.25rem_rgba(0,0,0,0.05),0_0_0.75rem_0.5rem_hsl(var(--bg-100))]\n"]);return rq=function(){return e},e}function rJ(e){let{onDismiss:t,projectUuid:n}=e,r=(0,tm.K)(),s=(0,tx.useRouter)();(0,F.useEffect)(()=>{r.track("chat.conversation.too_long_prompt:loaded").catch(th())},[r]);let i=(0,F.useCallback)(()=>{r.track("chat.conversation.too_long_prompt:accepted").catch(th()),n?s.push("/project/".concat(n)):s.push("/chats")},[r,s,n]),a=(0,F.useCallback)(()=>{r.track("chat.conversation.too_long_prompt:dismissed").catch(th()),t()},[r,t]);return(0,d.jsxs)(rX,{children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:"The chat is getting long."}),(0,d.jsx)("p",{className:"text-xs",children:"长对话会导致你更快达到你的用量限制，请尽量使用短对话。"})]}),(0,d.jsxs)("div",{className:"flex flex-col justify-center gap-4 md:flex-row",children:[(0,d.jsx)(U.z,{onClick:a,variant:"secondary",children:"Continue chat"}),(0,d.jsx)(U.z,{onClick:i,children:"开始一段新的对话"})]})]})}let rX=w.q.div(rq());var rQ=n(99747);let r0=/(?:(?:https?|ftp):\/\/)?(?:www\.)?[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})+(?:\/[^\s]*)?/i,r1=/(?:(https?|ftp):\/\/)(?!(?:[\w-]+\.)*docs\.google\.com\/document\/d\/)(?:[\w-]+\.)+[\w-]+(?:\/[^\s]*)?/i,r2=e=>{let{input:t}=e;return((0,P.E4)()?r1:r0).test(t)?{claudeDoesNotReadInternetWarning:(0,d.jsx)(r3,{})}:{}},r3=()=>(0,d.jsx)(tu.A,{children:(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(rQ.V,{className:"h-3.5 w-3.5 shrink-0"}),(0,d.jsx)("span",{children:(0,d.jsx)("a",{href:"https://support.anthropic.com/en/articles/7996846-does-claude-have-access-to-the-internet",className:"hover:underline",target:"_blank",children:"Claude cannot access links"})})]})});function r5(){let e=(0,c._)(["\n  cursor-pointer\n  hover:bg-bg-200\n  text-xs\n  text-text-500\n  transition-opacity\n  duration-700\n  flex\n  items-center\n  border-border-200\n  border-0.5\n  rounded-lg\n  gap-0.5\n  pl-1.5\n  pr-2\n  py-0.5\n  ml-2\n  mr-0.5\n  mb-1\n"]);return r5=function(){return e},e}function r4(){let e=(0,c._)(["\n  flex\n  flex-col\n  bg-bg-000\n  gap-1.5\n  border-0.5\n  border-border-300\n  pl-4\n  pt-2.5\n  pr-2.5\n  pb-2.5\n  sm:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_rgba(0,0,0,0.035)]\n  focus-within:shadow-[0_0.25rem_1.25rem_rgba(0,0,0,0.075)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n"]);return r4=function(){return e},e}let r6=["enabled_artifacts_attachments","preview_feature_uses_artifacts","preview_feature_uses_latex","enabled_turmeric"],r8=(0,F.forwardRef)((e,t)=>{var n,r,s,i,a,l;let{placement:o,placeholder:c,accountSettings:f,onSubmit:w}=e,{prompt:S,model:E,projectUuid:O,personalizedStyle:P,setPrompt:M,setModel:I,setAttachments:U,setFiles:H,attachments:G,files:Z,syncSourceUuids:V,isUploadingDriveSync:B,isUploadingGithubSync:K,isAtMaxNumUploads:$,sendMessage:Y,stopSampling:W,conversation:q,isChatSyncing:J,isProjectSyncing:X,isProjectLocked:Q,isSending:ee,focusInput:et,isFocused:en,setIsFocused:er,promptInputRef:es,willRedirectOnSubmit:ei,hasBlockingWarning:ea,setPersonalizedStyle:el}=(0,e9.r)();(0,F.useImperativeHandle)(t,()=>({setContent:(e,t,n)=>{M(e,{forceUpdateTiptap:!1}),U("function"==typeof t?t(G):t),H("function"==typeof n?n(Z):n)},sendMessage:Y,setAttachments:e=>{U("function"==typeof e?e(G):e)},getAttachments:()=>G}));let eo=e=>{M(e,{forceUpdateTiptap:!1})},eu=void 0===q||0===q.messagesSoFar,em=(0,p.eh)(),[ep,eh,ex,ef,eg,eC,ev,eb]=(0,u.kS)({syncSourceCount:V.length,attachments:G,setAttachments:U,numExistingConversationAttachments:null!==(n=null==q?void 0:q.attachmentsSoFar)&&void 0!==n?n:0,files:Z,setFiles:H,numExistingConversationFiles:null!==(r=null==q?void 0:q.files.length)&&void 0!==r?r:0,detectSameAttachment:()=>!1,selectedModel:E,blobFileUploadsEnabled:em}),ej=(0,tr.i)();rW();let{showNewConversationPrompt:ey,dismissConversationLengthPrompt:ew}=function(e,t){let[n]=(0,F.useState)(null!=e?e:0),{config:r}=(0,eO.useConfig)("prompt_new_conversation_count"),[s,i]=(0,eM.Rr)("disissed-prompt-length-warnings",{});if(void 0===e||void 0===t||t in s)return{showNewConversationPrompt:!1,dismissConversationLengthPrompt:th()};let a=r.get("blockInputCount",null);return{showNewConversationPrompt:null!==a&&n>=a,dismissConversationLengthPrompt:()=>{i(e=>({...e,[t]:!0}))}}}(null==q?void 0:q.messagesSoFar,null==q?void 0:q.id),eN=(ej?r6.filter(e=>"preview_feature_uses_artifacts"!==e):r6).reduce((e,t)=>{var n;return e+(void 0===q?f[t]?1:0:(null===(n=q.previewFeaturesEnabled)||void 0===n?void 0:n[t])?1:0)},0),{openModal:ek}=(0,C.h)(),{mutateAsync:e_,enabled:eS}=(0,A.GN)(),eE=async e=>{var t;if(!eS||!q||!q.id)return"";let[n,r]=(await e_({conversationUUID:null!==(t=null==q?void 0:q.id)&&void 0!==t?t:"",prompt:e})).prompt.split("\n").map(e=>e.trim());return"Yes"===n?" "===e[e.length-1]?r||"":" "+(r||""):"No"===n&&r||""},ez=function(e,t,n,r,s,i){let a=function(e,t,n,r){let{addError:s}=(0,g.e)(),i=(0,F.useCallback)(e=>{n(!1),e&&s(e)},[s,n]),{activeOrganization:a}=(0,ed.t)(),l=null==a?void 0:a.uuid,o=(0,ec.OJ)(),c=(0,F.useCallback)(async e=>{let t;if(!l)return i("Invalid login.");new URL("/api/organizations/".concat(l,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await o("/api/organizations/".concat(l,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,rK.Tb)(e),i("One or more fetches have failed. Try again.")}if(429===t.status)return i("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?i():i("Fetching failed for one of the URLs. Please try again.");let n=await t.json();return n&&0!==Object.keys(n).length&&n.extracted_content?n:i("你提供的 URL 中，有部分无法提取文字，请检查你的 URL。(请注意！这不是本站点的问题！这是你提问的问题！)")},[o,l,i]),{value:d}=(0,_.F)("hatch_use_web_fetcher");return(0,F.useCallback)(async s=>{if(!d)return;let i=[],a=(0,r$.Yl)(s);if(0!==a.length&&r({numNewPotentialAttachments:a.length})){for(let t=0;t<a.length;t++){let r=a[t];if(e.some(e=>r.endsWith(e.file_name)))continue;n(!0);let s=await c(r);if(!s)return;i.push(s)}i.forEach(e=>(0,u.Ch)(e)),i.length>0&&t(e=>[...e,...i]),n(!1)}},[d,r,c,n,t,e])}(e,t,n,r);return(0,F.useCallback)(e=>{var n,l,o;let c=null===(l=e.clipboardData)||void 0===l?void 0:null===(n=l.files)||void 0===n?void 0:n.length,d=null===(o=e.clipboardData)||void 0===o?void 0:o.getData("text/plain"),u=null==d?void 0:d.length;if(u&&!c){let e=(0,rY.g)(d);e&&i(e)}if(c&&!u){r({newUploads:Array.from(e.clipboardData.files)})&&s(e.clipboardData.files),e.preventDefault();return}if(r({numNewPotentialAttachments:1,showError:!1})){if(a(d).catch(console.error),!u||d.length<4e3)return;e.preventDefault(),t(e=>{let t="paste.txt",n=1;for(;e.some(e=>e.file_name===t);)n+=1,t="paste-".concat(n,".txt");return[...e,{file_name:t,file_size:d.length,file_type:"txt",extracted_content:d}]})}},[r,t,a,s,i])}(G,U,eh,ex,eg,st()),{mcpClients:eL,isEnabled:eD,mcpTools:eT}=(0,h.c)(),eF=m(),[eR,eA]=(0,F.useState)(!1),eP=e=>{eA(e),!1===e&&et()},eI=null!==(s=null==q?void 0:q.projectKnowledgebaseTokens)&&void 0!==s?s:0,[eU]=tZ({conversationUUID:null!==(i=null==q?void 0:q.id)&&void 0!==i?i:null,conversationTokensSoFar:null!==(a=null==q?void 0:q.tokensSoFar)&&void 0!==a?a:0,conversationFiles:null!==(l=null==q?void 0:q.files)&&void 0!==l?l:[],projectKnowledgebaseTokens:eI,input:S,attachments:G,syncSourceUuids:V}),eH=to(O),{value:eG}=(0,_.F)("screen_capture"),eZ=(0,k.Rx)(),eV=eG&&!eZ&&!(0,N.r3)(),{addError:eB}=(0,g.e)(),eK=(0,R.O_)(),[e$,eY]=(0,F.useState)(!1),eW=(0,F.useMemo)(()=>[...eT].sort((e,t)=>e.name.localeCompare(t.name)),[eT]);if(ey)return(0,d.jsx)(rJ,{onDismiss:ew,projectUuid:O});let eq=0===S.length&&0===G.length&&0===Z.length&&0===V.length||ep||B||K||J||X||ea||"will-exceed"===eU||eH||(null==q?void 0:q.isSampling)===!0,eJ=J||X?"Syncing knowledge...":void 0,eX=async()=>{!eq&&(await Y(),w&&w())},eQ=async()=>{let e=null;try{e=await x({width:1568,height:1568})}catch(e){console.error(e),eB("Could not capture screen")}if(!e)return;let t=new File([await fetch(e.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await eC([t])};return eK?(0,d.jsxs)(v.rE,{onDrop:ef,children:[(0,d.jsxs)("fieldset",{className:(0,D.Z)("flex w-full min-w-0","bottom"===o?"flex-col-reverse":"flex-col"),onPasteCapture:e=>{en&&ez(e)},children:[(0,d.jsxs)(r9,{onClick:e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.getAttribute("role")||et()},className:(0,D.Z)("bottom"===o?"rounded-t-2xl border-b-0":"rounded-2xl",ei&&ee&&"animated-loading-background"),children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(rB,{ref:es,input:null!=S?S:"",setInput:e=>eo(e),onSubmit:eX,onFocus:()=>{eP(!1),er(!0)},onBlur:()=>er(!1),placement:o,placeholder:null!=c?c:eu?"Claude 有什么可以帮助到你的嘛？":"回复Claude...",snippetCommands:eF,isFirstMessage:eu,fetchInputAutocompletion:eE}),"bottom"===o&&!$&&(0,d.jsx)(nV,{isRightAligned:!0,projectUuid:O,mcpClients:eL,handleScreenshotCapture:eQ,handleUpload:eC,showHarmonyButton:!1,showScreenshotButton:eV,showMcpButton:eD,harmonyDisabled:!0,uploadInputProps:eb}),(0,d.jsx)(n8,{isSending:ee,isDisabled:eq,disabledReason:eJ,prompt:S,files:Z,attachments:G,syncSourceUuids:V,conversation:q,onSend:()=>eX(),onStop:()=>W()})]}),(0,d.jsxs)("div",{className:"flex items-end",children:[(0,d.jsxs)("div",{className:"min-w-0 flex-1 flex max-sm:flex-col-reverse max-sm:gap-1.5 sm:items-center",children:[(0,d.jsxs)("div",{className:"-ml-1.5 flex min-w-0 min-h-4 flex-1 items-center pr-3",children:[(0,d.jsx)(n2,{selectedModel:E,onSelect:e=>I(e.model),opensInNewChat:!eu,placement:o}),(0,d.jsx)(te,{personalizedStyle:P,onSelect:e=>el(e),placement:o,isFirstMessage:eu})]}),(0,d.jsx)(se,{model:E,projectUuid:O,prompt:S,conversation:q})]}),eN>0&&(0,d.jsx)(j.u,{side:"top",tooltipContent:(0,d.jsxs)("p",{children:[eN," experimental feature",eN>1?"s":""," enabled"]}),children:(0,d.jsxs)(r7,{onClick:()=>ek(),children:[(0,d.jsx)(z.G,{}),eN]})}),eT.length>0&&(0,d.jsx)(j.u,{side:"top",tooltipContent:(0,d.jsxs)("p",{children:[eT.length," MCP tool",eT.length>1?"s":""," ","available"]}),children:(0,d.jsxs)(r7,{onClick:()=>eY(!0),children:[(0,d.jsx)(L.v,{}),eT.length]})})]})]}),(0,d.jsxs)("div",{className:(0,D.Z)("flex px-1 md:px-2","bottom"===o?"flex-col-reverse":"flex-col"),children:[(0,d.jsx)(t$,{placement:o}),(0,d.jsx)(T.M,{children:(0,d.jsx)(nJ,{hasProjectSelectorOpen:eR,setHasProjectSelectorOpen:eP,isProjectLocked:Q,uploadInputProps:eb,isUploadingFile:ep,hideExamples:f.has_seen_starter_prompts,placement:o,handleScreenshotCapture:eV?eQ:void 0,mcpClients:eD?eL:void 0,handleUpload:eC})}),""]})]}),(0,d.jsxs)(b.u_,{title:(0,d.jsx)("div",{className:"font-medium mb-4",children:"Available MCP Tools"}),isOpen:e$,onClose:()=>eY(!1),modalSize:"lg",children:[(0,d.jsxs)("p",{className:"text-sm mb-2",children:["Claude can use tools provided by specialized servers using Model Context Protocol."," ",(0,d.jsx)("a",{className:"underline",href:nR,target:"_blank",children:"了解更多about MCP"}),"."]}),(0,d.jsx)(y.$,{className:"max-h-[60vh] pr-4",children:eW.map(e=>(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h3",{className:"font-medium text-sm",children:e.name}),(0,d.jsx)("p",{className:"text-sm text-text-400",children:e.description}),(0,d.jsxs)("p",{className:"text-xs text-text-300 mt-1 italic",children:["From server: ",e.serverName]})]},e.name))})]})]}):(0,d.jsx)(r9,{className:"rounded-2xl h-32"})});r8.displayName="ChatInput";let r7=w.q.div(r5()),r9=w.q.div(r4()),se=e=>{var t,n,r,s,i,a;let{model:l,projectUuid:o,prompt:c,conversation:u}=e,{claudeDoesNotReadInternetWarning:m}=r2({input:c}),{approachingMessageLimitWarning:p}=(0,ty.k)(null!==(n=null==u?void 0:u.id)&&void 0!==n?n:null),{allModelOptions:h}=(0,f.u)(),x=(0,M.nR)(o),g=(null!=x?x:0)>(null!==(r=null===(t=h.find(e=>e.model===l))||void 0===t?void 0:t.slow_kb_warning_threshold)&&void 0!==r?r:155e3)?(0,d.jsx)("div",{className:"max-md:hidden",children:"Large knowledge may slow responses"}):void 0,C=c.length>3?(0,d.jsxs)("div",{className:"max-md:hidden",children:["Use"," ",(0,d.jsx)("div",{className:"bg-bg-200 inline-flex rounded-md px-1",children:"shift + return"})," ","for new line"]}):void 0,v=null!==(a=null!==(i=null!==(s=null!=m?m:p)&&void 0!==s?s:g)&&void 0!==i?i:C)&&void 0!==a?a:void 0;return(0,d.jsx)("div",{className:"text-text-400 text-xs",children:v})},st=()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:n}=(0,e9.r)(),r=(0,P.E4)(),{isDriveAuthenticated:s,initDriveAuth:i}=(0,P.nC)(),{addError:a}=(0,g.e)(),{mutate:l}=(0,O.cE)({onMutate:()=>{n(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),n(!1)},onError:e=>{n(!1),a((0,tn.A)(e))},meta:{noToast:!0}});return e=>{if(r){if(!s){a((0,d.jsxs)("span",{children:[(0,d.jsx)("button",{className:"underline",onClick:i,children:"Authenticate"})," ","to paste link as attachment"]}));return}if(t){a("You can add at most ".concat((0,S.M0)(u.Qe,"attachment")," to a message."));return}l({sync_source_type:E.Fg.GDRIVE,sync_source_config:{uri:e}})}}}},84343:function(e,t,n){n.d(t,{u:function(){return i}});var r=n(27573),s=n(4713);let i=e=>{let{modelName:t}=e,n=t.replace("Claude","");return(0,r.jsxs)("div",{className:"font-tiempos inline-flex gap-[4px] text-[14px] leading-none",children:[(0,r.jsx)(s.l,{className:"claude-logo-model-selector block translate-y-[1.5px]",height:11.5}),(0,r.jsx)("div",{className:"whitespace-nowrap tracking-tight",children:n})]})}},64997:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(85565);function s(){let e=(0,r._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return s=function(){return e},e}let i=n(3520).q.div(s())},79442:function(e,t,n){n.d(t,{r:function(){return i}});var r=n(27573),s=n(57908);n(7653);let i=e=>{let{className:t,isPro:n=!1,...i}=e;return(0,r.jsx)("a",{className:(0,s.Z)("text-accent-secondary-100 font-medium hover:underline",n&&"!text-accent-pro-000",t),...i})}},75706:function(e,t,n){n.d(t,{P:function(){return l}});var r=n(27573),s=n(72500),i=n(7653),a=n(50987);let l=e=>{let{children:t,actionButton:n,title:l}=e,{hasBlockingWarning:o,setHasBlockingWarning:c}=(0,a.r)();return(0,i.useEffect)(()=>(c(!0),()=>{c(!1)}),[o,c]),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,r.jsxs)("div",{className:"text-danger-000 flex flex-row items-center gap-2 md:w-full",children:[(0,r.jsx)(s.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,r.jsxs)("div",{children:[l&&(0,r.jsx)("div",{className:"text-sm font-medium",children:l}),(0,r.jsx)("div",{className:"text-sm",children:t})]})]}),!!n&&(0,r.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:n})]})})}},2554:function(e,t,n){n.d(t,{n:function(){return a}});var r=n(27573),s=n(11096),i=n(57908);n(7653);let a=e=>{let{className:t,isPro:n=!1,...a}=e;return(0,r.jsx)(s.z,{variant:"secondary",size:"sm",className:(0,i.Z)("@lg:w-fit w-full shrink-0",n&&"!bg-accent-pro-100 hover:!bg-accent-pro-000 !text-oncolor-100",t),...a})}},82542:function(e,t,n){n.d(t,{F:function(){return a}});var r=n(27573),s=n(51571),i=n(88075);function a(e){let{allowSelfUpgrade:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(function(e){let t=(0,i.w7)(),n=(0,i.z6)(),r=(0,s.Z)();return t?r?e&&!n?"subscribe-pro-only":"subscribe":"contact-sales":"none"}(t)){case"contact-sales":return(0,r.jsx)(l,{Elem:e});case"subscribe":return(0,r.jsx)(o,{Elem:e});case"subscribe-pro-only":return(0,r.jsx)(c,{Elem:e});case"none":return null}}function l(e){let{Elem:t}=e,{websiteBaseUrl:n}=(0,s.m)();return(0,r.jsx)(t,{href:"".concat(n,"/contact-sales"),children:"Contact us to upgrade"})}function o(e){let{Elem:t}=e;return(0,r.jsx)(t,{href:"/settings/billing",isPro:!0,children:"Subscribe"})}function c(e){let{Elem:t}=e;return(0,r.jsx)(t,{href:"/settings/billing?action=subscribe",isPro:!0,children:"Subscribe to Pro"})}n(7653)},85047:function(e,t,n){n.d(t,{j:function(){return E},k:function(){return w}});var r=n(27573),s=n(91014),i=n(27920),a=n(23489),l=n(33267),o=n(21468),c=n(88075),d=n(11096),u=n(71854),m=n(44846),p=n(36222),h=n(71994),x=n(57908),f=n(82177),g=n(7653),C=n(64997),v=n(79442),b=n(75706),j=n(82542),y=n(2554);let w=e=>{let{messageLimit:t}=(0,c.t)(),n=(null==t?void 0:t.type)==="within_limit",s=(0,i.wN)(e),a=n?null:null==t?void 0:t.conversationUUID,l=(0,i.wN)(null!=a?a:null);return(null==t?void 0:t.type)!=="within_limit"&&(null==t?void 0:t.perModelLimit)&&s!==l?{}:(null==t?void 0:t.type)==="exceeded_limit"||(null==t?void 0:t.type)==="approaching_limit"&&0===t.remaining?{exceededMessageLimitWarning:(0,r.jsx)(N,{currentModelId:s,messageLimit:t})}:(null==t?void 0:t.type)==="approaching_limit"?{approachingMessageLimitWarning:(0,r.jsx)(k,{messageLimit:t})}:{}};function N(e){let{currentModelId:t,messageLimit:n}=e,s=(0,c.Cf)(),i=(0,c.ZJ)(),a=(0,j.F)(y.n),{value:l}=(0,m.F)("model_selector_enabled"),o=f.ou.fromSeconds(n.resetsAt);return l?(0,r.jsx)(_,{currentModelId:t,messageLimit:n,children:(0,r.jsx)(S,{messageLimit:n})}):(0,r.jsxs)(b.P,{actionButton:a,children:["You are out of ",i||s?"":"free ",(0,r.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:u.pz,children:"messages"})," ","until"," ",(0,r.jsx)("span",{className:"inline-block",children:0===o.minute?o.toFormat("h a"):o.toFormat("h':'mm a")}),(0,r.jsx)(S,{messageLimit:n})]})}let k=e=>{let{messageLimit:t}=e,n=(0,j.F)(v.r),s=(0,c.rW)()?u.m7:u.pz,i=f.ou.fromSeconds(t.resetsAt);return(0,r.jsxs)(C.A,{children:[(0,r.jsxs)("span",{children:[(0,p.M0)(t.remaining,"message")," ",(0,r.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:s,children:"remaining"})," ","until"," ",(0,r.jsx)("span",{className:"inline-block",children:0===i.minute?i.toFormat("h a"):i.toFormat("h:mm a")})]}),n]})},_=e=>{let{currentModelId:t,messageLimit:n,children:i}=e,{allModelOptions:l,activeModelOptions:c}=(0,a.u)(),d=(0,o.z$)();(0,g.useEffect)(()=>{d.track({event_key:"apps.nudge_banner_shown",conversation_uuid:n.conversationUUID,banner_name:"USE_NEXT_MODEL_AFTER_LIMIT"})},[n.conversationUUID,d]);let u=l.find(e=>e.model===t),m=(null==u?void 0:u.name)||"this model",p=c.filter(e=>e.model!==t),C=p.find(e=>e.name.toLowerCase().includes("haiku"))||p.pop(),v=null==C?void 0:C.name,j=(0,g.useMemo)(()=>(0,h.H)(),[]),w=(0,s.$H)("push",j),N=f.ou.fromSeconds(n.resetsAt);return(0,r.jsxs)(b.P,{actionButton:C&&(0,r.jsxs)(y.n,{onClick:()=>{C&&(d.track({event_key:"apps.nudge_banner_clicked",conversation_uuid:n.conversationUUID,new_conversation_uuid:j,banner_name:"USE_NEXT_MODEL_AFTER_LIMIT"}),w({model:C.model}))},children:["Start ",v," chat"]}),children:["Message limit reached for ",m," until"," ",(0,r.jsxs)("span",{className:"inline-block",children:[0===N.minute?N.toFormat("h a"):N.toFormat("h:mm a"),"."]})," ",C&&(0,r.jsxs)("div",{className:(0,x.Z)("text-text-300"),children:["You may still be able to continue on ",v]}),i]})},S=e=>{let{messageLimit:t}=e,{mutate:n}=(0,l.I)(t.conversationUUID),{value:s}=(0,m.F)("can_reset_rate_limits");return s?(0,r.jsx)(d.z,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>n(),children:"Reset limits"}):null},E=e=>{var t;let{messageLimit:n,activeOrganization:r}=(0,c.t)(),s=(0,l.n)(),a=(0,i.wN)(e),o=(null==n?void 0:n.type)!=="within_limit"&&null!==(t=null==n?void 0:n.conversationUUID)&&void 0!==t?t:null,d=(0,i.wN)(o);(0,g.useEffect)(()=>{(null==r?void 0:r.uuid)&&n&&"within_limit"!==n.type&&d!==a&&s({type:"within_limit"},r.uuid,e)},[e,d,r,n,a,s])}},78011:function(e,t,n){n.d(t,{D:function(){return i},w:function(){return a}});var r=n(27573),s=n(64997);let i=1e5,a=()=>(0,r.jsx)(s.A,{className:"!justify-center",children:(0,r.jsx)("span",{className:"font-semibold",children:"Long prompts or documents may take multiple minutes to respond"})})},65899:function(e,t,n){n.d(t,{c:function(){return l},e:function(){return o}});var r=n(27920),s=n(64969),i=n(88075),a=n(48644);let l=e=>{var t,n;let{config:r}=(0,a.useConfig)("hatch_token_limits"),s=(0,i.Cf)(),l=(0,i.ZJ)(),o=r.get(e||"default",r.get("default",{}));return null!==(n=null==o?void 0:null===(t=o[s?"raven":l?"pro":"free"])||void 0===t?void 0:t.hardLimit)&&void 0!==n?n:9e4},o=e=>{let t=(0,r.wN)(e),{stickyModelPreference:n}=(0,s.M)();return l((e?t:n)||t)}},61461:function(e,t,n){n.d(t,{NuxProvider:function(){return a},s:function(){return i}});var r=n(27573),s=n(7653);let i=(0,s.createContext)(null);function a(e){let{children:t}=e,[n,a]=(0,s.useState)({items:{},currentlyShowing:null}),o=(0,s.useCallback)((e,t)=>{a(n=>{if(n.items[e])return n;let r={...n.items,[e]:t};return{items:r,currentlyShowing:l(r,!0)}})},[]),c=(0,s.useCallback)(e=>{a(t=>{let{[e]:n,...r}=t.items;return{items:r,currentlyShowing:t.currentlyShowing===e?l(r):t.currentlyShowing}})},[]),d={items:n.items,currentlyShowing:n.currentlyShowing,registerNux:o,unregisterNux:c};return(0,r.jsx)(i.Provider,{value:d,children:t})}let l=(e,t)=>{let n=Object.entries(e).sort((e,t)=>{let n=e[1].priority||0,r=t[1].priority||0;return n!==r?r-n:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var r,s;return null!==(s=null===(r=n[0])||void 0===r?void 0:r[0])&&void 0!==s?s:null}for(let[e,t]of n)if(t.showAfterOthersDismiss)return e;return null}},99172:function(e,t,n){n.d(t,{Y7:function(){return x},hK:function(){return g},qg:function(){return f}});var r=n(27573),s=n(88075),i=n(11096),a=n(64006),l=n(99694),o=n(5942),c=n(87846),d=n(96182),u=n(57908),m=n(7653),p=n(39617),h=n(27957);let x="Everyone in your organization can view and use this project",f="Only invited members can view and use this project";function g(e){var t;let{isAddingSyncSources:n=!1,syncSources:g=[],onProjectCreated:C,onError:v,onCancel:b}=e,j=(0,s.Cf)(),[y,w]=(0,m.useState)({name:"",description:"",is_private:!0}),[N,k]=(0,m.useState)({}),[_,S]=(0,m.useState)(!1),E=g.some(e=>e.type===l.Fg.GITHUB),z=g.some(e=>e.type===l.Fg.GDRIVE),{mutateAsync:L}=(0,h.Qs)(),{activeOrganization:D}=(0,s.t)(),{data:T}=(0,h.Kn)(),{account:F}=(0,s.t)(),{data:R,isLoading:O}=(0,h.O3)(),{data:A}=(0,p.KJ)(),P=A&&!n,M=null==R?void 0:R.filter(e=>{var t;return(null===(t=e.creator)||void 0===t?void 0:t.uuid)===(null==F?void 0:F.uuid)&&!e.is_starter_project}),I=!O&&(null==M?void 0:M.length)===0,U=e=>t=>{w(n=>({...n,[e]:t.target.value})),k(t=>({...t,[e]:null}))},H=e=>{w(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},G=()=>{let e={};return""===y.name.trim()&&(e.name="Project name is required"),k(e),0===Object.keys(e).length},Z=async e=>{if(e.preventDefault(),!_&&G()){S(!0);try{let e=await L(y);C(e)}catch(e){v(e)}finally{S(!1)}}};return(0,r.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>Z(e),children:[I&&(0,r.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 font-medium",children:[(0,r.jsx)(o.j,{size:16})," How to use projects"]}),j?(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{children:"和你的团队向这样使用项目："}),(0,r.jsxs)("ul",{className:"list-disc pl-4",children:[(0,r.jsx)("li",{children:"Query and analyze information about customers, sales calls, and project plans"}),(0,r.jsx)("li",{children:"Upload files from your codebase to understand, improve, and contribute"}),(0,r.jsx)("li",{children:"Generate analysis and reports from one consistent set of materials"}),(0,r.jsx)("li",{children:"Create content informed by company policies and documentation"})]}),(0,r.jsx)("p",{children:"Start by creating a memorable title and description to organize your project. You can always edit it later."})]}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("p",{children:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again."}),(0,r.jsx)("p",{children:"Start by creating a memorable title and description to organize your project. You can always edit it later."})]}),T&&(0,r.jsxs)("div",{children:["Curious to learn more?"," ",(0,r.jsx)(i.z,{variant:"underline",size:"unset",href:"/project/".concat(T),children:"Try an example project"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.oi,{name:"name",className:"w-full",label:"你想在哪方面做微调？",placeholder:"取个名字？",size:"lg",onChange:U("name"),error:!!N.name,"data-1p-ignore":!0}),N.name&&(0,r.jsx)("div",{className:"text-danger-100 mt-1 text-right text-xs font-medium",children:N.name})]}),(0,r.jsx)("div",{children:(0,r.jsx)(a.Kx,{name:"description",className:"w-full",label:"你想要存储哪方面的知识？",placeholder:"描述你的项目， 目标，主题等等",minRows:3,onChange:U("description"),error:N.description})}),j?(0,r.jsxs)("fieldset",{children:[(0,r.jsx)("div",{className:"mb-2 text-sm font-medium",children:"Visibility"}),(0,r.jsxs)("label",{className:(0,u.Z)("mb-2 flex w-full gap-2",!P&&"opacity-40"),children:[(0,r.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!y.is_private,onChange:H,disabled:!P}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)(c.$,{size:16,className:"-mt-1 mr-1 inline-block"}),null!==(t=null==D?void 0:D.name)&&void 0!==t?t:"Organization"]}),(0,r.jsx)("div",{className:"text-text-300 text-xs",children:A?n?"".concat(E&&z?"Github and GDrive":E?"Github":z?"GDrive":"Some of these"," attachments can only be added to private projects"):x:"Public projects are disabled by your organization"})]})]}),(0,r.jsxs)("label",{className:"flex w-full gap-2",children:[(0,r.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:y.is_private,onChange:H}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)(d.$,{size:16,className:"-mt-1 mr-1 inline-block"}),"私有的"]}),(0,r.jsx)("div",{className:"text-text-300 text-xs",children:f})]})]})]}):null,(0,r.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,r.jsx)(i.z,{onClick:b,href:b?void 0:"/projects",variant:"secondary",disabled:_,children:"取消"}),(0,r.jsx)(i.z,{type:"submit",loading:_,children:"创建项目"})]})]})}},39581:function(e,t,n){n.d(t,{N:function(){return _},Q:function(){return y}});var r=n(27573),s=n(86825),i=n(17886),a=n(76009),l=n(99694),o=n(75009),c=n(72500),d=n(71233),u=n(18544),m=n(57908),p=n(7653),h=n(23232),x=n(23428),f=n(15212),g=n(13789),C=n(65899),v=n(57385),b=n(15854),j=n(81885);function y(e){let{uuid:t,syncSource:n,size:d,onRemove:u,isInteractive:j=!0}=e,{mutateAsync:y}=(0,h.us)(),_=(0,x.lP)(),[S,E]=(0,p.useState)(!1),z=(0,C.e)(null),L=(0,a.ir)(null==n?void 0:n.status.state),D=(0,p.useCallback)(()=>{if(n){if(n.type&&n.status.state===l.co.UNAUTHENTICATED)_(n.type);else if(n.type===l.Fg.GITHUB)E(!0);else if(n.type===l.Fg.GDRIVE){let e=n.config;window.open((0,g.m)(e.uri),"_blank")}else throw Error("Unknown sync source type")}},[n,_]),T=(0,p.useCallback)(()=>{y(t),null==u||u()},[y,t,u]),F=!!n&&[l.co.CREATED,l.co.PENDING,l.co.UPDATING].includes(n.status.state);return!n||F?(0,r.jsx)("div",{className:"p-0.5",children:(0,r.jsx)(f.e,{isShown:!0})}):(0,r.jsxs)(s.tK,{size:d,onRemoveFile:u,isInteractive:j,children:[u&&(0,r.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,r.jsx)(s.TF,{onRemoveFile:T})}),n.type===l.Fg.GITHUB&&(0,r.jsx)(b.U,{isOpen:S,onClose:()=>E(!1),syncSource:n,tokenLimit:z}),(0,r.jsx)(i.u,{tooltipContent:L?(0,r.jsxs)("div",{className:"inline-flex gap-1 items-center",children:[k(n)," ",j&&(0,r.jsx)(o.G,{})]}):void 0,side:"bottom",children:(0,r.jsx)("div",{children:(0,r.jsxs)(s.ek,{size:d,onClick:D,isInteractive:j,classname:"group",children:[(0,r.jsx)(s.K3,{isError:L,size:d,isInteractive:j}),(0,r.jsx)("div",{className:(0,m.Z)(L?"text-text-300":"text-accent-secondary-200","pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight ",n.type===l.Fg.GITHUB&&!L&&"h-full pt-4","md"===d&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","lg"===d&&"line-clamp-4 px-3 pt-6 text-sm font-semibold"),children:L?"Content not accessible":n.type===l.Fg.GITHUB?(0,r.jsx)(w,{config:n.config}):n.type===l.Fg.GDRIVE?(0,r.jsx)(v.C,{uri:n.config.uri}):null}),(0,r.jsx)(s.PJ,{fileExtension:(0,r.jsx)(N,{type:n.type}),size:d,externalDocument:n.type===l.Fg.GDRIVE&&!L,extensionAccessory:L&&(0,r.jsxs)("div",{className:"inline-flex ml-1",children:[(0,r.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,r.jsx)(c.v,{className:"text-danger-000 ml-1.5 mr-0.5",weight:"bold",size:12})]})})]})})})]})}function w(e){let{config:t}=e;return(0,r.jsx)("div",{className:"flex flex-col gap-0.5 fade-out-bottom fade-out-right leading-tight pointer-events-none relative overflow-hidden break-words text-left tracking-tighter opacity-70 font-mono text-[0.5rem]",children:Object.entries(t.filters.filters).map(e=>{let[n,s]=e;return(0,r.jsxs)("div",{className:"inline-flex gap-1 items-center text-nowrap",children:[(0,r.jsx)("span",{children:"include"===s?(0,r.jsx)(d.f,{size:12,weight:"fill"}):(0,r.jsx)(u.S,{size:12})}),"/"===n?t.repo:n.replace(/^\/|\/$/,"")]},n)})})}function N(e){let{type:t}=e,n={[l.Fg.GDRIVE]:{variant:j.cT.DOCS,label:"DOC"},[l.Fg.OUTLINE]:{variant:void 0,label:"DOC"},[l.Fg.GITHUB]:{variant:void 0,label:"CODE"}};return(0,r.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,r.jsx)(j.j0,{className:"!text-black",type:t,size:12,variant:n[t].variant}),(0,r.jsx)("span",{className:"pt-px",children:n[t].label})]})}let k=e=>{switch(e.status.state){case l.co.DISABLED:return a.p5;case l.co.UNAUTHENTICATED:return"Sign in for access";case l.co.ACCESS_DENIED:return"Request access via ".concat(a.X_[e.type])}},_=e=>(null==e?void 0:e.status.state)!==l.co.DISABLED&&((null==e?void 0:e.status.state)===l.co.UNAUTHENTICATED||(null==e?void 0:e.status.state)!==l.co.ACCESS_DENIED||(null==e?void 0:e.type)==="gdrive")},84001:function(e,t,n){n.d(t,{$:function(){return i}});var r=n(27573),s=n(12068);function i(e){let{uri:t,isError:n,isLink:i=!1,useDocumentHook:a,getDocumentUrl:l,defaultErrorTitle:o}=e,{data:c,isLoading:d}=a({documentId:t}),u=n?(0,r.jsx)("p",{children:o}):!d&&(null==c?void 0:c.title)?(0,r.jsx)("p",{children:c.title||""}):(0,r.jsx)(s.g,{className:"opacity-25 rounded-md",height:18});return i?(0,r.jsx)("a",{href:l(t),target:"_blank",rel:"noopener noreferrer",children:u}):u}},57385:function(e,t,n){n.d(t,{C:function(){return l}});var r=n(27573),s=n(23428),i=n(13789),a=n(84001);function l(e){let{uri:t,isError:n,isLink:l=!1}=e;return(0,r.jsx)(a.$,{uri:t,isError:n,isLink:l,useDocumentHook:s.cQ,getDocumentUrl:i.m,defaultErrorTitle:"Google Docs"})}},15854:function(e,t,n){n.d(t,{U:function(){return eo}});var r=n(27573),s=n(74651),i=n(99694),a=n(7653),l=n(23232),o=n(6274),c=n(51571),d=n(11096),u=n(2965),m=n(35747),p=n(57908);let h=(0,a.forwardRef)((e,t)=>{let{checkState:n,onClick:s,...i}=e,a="partial"===n?u.W:m.J;return(0,r.jsx)("div",{className:"p-2 -m-2",onClick:e=>{e.stopPropagation(),s({didCheck:"unchecked"===n})},children:(0,r.jsx)("button",{ref:t,className:(0,p.Z)("rounded p-[0.5px] border-0.5 flex items-center justify-center transition","unchecked"!==n?"bg-accent-secondary-000 border-accent-secondary-200 shadow-sm":"border-border-200 hover:bg-bg-000 hover:shadow-sm"),...i,children:(0,r.jsx)(a,{className:(0,p.Z)("text-white transition",{invisible:"unchecked"===n}),weight:"bold",size:14})})})});h.displayName="PartialCheckbox";var x=n(41464),f=n(17886),g=n(65490),C=n(71854),v=n(36222);let b=e=>new Intl.NumberFormat().format(e);var j=n(1401),y=n(95166),w=n(67736),N=n(65903),k=n(45866),_=n(67382),S=n(18081),E=n(93240),z=n(72500),L=n(92494),D=n(6113),T=n(25318),F=n(62124),R=n(3095),O=n(20053),A=n.n(O),P=n(87659),M=n(23428);function I(e,t){if(!t.startsWith("/"))throw Error("absolute path required");let n=t;for(;null!==n;){let t=e[n];if("include"===t)return!0;if("exclude"===t)break;n=Z(n)}return!1}function U(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return I(e=G(e,t),t)&&(e={...e,[t]:"exclude"}),e}function H(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return I(e=G(e,t),t)||(e={...e,[t]:"include"}),e}function G(e,t){let n={...e};for(let r of Object.keys(e))(t.endsWith("/")&&t===r||r.startsWith(t))&&delete n[r];return n}function Z(e){if(!e.startsWith("/"))throw Error("absolute path required");if("/"===e)return null;let t=e.endsWith("/")?e.lastIndexOf("/",e.length-2):e.lastIndexOf("/");return t<=0?"/":e.slice(0,t+1)}var V=n(81885);let B="lastSelectedRepo";function K(e,t){return{name:e,path:t.endsWith("/")?t:t+"/",size:0,children:new Map}}function $(e){var t,n;let{initialConfig:s,tokenLimit:i,onSubmit:l,isSubmitting:o}=e,[c,d]=(0,a.useState)("/"),u=void 0===s,m=i*C.r6,[p,h]=(0,a.useState)(()=>{if(s)return s;let e=function(){let e=localStorage.getItem(B);if(e){var t;let n=JSON.parse(e);if(n&&"object"==typeof(t=n)&&null!==t&&"string"==typeof t.owner&&"string"==typeof t.repo&&"string"==typeof t.branch)return n}return null}();return e?{owner:e.owner,repo:e.repo,branch:e.branch,filters:{filters:{}}}:{}}),{owner:x,repo:f,branch:v,filters:b}=p,j=e=>{h({owner:x,repo:f,branch:v,filters:{filters:e}})},y=(0,a.useMemo)(()=>!A()(null==s?void 0:s.filters,b),[s,b]),{data:w,isFetching:N,error:k}=(0,M.Y$)({owner:x,repo:f,branch:v}),_=(0,a.useMemo)(()=>(function(e,t){if(!t||!e)return[];let n=[];for(let r of t.tree)"blob"===r.type&&I(e,"/"+r.path)&&n.push(r);return n})(null==b?void 0:b.filters,w.tree),[null==b?void 0:b.filters,w.tree]),S=Math.ceil(100*_.map(e=>e.size).reduce((e,t)=>e+t,0)/m),E=(0,a.useMemo)(()=>w.tree?function(e){let t={name:"",path:"/",size:0,children:new Map};for(let n of e.tree){let e=n.path.split("/"),r=e.pop(),s=t;for(let t=0;t<e.length;t++){let r=e[t];if(!s.children.has(r)){let n="/"+e.slice(0,t+1).join("/");s.children.set(r,K(r,n))}"blob"===n.type&&(s.size+=n.size),s=s.children.get(r)}"blob"===n.type?(s.children.set(r,{name:r,path:"/"+n.path,size:n.size}),s.size+=n.size):s.children.set(r,K(r,"/"+n.path))}return t}(w.tree):null,[w.tree]);(0,a.useEffect)(()=>{(null==w?void 0:w.repo)&&(null==w?void 0:w.repo.default_branch)&&!v&&h(e=>({...e,branch:w.repo.default_branch}))},[null==w?void 0:w.repo,v,h]),(0,a.useEffect)(()=>{if(x&&f&&v){var e;e={owner:x,repo:f,branch:v},localStorage.setItem(B,JSON.stringify(e))}},[x,f,v]);let[z,L]=(0,a.useState)("");return(0,r.jsxs)("div",{className:"rounded-xl border-0.5 border-border-300 bg-bg-000 shadow-sm h-[600px] flex flex-col",children:[(0,r.jsx)(J,{isCreating:u,config:p,setConfig:h,searchQuery:z,setSearchQuery:L,isSubmitting:o,percentUsed:S,onSubmit:l,areFiltersDirty:y}),N?(0,r.jsx)(W,{}):null!==k?(0,r.jsx)(q,{is404Error:k instanceof g.Hx&&404===k.statusCode}):f&&x&&v?z?(0,r.jsx)(en,{rootNode:E,searchQuery:z,filters:null!==(t=null==b?void 0:b.filters)&&void 0!==t?t:{},setFilters:j,sizeLimit:m,setCurrentDirectory:d,setSearchQuery:L}):(0,r.jsx)(et,{repo:f,rootNode:E,filters:null!==(n=null==b?void 0:b.filters)&&void 0!==n?n:{},setFilters:j,sizeLimit:m,currentDirectory:c,setCurrentDirectory:d}):(0,r.jsx)(Y,{}),(0,r.jsx)(er,{percentUsed:S,selectedPaths:_})]})}function Y(){return(0,r.jsx)("div",{className:"flex items-center justify-center h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:"Select a repository or paste a URL above to get started"})}let W=()=>(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 h-full bg-bg-000 shadow-sm text-sm text-text-300",children:[(0,r.jsx)("div",{children:(0,r.jsx)(x.g,{size:"sm"})}),"Fetching repository..."]});function q(e){let{is404Error:t}=e,{githubAppUrl:n}=(0,c.m)();return(0,r.jsx)("div",{className:"flex h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,r.jsx)("div",{className:"flex items-center gap-2 m-6",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Q,{size:16}),(0,r.jsxs)("span",{children:["Claude cannot access that resource. If you know that it exists, you may first need to grant or request access"," ",(0,r.jsx)(P.default,{href:"".concat(n,"/installations/select_target"),target:"_blank",className:"underline",children:"here"}),"."]})]}):(0,r.jsx)("span",{className:"text-danger-100",children:"An error occurred while fetching that resource. Please try again."})})})}function J(e){var t,n;let{config:s,setConfig:l,isCreating:o,isSubmitting:c,percentUsed:u,searchQuery:m,setSearchQuery:h,onSubmit:x,areFiltersDirty:f}=e,[g,C]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center py-2 min-h-14 px-4 text-sm font-styrene border-b-0.5 border-border-300",children:[(0,r.jsx)(V.j0,{size:18,type:i.Fg.GITHUB,className:"flex-shrink-0"}),!g&&(0,r.jsx)(X,{config:s,setConfig:l,isCreating:o}),(0,r.jsxs)("div",{className:"inline-flex gap-0 items-center",children:[(0,r.jsx)(Q,{isCreating:o,isExpanded:g,setIsExpanded:C,setConfig:l,className:(0,p.Z)({"flex-1 flex-shrink":o&&g})}),s.repo&&!g&&(0,r.jsx)(ee,{isExpanded:v,setIsExpanded:b,searchQuery:m,setSearchQuery:h,className:"flex-1 flex-shrink"})]}),(0,r.jsx)(F.M,{children:!g&&s.repo&&0!==Object.keys(null!==(n=null===(t=s.filters)||void 0===t?void 0:t.filters)&&void 0!==n?n:{}).length&&(o||f)&&(0,r.jsx)(R.E.div,{className:"ml-auto",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,r.jsx)(d.z,{disabled:c||u>100||!s.owner||!s.repo||!s.branch,onClick:()=>x(s),children:c?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(y.U,{className:"animate-spin"})}):o?"Add files":"Update"})})})]})}function X(e){let{config:t,setConfig:n,isCreating:s,className:i}=e,{data:l=[]}=(0,M.Mr)(),o=l.map(e=>({owner:e.owner.login,repo:e.name,branch:e.default_branch}));t.owner&&t.repo&&t.branch&&!o.some(e=>e.repo===t.repo&&e.owner===t.owner&&e.branch===t.branch)&&o.unshift({owner:t.owner,repo:t.repo,branch:t.branch});let[c,d]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{t.owner&&t.repo&&t.branch?d(JSON.stringify({owner:t.owner,repo:t.repo,branch:t.branch})):d(void 0)},[t]),(0,r.jsx)("div",{className:i,children:(0,r.jsxs)(T.fC,{value:c,onValueChange:e=>{n({...JSON.parse(e),filters:{filters:{}}}),d(e)},disabled:!s,children:[(0,r.jsxs)(T.xz,{className:(0,p.Z)("flex flex-row rounded-md border-0.5 px-2 border-border-300 py-1 items-center gap-1 text-nowrap overflow-x-hidden",{"max-w-96  pointer-cursor select-none hover:bg-bg-100 ":s,"bg-bg-100":!s}),children:[(0,r.jsx)(T.B4,{placeholder:"Select a repository"}),s&&(0,r.jsx)(T.JO,{className:"pl-1",children:(0,r.jsx)(w.p,{})})]}),(0,r.jsx)(T.h_,{children:(0,r.jsx)(T.VY,{className:"border-0.5 border-border-300 bg-bg-100 min-w-72 rounded-lg shadow-sm z-[70] mt-1 p-1 max-h-96 overflow-y-auto",position:"popper",children:(0,r.jsx)(T.l_,{className:"overflow-auto",children:o.map((e,t)=>(0,r.jsx)(T.ck,{value:JSON.stringify(e),className:(0,p.Z)("relative flex flex-row p-1.5 cursor-pointer hover:bg-bg-200 focus:outline-none focus:bg-bg-200 rounded-md"),children:(0,r.jsx)(T.eT,{children:(0,r.jsxs)("span",{className:"flex flex-row text-sm items-center ",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-text-300",children:e.owner})," ",(0,r.jsx)("span",{className:"text-text-500/50",children:"/"})," ",(0,r.jsx)("span",{className:"text-text-000",children:e.repo})]}),(!s||s&&"master"!==e.branch&&"main"!==e.branch)&&(0,r.jsxs)("span",{className:" flex flex-row font-mono text-xs text-text-300 rounded-full px-1.5 ml-2 gap-1 items-center bg-border-400/[0.03] border-border-300 border-0.5 ",children:[(0,r.jsx)(N.S,{}),e.branch]})]})})},t))})})})]})})}function Q(e){let{isCreating:t,isExpanded:n,setIsExpanded:s,setConfig:i,className:l}=e,[o,c]=(0,a.useState)(""),u=()=>{let{owner:e,repo:t,branch:n}=function(e){let t;try{t=new URL(null!=e?e:"")}catch(e){return{}}if("github.com"!==t.hostname)return{};let[,n,r,s,...i]=t.pathname.split("/");return{owner:n,repo:r,location:s,branch:i.join("/").replace(/\/$/,"")}}(o);i({owner:e,repo:t,branch:n,filters:{filters:{}}}),s(!1),c("")};return t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,p.Z)("flex flex-row gap-1 items-center text-sm px-0.5",{"border-0.5 border-border-300 rounded-md h-[29px] w-64 transition":n},l),children:[(0,r.jsx)(f.u,{tooltipContent:"Paste GitHub URL",children:!n&&(0,r.jsx)(d.z,{onClick:()=>s(!n),size:"icon_sm",variant:"ghost",disabled:n,children:(0,r.jsx)(k.a,{size:16})})}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ml-2",type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Paste GitHub URL",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&u()}}),o&&(0,r.jsx)(F.M,{children:(0,r.jsx)(R.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,r.jsx)(d.z,{onClick:u,size:"icon_xs",children:(0,r.jsx)(_.U,{})})})})]})]}),n&&(0,r.jsx)(d.z,{onClick:()=>{s(!1),c("")},size:"icon_sm",variant:"ghost",className:"ml-2",children:(0,r.jsx)(S.X,{})})]})}function ee(e){let{isExpanded:t,setIsExpanded:n,searchQuery:s,setSearchQuery:i,className:a}=e;return(0,r.jsxs)("div",{className:(0,p.Z)("flex flex-row items-center text-sm pl-0 p-1",{"border-0.5 border-border-300 rounded-md h-[29px] transition":t},a),children:[(0,r.jsx)(f.u,{tooltipContent:"Search files",children:(0,r.jsx)(d.z,{onClick:()=>n(!t),size:"icon_sm",variant:"ghost",disabled:t,children:(0,r.jsx)(E.Y,{size:"16"})})}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",placeholder:"Search files",value:s,className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ",onChange:e=>i(e.target.value),autoFocus:!0}),(0,r.jsx)(d.z,{onClick:()=>{i(""),n(!1)},size:"icon_xs",variant:"ghost",children:(0,r.jsx)(S.X,{})})]})]})}function et(e){let{repo:t,rootNode:n,filters:s,setFilters:i,sizeLimit:l,currentDirectory:o,setCurrentDirectory:c}=e,d=function(e,t){let n=t.split("/").slice(1,-1),r=e;for(let e of n){if(!r.children)return null;r=r.children.get(e)}return r}(n,o),u=(null==d?void 0:d.children)?[...d.children.values()].sort((e,t)=>e.children?t.children?e.path.localeCompare(t.path):-1:1):[],m=(0,a.useMemo)(()=>{let e=[],n=o;for(;n;){let r=n.slice(n.lastIndexOf("/",n.length-2)).slice(1,-1);e.unshift({name:r||t,path:n}),n=Z(n)}return e},[t,o]),p=d?es(d,s)?"partial":I(s,d.path)?"checked":"unchecked":"unchecked";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2 py-2 px-4 border-b-0.5 border-border-300 bg-bg-100/50 text-sm",children:[d&&(0,r.jsx)(h,{checkState:p,onClick:e=>{let{didCheck:t}=e;t?i(H(s,d.path)):i(U(s,d.path))}}),(0,r.jsx)("div",{className:"flex-row gap-1 ",children:m.map((e,t)=>{let{path:n,name:s}=e;return m.length===t+1?(0,r.jsx)("span",{children:s},t):(0,r.jsxs)("span",{className:"first-child:pointer-events-none",children:[(0,r.jsx)("button",{className:"hover:text-text-200 text-text-500 transition",onClick:()=>c(n),children:s}),t<m.length-1&&(0,r.jsx)("span",{className:"mx-1 text-text-500/50",children:"/"})]},t)})})]},"breadcrumbs")}),(0,r.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:u.map(e=>(0,r.jsx)(ei,{node:e,showPath:!1,filters:s,sizeLimit:l,onUpdateFilters:i,onClick:e.children?()=>c(e.path):void 0},e.path))},"rows")]})}function en(e){let{rootNode:t,searchQuery:n,filters:s,setFilters:i,sizeLimit:l,setCurrentDirectory:o,setSearchQuery:c}=e,d=(0,a.useMemo)(()=>{let e=[],r=[t],s=n.toLowerCase();for(;r.length>0&&e.length<50;){let t=r.pop();t.children&&r.push(...t.children.values()),t.path.toLowerCase().includes(s)&&e.push(t)}return e},[n,t]);return(0,r.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:d.slice(0,100).map(e=>(0,r.jsx)(ei,{node:e,showPath:!0,filters:s,sizeLimit:l,onUpdateFilters:i,onClick:e.children?()=>{o(e.path),c("")}:void 0},e.path))},"rows")}function er(e){let{percentUsed:t,selectedPaths:n}=e;return(0,r.jsxs)("div",{className:(0,p.Z)("flex text-xs items-center justify-between  border-border-300 border-t-0.5 py-2 px-4 rounded-b-lg transition",{"bg-danger-100 text-danger-900":t>=100},{"text-text-300":t<100}),children:[n.length&&t<100?(0,r.jsxs)("p",{children:[n.length," ",(0,v._6)(n.length,"file")," ","selected"]}):t<100?(0,r.jsx)("p",{children:"Select files to add to chat context"}):(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center ",children:[(0,r.jsx)(z.v,{className:"opacity-80",size:14}),(0,r.jsx)("p",{children:"Remove some files to stay within size limits"})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(el,{percent:t}),(0,r.jsxs)("span",{className:"min-w-10 text-right",children:[ea(t),"% of capacity used"]})]})]})}function es(e,t){if(void 0===e.children)return!1;if(I(t,e.path)){for(let n of e.children.values())if(!I(t,n.path)||es(n,t))return!0}else for(let n of e.children.values())if(I(t,n.path)||es(n,t))return!0;return!1}function ei(e){let{node:t,showPath:n,filters:s,sizeLimit:i,onUpdateFilters:a,onClick:l}=e,o=void 0!==t.children,c=I(s,t.path),d=es(t,s);return(0,r.jsxs)("div",{onClick:l,className:(0,p.Z)("group flex justify-start items-center gap-2 py-2 px-4 border-b-0.5 border-border-400 hover:bg-bg-100",{"cursor-pointer":l}),children:[(0,r.jsx)(h,{checkState:d?"partial":c?"checked":"unchecked",onClick:e=>{let{didCheck:n}=e;n?a(H(s,t.path)):a(U(s,t.path))}}),void 0===t.children?(0,r.jsx)(L.$,{weight:"light",size:20,className:"flex-shrink-0 text-text-400"}):(0,r.jsx)(D.g,{weight:"fill",className:"flex-shrink-0 text-accent-secondary-200",size:20}),(0,r.jsx)("div",{className:(0,p.Z)("w-5/6 text-text-100 overflow-x-hidden text-ellipsis text-nowrap",{"text-text-200 group-hover:text-text-000":o}),onClick:l,children:n?(e=>{let t=e.replace(/^\/+|\/+$/g,"").split("/");return(0,r.jsx)("span",{children:t.map((e,n)=>(0,r.jsxs)("span",{className:(0,p.Z)(n===t.length-1?"text-text-000":"text-text-400"),children:[e,n<t.length-1&&(0,r.jsx)("span",{className:"opacity-25 mx-1",children:"/"})]},n))})})(t.path):t.name}),(0,r.jsxs)("span",{className:"w-1/6 text-gray-500 text-xs text-right",children:[ea(100*t.size/i),"%"]})]})}function ea(e){return 0===e?"0":e<1?"<1":b(Math.ceil(e))}function el(e){let{percent:t}=e,n=t>=100;return(0,r.jsx)("div",{className:"bg-bg-100 border-0.5 border-border-300 w-24 h-2 p-[1px] items-center rounded-full",children:(0,r.jsx)("div",{style:{width:"".concat(Math.min(100,Math.max(6,t)),"%")},className:(0,p.Z)("h-full  transition-all rounded-full ",{"bg-danger-100":n,"bg-text-100":!n,invisible:0===t})})})}function eo(e){let{isOpen:t,onClose:n,onCreated:c,projectUuid:d,syncSource:u,tokenLimit:m,setIsUploadingGithubSync:p}=e,h=(0,a.useCallback)(e=>{null==c||c(e)},[c]),{mutate:x,isLoading:f}=(0,o.gr)({projectUuid:d},{onSuccess:h,onError:()=>null==p?void 0:p(!1)}),{mutate:g,isLoading:C}=(0,o.l2)({projectUuid:d},{onSuccess:n}),{mutate:v,isLoading:b}=(0,l.cE)({onSuccess:h,onError:()=>null==p?void 0:p(!1)}),{mutate:j,isLoading:y}=(0,l.P9)({onSuccess:n}),w=(0,a.useCallback)(e=>{u?(d?g:j)({sync_source_uuid:u.uuid,sync_source_config:e}):(null==p||p(!0),n(),(d?x:v)({sync_source_type:i.Fg.GITHUB,sync_source_config:e}))},[u,d,x,g,v,j,n,p]);return(0,r.jsx)(s.u_,{isOpen:t,onClose:n,title:"添加附件 from GitHub",subtitle:"Select the files you would like to add to this project",modalSize:"xl",hasCloseButton:!0,autoCloseOnFocusOut:!1,children:(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)($,{initialConfig:null==u?void 0:u.config,tokenLimit:m,isSubmitting:f||C||b||y,onSubmit:w})})})}},64965:function(e,t,n){n.d(t,{C:function(){return y}});var r=n(27573),s=n(24658),i=n(61814),a=n(64006),l=n(84115),o=n(44846),c=n(99694),d=n(44476),u=n(41220),m=n(23130),p=n(7653),h=n(23232),x=n(6274),f=n(23428);n(73567),n(88075),n(7738);var g=n(57385),C=n(81885),v=n(46840),b=n(41911);let j={includeScore:!0,threshold:.3,keys:["title"],ignoreLocation:!0},y=e=>{let{projectUuid:t,trigger:n,align:d,isSubDropdown:u=!1,setIsUploadingDriveSync:g,onCreated:C,isOpen:y,setIsOpen:N,setIsWholeDropdownOpen:k=N,shouldAddSyncUponPaste:_}=e,{value:S}=(0,o.F)("kingfisher_prefetch"),{recentDriveDocs:E,isLoading:z}=(0,f.td)(S||y),[L,D]=(0,p.useState)(""),[T,F]=(0,p.useState)(!1),[R,O]=(0,p.useState)(""),{addError:A}=(0,s.e)(),P=(0,p.useRef)(null),M=(0,p.useRef)(null),I=()=>{g(!0),F(!0)},U=e=>{null==C||C(e),k(!1),F(!1)},H=e=>{g(!1),F(!1),A((0,b.A)(e))},{mutate:G}=(0,h.cE)({onMutate:I,onSuccess:U,onError:H,meta:{noToast:!0}}),{mutate:Z}=(0,x.gr)({projectUuid:t},{onMutate:I,onSuccess:U,onError:H,meta:{noToast:!0}}),V=(0,p.useMemo)(()=>E&&L?new m.Z(E,j).search(L).map(e=>e.item):E,[E,L]),B=L?null==V?void 0:V.slice(0,7):null==E?void 0:E.slice(0,5),K=e=>{k(!1),(t?Z:G)({sync_source_type:c.Fg.GDRIVE,sync_source_config:{uri:e}})},$=e=>{let t=(0,v.g)(e);D(e);let n="";if(t)K(t);else if((0,v.k)(e))n="Only Google Docs are supported at this time";else try{new URL(e),n="Not a valid Google Doc URL"}catch(e){}O(n)};(0,l.p)({target:P,shouldFocus:y}),(0,p.useEffect)(()=>{y||(D(""),F(!1),O(""))},[y,D,F,O]);let Y=u?i.A2:i.Lt;return(0,r.jsxs)(Y,{className:"text-md w-[332px] p-0 overflow-hidden bg-bg-100",align:d,trigger:n,onKeyDown:e=>{if(!["Enter","ArrowDown","ArrowUp"].includes(e.key)){var t;null===(t=P.current)||void 0===t||t.focus()}},onFocusOutside:e=>e.preventDefault(),...u?null:{open:y,onOpenChange:N,unstyledTrigger:!0},children:[(0,r.jsx)(i.YG,{children:(0,r.jsx)(a.oi,{ref:P,value:L,placeholder:"Search recents or paste URL",className:"w-full bg-inherit border-none select-none",onChange:e=>{$(e.target.value)},onPasteCapture:e=>{if(e.stopPropagation(),!y)return;let t=e.clipboardData.getData("text"),n=(0,v.g)(t);n&&_&&K(n)},onKeyDown:e=>{if("ArrowLeft"===e.key&&L)e.stopPropagation();else if("Enter"===e.key)$(e.currentTarget.value);else if("ArrowDown"===e.key&&B&&B.length>0){var t;e.preventDefault(),null===(t=M.current)||void 0===t||t.focus()}},"data-1p-ignore":!0,autoComplete:"off",autoFocus:!0})}),(0,r.jsx)(w,{inputRef:P,firstDocumentRef:M,handleAddDocument:K,documents:B,isValidatingUrl:T,isFetchingRecentDriveDocs:z,errorMessage:R}),""]})},w=e=>{let{inputRef:t,firstDocumentRef:n,handleAddDocument:s,documents:a,isValidatingUrl:l,isFetchingRecentDriveDocs:o,errorMessage:m}=e,p=l||o&&!a.length,h=!!m,x=!p&&(!a||!a.length);return p?(0,r.jsx)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:(0,r.jsx)(d.$,{className:"animate-spin mx-auto"})}):h?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px] text-center",children:[(0,r.jsx)(u.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,r.jsx)("p",{className:"text-md text-text-400 mt-4",children:"Invalid URL"}),(0,r.jsx)("p",{className:"text-sm text-danger-200",children:m})]}):x?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-[220px]",children:[(0,r.jsx)(u.l,{size:24,className:"text-text-400",weight:"duotone"}),(0,r.jsx)("p",{className:"text-md text-text-400 mt-4",children:"No recents found"}),(0,r.jsx)("p",{className:"text-sm text-text-500",children:"Try pasting the URL instead"})]}):(0,r.jsx)("div",{className:"px-1.5 py-1",children:a.map((e,a)=>{let{uri:l,title:o}=e;return(0,r.jsxs)(i.hP,{className:"!grid-cols-[max-content_auto] hover:bg-bg-400 hover:text-text-000",ref:0===a?n:void 0,onClick:()=>s(l),onKeyDown:e=>{if("ArrowUp"===e.key&&0===a){var n;e.preventDefault(),null===(n=t.current)||void 0===n||n.focus()}},textValue:"",onPointerLeave:e=>e.preventDefault(),onPointerMove:e=>e.preventDefault(),children:[(0,r.jsx)(C.j0,{type:c.Fg.GDRIVE,variant:C.cT.DOCS,size:16}),(0,r.jsx)("span",{className:"truncate",children:null!=o?o:(0,r.jsx)(g.C,{uri:l})})]},l)})})}},81885:function(e,t,n){n.d(t,{cT:function(){return s},j0:function(){return m}});var r,s,i=n(27573),a=n(99694),l=n(72500),o=n(57908);(r=s||(s={})).DOCS="docs",r.SHEETS="sheets",r.SLIDES="slides";let c=e=>{let{size:t,className:n,variant:r}=e;return"docs"===r?(0,i.jsx)(d,{size:t,className:n}):(0,i.jsxs)("svg",{width:t,height:t,viewBox:"0 0 87.3 78",xmlns:"http://www.w3.org/2000/svg",className:n,children:[(0,i.jsx)("path",{d:"m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z",fill:"#0066da"}),(0,i.jsx)("path",{d:"m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z",fill:"#00ac47"}),(0,i.jsx)("path",{d:"m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z",fill:"#ea4335"}),(0,i.jsx)("path",{d:"m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z",fill:"#00832d"}),(0,i.jsx)("path",{d:"m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z",fill:"#2684fc"}),(0,i.jsx)("path",{d:"m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z",fill:"#ffba00"})]})},d=e=>{let{size:t}=e;return(0,i.jsxs)("svg",{width:t,height:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 88",children:[(0,i.jsx)("path",{fill:"#3086F6",d:"M58,88H6c-3.3,0-6-2.7-6-6V6c0-3.3,2.7-6,6-6h36l22,22v60C64,85.3,61.3,88,58,88z"}),(0,i.jsx)("path",{fill:"#0C67D6",d:"M42,0l22,22H42V0z"}),(0,i.jsx)("path",{fill:"#FDFFFF",d:"M50,39H14v-5h36V39z M50,46H14v5h36V46z M40,58H14v5h26V58z"})]})},u=e=>{let{color:t="currentColor",size:n,className:r}=e;return(0,i.jsx)("svg",{className:(0,o.Z)("text-text-100",r),width:n,height:n,viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fill:t,fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"})})};function m(e){let t,{type:n,size:r,className:s,variant:o,isError:d=!1}=e,m={size:r,className:s,variant:o};switch(n){case a.Fg.GITHUB:t=(0,i.jsx)(u,{...m});break;case a.Fg.GDRIVE:t=(0,i.jsx)(c,{...m});break;case a.Fg.OUTLINE:default:throw Error("Unknown sync source type")}return(0,i.jsxs)(i.Fragment,{children:[t,d&&(0,i.jsx)("div",{className:"absolute bottom-0 left-0 border-0.5 border-border-300 rounded-md m-0.5 p-0.5 bg-danger-900 text-danger-100",children:(0,i.jsx)(l.v,{size:14})})]})}},46840:function(e,t,n){n.d(t,{g:function(){return a},k:function(){return l}});let r=/docs\.google\.com\/document\/d\/([a-zA-Z0-9-_]+)/i,s=/document\/d\/([a-zA-Z0-9-_]+)/i,i=/(docs\.google\.com)|(drive\.google\.com)/i;function a(e){if(!e)return null;try{let t=new URL(e),n=!!t.toString().match(r),i=t.pathname.match(s);if(n&&i&&i[1])return i[1]}catch(e){}return null}function l(e){if(!e)return!1;try{return!!new URL(e).toString().match(i)}catch(e){}return!1}},41911:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(65490);function s(e){let t="Unable to add Google Doc.";return e instanceof r.Hx&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},13789:function(e,t,n){n.d(t,{m:function(){return r},v:function(){return s}});let r=e=>"https://docs.google.com/document/d/".concat(e),s=e=>"https://outline.ant.dev/doc/".concat(e)},2282:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(44846),s=n(48644);let i=()=>{let{layer:e}=(0,s.useLayer)("frontend"),{value:t}=(0,r.F)("artifacts_enabled");return!!t||e.get("artifacts_enabled_by_default",!1)}},38711:function(e,t,n){n.d(t,{g:function(){return r}});let r=(0,n(7653).createContext)({setOverrideSubmit:()=>!1})},86825:function(e,t,n){n.d(t,{tK:function(){return L},K3:function(){return O},PJ:function(){return P},TF:function(){return H},mB:function(){return D},eG:function(){return G},Xz:function(){return Y},ek:function(){return $},a9:function(){return K}});var r=n(85565),s=n(27573),i=n(42043),a=n(47910),l=n(11096),o=n(74651),c=n(17886),d=n(6951),u=n(62124);let m=e=>{let{isOpen:t,children:n,initialFocus:r,className:i,onClose:a}=e;return(0,s.jsx)(u.M,{children:t&&(0,s.jsx)(d.V,{open:t,onClose:a,initialFocus:r,className:i,static:!0,children:n})})};var p=n(3520);let h=e=>{if(!e.preview_asset)return!1;let{image_width:t,image_height:n}=e.preview_asset;return t<200||n<200};var x=n(36222),f=n(24550),g=n(72500),C=n(75009),v=n(26169),b=n(18081),j=n(66717),y=n(57908),w=n(3095),N=n(7653),k=n(49456),_=n(51743),S=n(80329),E=n(69309);function z(){let e=(0,r._)(["\n  rounded-md\n  overflow-hidden\n  shadow-[0_4px_32px_rgba(0,0,0,0.3),_0_0_0_0.5px_rgba(0,0,0,0.25)]\n"]);return z=function(){return e},e}let L=e=>{let{size:t,onRemoveFile:n,isInteractive:r=!0,children:i,testId:a}=e;return(0,s.jsx)(w.E.div,{"data-testid":a,className:(0,y.Z)("group relative inline-block p-0.5","xxs"!==t&&"xs"!==t&&"-mb-1",r&&"cursor-pointer","auto"===t&&"h-full w-full"),layout:"xxs"!==t&&"xs"!==t&&"lg"!==t,...!!n&&T,children:i})},D=e=>{let{file:t,size:n,showWarnings:r,onRemoveFile:i,onClick:a,isInteractive:l=!0}=e,[o,c]=(0,N.useState)(!1);if("file_kind"in t)switch(t.file_kind){case f.Y.Image:return(0,s.jsx)(F,{isPreviewOpen:o,setIsPreviewOpen:c,file:t,size:n,showWarnings:r,onRemoveFile:i,onClick:a,isInteractive:l});case f.Y.Blob:return(0,s.jsx)(M,{file:t,size:n,onRemoveFile:i,onClick:a,isInteractive:l});case f.Y.SanitizedDocument:return(0,s.jsx)(I,{file:t,size:n,onRemoveFile:i,onClick:a,isInteractive:l})}return(0,s.jsx)(U,{isPreviewOpen:o,setIsPreviewOpen:c,file:t,size:n,onRemoveFile:i,onClick:a,isInteractive:l})},T={initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:650,damping:25,mass:1,opacity:{ease:"linear",duration:.25}}},exit:{opacity:0,scale:.9,duration:.05,ease:"easeOut"}},F=e=>{let{file:t,size:n,showWarnings:r,onRemoveFile:i,onClick:l,isInteractive:o,isPreviewOpen:d,setIsPreviewOpen:u}=e,m=r&&h(t),p="lg"===n?t.preview_asset:t.thumbnail_asset,[x,g]=(0,N.useState)(!1),C=(0,a.J)(p.url),v=(0,a.J)(t.preview_asset.url),b="lg"===n?400:100,j="lg"===n?200:80,k=window.devicePixelRatio||1,_=p.image_width/k,S=p.image_height/k,E=1;return _>b&&(E=b/_),S*E>j&&(E=j/S),_*=E,S*=E,(0,s.jsxs)(w.E.div,{"data-testid":t.file_name,className:(0,y.Z)("group inline-block self-end flex-shrink-0",o&&"cursor-pointer","md"===n&&"h-20 w-28 border-border-300/20 hover:border-border-300/30 transition relative -mb-1 rounded-[0.625rem] border-2",m&&"border-warning-orange/95","lg"===n&&"rounded-lg shadow"),layout:"lg"!==n,...!!i&&T,children:[i&&(0,s.jsx)("div",{className:"absolute -top-0.5 left-0.5 z-20",children:(0,s.jsx)(H,{onRemoveFile:i})}),m&&(0,s.jsx)(R,{}),(0,s.jsx)(c.u,{tooltipContent:t.file_name,side:"bottom",children:(0,s.jsxs)("div",{className:(0,y.Z)("border-0.5 border-border-200 group-hover:border-border-100 relative overflow-hidden rounded-lg transition group-active:scale-[0.99]","md"===n&&"h-full w-full"),style:{backgroundColor:"#".concat(t.thumbnail_asset.primary_color)},children:[(0,s.jsx)(w.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:x?1:0,scale:x?1:.985,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,y.Z)("md"===n&&"h-full w-full object-cover"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",onLoad:()=>g(!0),src:C,width:_,height:S}),(0,s.jsx)("link",{rel:"preload",as:"image",href:v}),o&&(0,s.jsx)("button",{className:"absolute inset-0 z-[1]",onClick:l||(()=>u(!0)),"data-testid":"file-thumbnail"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-black/0 to-black/10"})]})}),t.file_kind===f.Y.Image&&(0,s.jsx)(G,{file:t,isOpen:d,onClose:()=>u(!1)})]})},R=()=>(0,s.jsx)(c.u,{tooltipContent:"Attach a higher resolution image for better results",side:"bottom",children:(0,s.jsx)("div",{className:"bg-warning-orange/95 text-text-100 hover:text-text-000 absolute bottom-0 right-0 z-20 rounded-ee-md rounded-ss-md p-0.5 transition",children:(0,s.jsx)(g.v,{size:16})})}),O=e=>{let{size:t,isInteractive:n=!0,isError:r=!1}=e;return(0,s.jsxs)("div",{className:(0,y.Z)("group-hover:drop-shadow-sm pointer-events-none absolute inset-0 z-0 grid grid-rows-[auto_1fr] overflow-hidden transition transition-transform duration-100",n&&"group-active:scale-[0.99]"),children:[(0,s.jsxs)("div",{className:"relative z-[1] -mb-[0.5px] flex ",children:[(0,s.jsx)("div",{className:(0,y.Z)("border-border-200/30 border-l-0.5 border-t-0.5 group-hover:border-border-200 h-full w-full bg-white transition-colors duration-100","xxs"===t&&"rounded-tl","xs"===t&&"rounded-tl-md","xxs"!==t&&"xs"!==t&&"rounded-tl-lg")}),(0,s.jsxs)("svg",{viewBox:"0 0 16 16",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",className:(0,y.Z)("block flex-shrink-0 drop-shadow","xxs"===t?"h-2 w-2":"h-4 w-4"),children:[(0,s.jsx)("path",{d:"M0 0L16 16H0V0Z",className:"stroke-border-300/10 fill-white",strokeWidth:"0.5"}),(0,s.jsx)("path",{d:"M-1 -1L17 17",className:"group-hover:stroke-border-300 transition-colors duration-100",strokeWidth:"0.5"})]})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:(0,y.Z)("border-l-0.5 border-b-0.5 border-r-0.5 border-border-200/30 group-hover:border-border-200 absolute inset-0 bg-white bg-gradient-to-b from-white from-20% transition-colors duration-100",r?"to-danger-000/20":"to-accent-secondary-200/10","xxs"===t&&"rounded-b","xs"===t&&"rounded-b-md","xxs"!==t&&"xs"!==t&&"rounded-b-lg")})})]})},A=e=>{let{file_name:t,size:n}=e;return(0,s.jsx)(s.Fragment,{children:"xxs"!==n&&"xs"!==n&&(0,s.jsx)("div",{style:{transform:"translate3d(0,0,0)"},className:(0,y.Z)("text-accent-secondary-200 pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight",("md"===n||"auto"===n)&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","lg"===n&&"line-clamp-4 px-3 pt-6 text-sm font-semibold"),children:K(t)})})},P=e=>{let{fileExtension:t,size:n,extensionAccessory:r,className:i,externalDocument:a=!1}=e;return(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("div",{className:(0,y.Z)("inline-flex max-w-full items-center transition-all",("xxs"===n||"xs"===n)&&"text-black/70 relative z-[1] pt-0.5","xxs"===n&&"text-[0.4rem] tracking-tighter","xs"===n&&"text-[0.5rem] tracking-normal",("md"===n||"lg"===n)&&"group-hover:bg-white/80 transition bg-white/90 backdrop-blur border-border-200/30 border-0.5 shadow-sm text-black/70 inline-block rounded-full px-1.5 py-[0.125rem] text-[0.625rem] tracking-normal","md"===n&&"absolute left-1/2 top-full z-10 -mt-1 -translate-x-1/2 -translate-y-1/2","lg"===n&&"relative z-[1] mb-4",i),children:[(0,s.jsx)("div",{className:"uppercase font-bold line-clamp-1 truncate",children:t}),r,a&&(0,s.jsx)(C.G,{size:12,className:"ml-1 group-hover:opacity-70 opacity-0 w-0 group-hover:w-3 scale-50 group-hover:scale-100 transition-all"})]})})},M=e=>{let{file:t,size:n,onClick:r,isInteractive:i,onRemoveFile:a}=e,[l,o]=(0,N.useState)(!1),d=t.file_name.split("."),u=d.length>1?d[d.length-1]:null,m=i?t.file_name:null,p=u?"Claude can analyze ".concat(u.toUpperCase()," files with the analysis tool."):"Claude can analyze this file with the Analysis tool.";return(0,s.jsxs)(L,{size:n,onRemoveFile:a,isInteractive:i,testId:t.file_name,children:[a&&(0,s.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,s.jsx)(H,{onRemoveFile:a})}),(0,s.jsx)(_.y,{isOpen:l,setIsOpen:o,fileName:t.file_name,fileUuid:t.file_uuid}),(0,s.jsxs)($,{size:n,onClick:r||(i?()=>o(!0):void 0),children:[(0,s.jsx)(O,{size:n}),(0,s.jsx)(A,{file_name:t.file_name,size:n}),(0,s.jsx)(c.u,{tooltipContent:m,side:"bottom",children:(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-5"})}),u&&(0,s.jsx)(P,{fileExtension:u,size:n,extensionAccessory:"lg"===n||"md"===n?(0,s.jsxs)("div",{className:"inline-flex ml-1 -my-0.5 -mr-1.5 rounded-r-full",children:[(0,s.jsx)("div",{className:"inline-block w-[0.5px] bg-black/20 rounded-b"}),(0,s.jsx)(c.u,{tooltipContent:p,side:"bottom",children:(0,s.jsx)("span",{className:"inline-flex items-center gap-1  pl-1.5 pr-2 rounded-r-full group/large transition",children:(0,s.jsx)(v.k,{weight:"bold",className:"opacity-80",size:12})})})]}):null})]})]})},I=e=>{let{file:t,size:n,onClick:r,isInteractive:i,onRemoveFile:l}=e,[o,d]=(0,N.useState)(!1),u=(0,a.J)(t.thumbnail_asset.url),m=t.file_name.split("."),p=m.length>1?m[m.length-1]:null,h=i?t.file_name:null;return(0,s.jsxs)(L,{size:n,onRemoveFile:l,isInteractive:i,testId:t.file_name,children:[l&&(0,s.jsx)("div",{className:"absolute left-1 top-1 z-10 group",children:(0,s.jsx)(H,{onRemoveFile:l})}),(0,s.jsx)(E.i,{isOpen:o,setIsOpen:d,documentFile:t}),(0,s.jsxs)($,{size:n,onClick:r||(i?()=>d(!0):void 0),children:[(0,s.jsxs)("div",{className:"absolute h-full w-full rounded-[0.625rem] mt-0.5 border-2 border-border-300/20 group-hover:border-border-300/30 transition overflow-hidden",children:[(0,s.jsx)(w.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,y.Z)("md"===n&&"h-full w-full object-cover object-top top-0 border-0.5 border-border-200 group-hover:border-border-100 transition rounded-lg"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",src:u,width:t.thumbnail_asset.image_width,height:t.thumbnail_asset.image_height}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-black/0 to-black/10"})]}),(0,s.jsx)("div",{className:"h-full w-full"}),(0,s.jsx)(c.u,{tooltipContent:h,side:"bottom",children:(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 -bottom-0"})}),p&&(0,s.jsx)(P,{fileExtension:p,size:n})]})]})},U=e=>{let{file:t,size:n,onClick:r,isInteractive:i,onRemoveFile:a,isPreviewOpen:l,setIsPreviewOpen:o}=e,d=B(t)?"Pasted Text":t.file_name,u=t.extracted_content.split("\n").length,m=i?"".concat(d," \xb7 ").concat((0,x._6)(u,"line")):null;return(0,s.jsxs)(L,{size:n,onRemoveFile:a,isInteractive:i,testId:t.file_name,children:[a&&(0,s.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,s.jsx)(H,{onRemoveFile:a})}),(0,s.jsx)(Z,{file:t,isOpen:l,onClose:()=>o(!1)}),(0,s.jsx)(c.u,{className:"text-center",tooltipContent:m,side:"bottom",children:(0,s.jsx)("div",{children:(0,s.jsxs)($,{size:n,onClick:r||(i?()=>o(!0):void 0),testId:"file-thumbnail",children:[(0,s.jsx)(O,{size:n}),B(t)?(0,s.jsx)("div",{className:(0,y.Z)("fade-out-bottom text-accent-secondary-100 pointer-events-none visible relative z-[1] h-full overflow-hidden break-words text-left leading-tight tracking-tighter opacity-70",("md"===n||"auto"===n)&&"px-3.5 pt-3.5 text-[0.5rem] font-semibold","lg"===n&&"px-3 pt-5 text-[0.5rem] font-semibold"),children:t.extracted_content.substring(0,200)}):(0,s.jsx)(A,{file_name:t.file_name,size:n}),(0,s.jsx)(P,{fileExtension:function(e){if(B(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,k.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}(t),size:n,extensionAccessory:"pdf"===t.file_type&&(0,s.jsx)(c.u,{tooltipContent:"PDF converted to text",side:"bottom",children:(0,s.jsxs)("div",{className:"inline-flex ml-1",children:[(0,s.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,s.jsx)(v.k,{className:"ml-1.5 mr-0.5",weight:"bold",size:12})]})})})]})})})]})};function H(e){let{onRemoveFile:t}=e;return(0,s.jsx)("button",{className:"border-0.5 border-border-200 text-text-500 bg-bg-000 hover:bg-danger-100 hover:text-oncolor-100 -translate-x-1/2 -translate-y-1/2 rounded-full p-1 transition hover:scale-105",onClick:t,children:(0,s.jsx)(b.X,{size:12,weight:"bold"})})}let G=e=>{let{file:t,isOpen:n,onClose:r}=e,i=(0,N.useRef)(null),o=(0,a.J)(t.preview_asset.url);return(0,s.jsxs)(m,{isOpen:n,initialFocus:i,onClose:r,className:"fixed inset-0 z-50 grid place-items-center px-3 pb-14 pt-3",children:[(0,s.jsx)(w.E.div,{onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},className:"fixed inset-0 bg-black/70 backdrop-blur-[0px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15,delay:.015}},exit:{opacity:0,transition:{opacity:{duration:.15}}}}),(0,s.jsxs)(w.E.div,{className:"relative z-20 w-full max-w-[40rem]",initial:{opacity:0,scaleY:.925,scaleX:.95,translateY:"12px"},animate:{opacity:1,scaleX:1,scaleY:1,translateY:"0px",transition:{type:"spring",stiffness:750,damping:38,opacity:{duration:.15}}},exit:{opacity:0,scale:.95,transition:{duration:.15}},children:[(0,s.jsx)(l.z,{className:"hover:!text-text-100 !ring-border-200 !absolute left-full top-0 ml-1.5 !text-white !ring-offset-0",variant:"ghost",size:"icon_sm","aria-label":"Close image preview",onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},ref:i,option:"rounded","data-testid":"close-file-preview",children:(0,s.jsx)(b.X,{size:"16"})}),(0,s.jsx)(V,{children:(0,s.jsx)("img",{loading:"eager",src:o,width:t.preview_asset.image_width,height:t.preview_asset.image_height,onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},alt:"Preview of ".concat(t.file_name),onDragStart:e=>e.preventDefault(),className:"block w-full"})}),(0,s.jsx)("div",{style:{textShadow:"0 0 8px rgba(0,0,0,0.25)"},className:"pt-1.5 text-center text-white",children:t.file_name})]})]})},Z=e=>{let{file:t,isOpen:n,onClose:r}=e,a=(0,N.useMemo)(()=>(0,i.G)(t),[t]);return(0,s.jsx)("div",{children:(0,s.jsx)(o.u_,{modalSize:"xl",isOpen:!!n,onClose:r,hasCloseButton:!0,title:a.title,subtitle:(0,s.jsx)(S.R,{showPDFWarning:"pdf"===t.file_type,metaData:a.metaData}),autoCloseOnFocusOut:!0,children:(0,s.jsx)("div",{className:"bg-bg-000 rounded-lg border-0.5 border-border-300 shadow-sm whitespace-pre-wrap break-all text-xs p-4 font-mono",children:t.extracted_content})})})},V=p.q.div(z());function B(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function K(e){let t=e.match(/\.[^/.]+$/);return t&&(0,k.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}function $(e){let{size:t,children:n,onClick:r,isInteractive:i=!0,testId:a,classname:l}=e;return(0,s.jsx)("button",{"data-testid":a,disabled:!i,className:(0,y.Z)("relative grid grid-rows-[1fr_auto] items-center","xxs"===t&&"h-7 w-[1.625rem]","xs"===t&&"h-10 w-10","md"===t&&"h-20 w-28","lg"===t&&"mt-4 h-36 w-32 drop-shadow-sm","auto"===t&&"h-full w-full",l),onClick:r,children:n})}let Y=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg bg-bg-300/80 h-36 w-56 px-6 py-3",children:[(0,s.jsx)(j.f,{size:24,className:"text-text-500"}),(0,s.jsx)("div",{className:"text-text-500 text-sm text-center mt-2",children:"Images are not supported in shared chats"})]})},51743:function(e,t,n){n.d(t,{y:function(){return h}});var r,s,i=n(27573),a=n(41464),l=n(74651),o=n(82343),c=n(40347),d=n(26169),u=n(89992),m=n(88075),p=n(49793);function h(e){let{isOpen:t,setIsOpen:n,fileName:r,fileUuid:h}=e,{data:x,isLoading:f}=function(e){let{fileUuid:t,enabled:n}=e,{activeOrganization:r}=(0,m.t)(),s=null==r?void 0:r.uuid;return(0,u.WE)("/api/organizations/".concat(s,"/files/").concat(t,"/content_preview"),{queryKey:[p.Ej,{orgUuid:s,fileUuid:t}],enabled:!!r&&n})}({fileUuid:h,enabled:t}),g=null;return g=f?(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(a.g,{size:"md"})}):x?x.file_type===s.Csv?(0,i.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,i.jsxs)("div",{className:"bg-bg-100 w-[15rem] h-[12.5rem] rounded-lg border border-border-400 mb-5",children:[(0,i.jsxs)("div",{className:"h-[2.25rem] text-text-100 font-medium border-b border-border-400 px-3 flex items-center",children:[(0,i.jsx)(c.z,{className:"mr-2",size:16}),(0,i.jsx)("div",{children:"Columns"})]}),(0,i.jsx)(o.$,{className:"h-[10.25rem] w-[15rem] pt-3 px-3 pb-1 text-text-200",children:x.column_names.map((e,t)=>(0,i.jsx)("div",{className:"truncate mb-2",children:e},t))})]}),(0,i.jsxs)("div",{className:"text-lg text-text-100 mb-2",children:[x.column_count," columns, ",x.row_count," rows"]}),(0,i.jsxs)("div",{className:"flex items-center text-text-300 text-xs",children:[(0,i.jsx)(d.k,{className:"mr-2",size:12}),(0,i.jsx)("div",{children:"Claude can analyze CSVs with the Analysis tool."})]})]}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"File previews are not supported for this file type"}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"Could not load file preview"}),(0,i.jsx)(l.u_,{isOpen:t,hasCloseButton:!0,title:r,onClose:()=>n(!1),className:"w-[40rem] h-[24rem]",modalSize:"xl",children:g})}(r=s||(s={})).Generic="generic",r.Csv="csv",r.Excel="excel"},80329:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(27573);function s(e){let{showPDFWarning:t=!1,metaData:n}=e;return(0,r.jsxs)("span",{className:"text-text-500 mb-3 mt-0.5 flex flex-wrap gap-y-2 items-start items-center text-xs",children:[(0,r.jsx)("span",{children:n}),(0,r.jsx)("span",{className:"mx-1.5 opacity-50 hidden lg:inline",children:"•"}),t?(0,r.jsx)("span",{children:"This PDF was converted to text due to its large size"}):(0,r.jsx)("span",{children:"Formatting may be inconsistent from source"})]})}},69309:function(e,t,n){n.d(t,{i:function(){return o}});var r=n(27573),s=n(47910),i=n(74651),a=n(36222),l=n(21702);function o(e){let{isOpen:t,setIsOpen:n,documentFile:o}=e,c=(0,s.J)(o.thumbnail_asset.url),d=(0,s.J)("".concat(o.document_asset.url,"/").concat(o.file_name));return(0,r.jsx)(i.u_,{isOpen:t,hasCloseButton:!0,title:o.file_name,onClose:()=>n(!1),children:(0,r.jsxs)("a",{className:"self-center group text-center",href:d,target:"_blank",children:[(0,r.jsxs)("div",{className:"w-fit rounded-lg relative m-2 mt-8",children:[(0,r.jsx)("img",{className:"bg-white rounded-lg border border-border-300 group-hover:border-accent-secondary-000/70 shadow-sm group-hover:-rotate-1 transition",alt:"".concat(o.file_name," thumbnail"),src:c,style:{width:o.thumbnail_asset.image_width/1.5,height:o.thumbnail_asset.image_height/1.5}}),(0,r.jsx)("div",{className:"absolute w-full h-full inset-0 group-hover:bg-gradient-to-t from-accent-secondary-200/5 to-60% group-hover:-rotate-1 transition rounded-lg"}),(0,r.jsx)(e=>{let{pageCount:t}=e;return t<=1?null:(0,r.jsxs)("div",{className:"*:absolute *:w-full *:bg-white *:rounded-lg *:group-hover:border-accent-secondary-100/50 *:transition-all *:border *:border-border-300",children:[(0,r.jsx)("div",{className:"h-[98%] ml-1 group-hover:ml-[5px] group-hover:rotate-2 -z-10 shadow-sm top-[1%] opacity-70"}),(0,r.jsx)("div",{className:"h-[96%] ml-2 group-hover:ml-[10px] group-hover:rotate-3 group-hover:top-[2%]  -z-20 shadow top-[2%] opacity-50"})]})},{pageCount:o.document_asset.page_count})]}),(0,r.jsxs)("div",{className:"relative text-center inline-flex items-center justify-center text-pretty gap-2 p-1 text-sm text-text-300 *:transition",children:[(0,r.jsx)("p",{className:"group-hover:opacity-0 group-hover:scale-75",children:(0,a.M0)(o.document_asset.page_count,"page")}),(0,r.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 inline-flex items-center justify-center gap-1 text-accent-secondary-000",children:[(0,r.jsx)(l.b,{size:16,weight:"fill",className:"scale-50 group-hover:scale-100 transition-all "}),(0,r.jsx)("p",{children:"Download"})]})]})]})})}},89444:function(e,t,n){n.d(t,{Bw:function(){return C},Fy:function(){return b},Lt:function(){return w},Ve:function(){return g},k7:function(){return j},ms:function(){return y}});var r=n(85565),s=n(27573),i=n(92973),a=n(3520),l=n(90930),o=n(31461),c=n(7653),d=n(1266),u=n(97490),m=n(38711);function p(){let e=(0,r._)(["\n  relative\n  p-1\n  bg-bg-100\n  rounded-md\n  overflow-hidden\n  shadow-md\n"]);return p=function(){return e},e}function h(){let e=(0,r._)(["\n ","\n"]);return h=function(){return e},e}function x(){let e=(0,r._)(["\n  ","\n  inline-block\n  ml-1\n  py-0\n  text-sm\n  italic\n"]);return x=function(){return e},e}function f(){let e=(0,r._)(["\n  ","\n  ","\n"]);return f=function(){return e},e}let g=()=>{let e=(0,l.useQuery)(["snippetConfig"],()=>{let e=localStorage.getItem("snippetConfig");return e?JSON.parse(e):[]},{initialData:[]});return{userSnippets:e.data||[],setUserSnippets:(0,c.useCallback)(t=>{let n=t;"function"==typeof t&&(n=t(e.data||[])),localStorage.setItem("snippetConfig",JSON.stringify(n)),e.refetch()},[e])}},C=e=>{let{userSnippets:t}=g();return(0,c.useMemo)(()=>[...t.filter(t=>!e.find(e=>e.label===t.label)),...e.map(e=>({label:e.label,substitution:""}))],[t,e])},v=(0,c.forwardRef)((e,t)=>{let[n,r]=(0,c.useState)(0);(0,c.useEffect)(()=>r(0),[e.items]);let a=(0,i.K)(),{setOverrideSubmit:l}=(0,c.useContext)(m.g);(0,c.useEffect)(()=>(l(!0),()=>l(!1)),[l]);let o=t=>{let n=e.items[t];n&&(a.track("snippets_suggestion_selected"),e.command({id:n.label,label:n.label}))};return(0,c.useImperativeHandle)(t,()=>({onKeyDown:t=>{let{event:s}=t;return"ArrowUp"===s.key?(r((n+e.items.length-1)%e.items.length),s.stopPropagation(),!0):"ArrowDown"===s.key?(r((n+1)%e.items.length),s.stopPropagation(),!0):"Enter"===s.key&&(o(n),!0)}})),(0,s.jsx)(N,{children:e.items.length?e.items.map((e,t)=>(0,s.jsxs)(E,{$selected:t===n,onClick:()=>o(t),children:[e.label,e.shortParamName&&(0,s.jsx)(S,{children:e.shortParamName})]},t)):(0,s.jsx)(_,{children:"No result"})})});v.displayName="SnippetList";let b=e=>{let t=C(e),n=(0,c.useRef)(t);return n.current=t,(0,c.useMemo)(()=>({items:t=>{let{query:r}=t,s=t=>{var n;let r=e.find(e=>e.label===t);return null!==(n=null==r?void 0:r.shortParamName)&&void 0!==n?n:""};return n.current.filter(e=>e.label.toLowerCase().startsWith(r.toLowerCase())).slice(0,5).map(e=>({label:e.label,shortParamName:s(e.label)}))},render:()=>{let e,t;return{onStart:n=>{n.clientRect&&(e=new o.M_(v,{props:n,editor:n.editor}),t=(0,d.ZP)("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}))},onUpdate(n){e.updateProps(n),n.clientRect&&t[0].setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var r;return"Escape"===n.event.key?(t[0].hide(),!0):(null===(r=e.ref)||void 0===r?void 0:r.onKeyDown(n))||!1},onExit(){t[0].destroy(),e.destroy()}}}}),[e])},j=e=>{let t=C(e);return(0,c.useMemo)(()=>new u.Z({codeBlockStyle:"fenced"}).addRule("snippets",{filter:e=>"SPAN"===e.nodeName&&"mention"===e.getAttribute("data-type"),replacement(e,n){var r,s;let i=null!==(r=n.getAttribute("data-id"))&&void 0!==r?r:"",a=t.find(e=>e.label===i);return null!==(s=null==a?void 0:a.substitution)&&void 0!==s?s:n.innerText}}),[t])},y="p-1 shadow-sm bg-accent-secondary-900 rounded-md",w="text-text-400 bg-bg-100 p-1 rounded-md",N=a.q.div(p()),k="\n  block\n  w-full\n  text-left\n  p-1\n",_=a.q.div(h(),k),S=a.q.div(x(),w),E=a.q.button(f(),k,e=>e.$selected&&"bg-accent-secondary-900")},42043:function(e,t,n){n.d(t,{G:function(){return i}});var r=n(27573),s=n(36222);function i(e){return{title:(()=>{if("html"===e.file_type){let t=e.extracted_content.match(/<title>(.*?)<\/title>/);return t?t[1]:e.file_name}return"paste.txt"===e.file_name?"Pasted content":e.file_name})(),metaData:(()=>{var t;let n=(0,s.M0)(e.extracted_content.split("\n").length,"line"),i=(t=e.file_size)<1048576?(t/1024).toFixed(2)+" KB":(t/1048576).toFixed(2)+" MB";if("html"===e.file_type){let t=e.file_name,s=e.file_name.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\\/\n?]+)/gim);return s&&(t=s[0].replace("www.","")),(0,r.jsxs)("span",{children:[n," ",(0,r.jsx)("span",{className:"opacity-50 mx-1",children:"•"}),t]})}return(0,r.jsxs)("span",{children:[i," ",(0,r.jsx)("span",{className:"opacity-50 mx-1",children:"•"}),n]})})()}}},57851:function(e,t,n){n.d(t,{McpProvider:function(){return f},c:function(){return x}});var r=n(27573),s=n(2275),i=n(21468),a=n(24658),l=n(89194),o=n(28294),c=n(7653),d=n(89992),u=n(88075);o.kO.shape.params;var m=n(57012);class p{start(){return this._port.onmessage=e=>{var t;null===(t=this.onmessage)||void 0===t||t.call(this,e.data)},this._port.onmessageerror=e=>{var t;null===(t=this.onerror)||void 0===t||t.call(this,Error("MessagePort message error: ".concat(e.data)))},Promise.resolve()}close(){var e;return this._port.close(),null===(e=this.onclose)||void 0===e||e.call(this),Promise.resolve()}send(e){return this._port.postMessage(e),Promise.resolve()}constructor(e){this._port=e}}let h=(0,c.createContext)({mcpClients:{},mcpTools:[],isLoading:!1,isEnabled:!1}),x=()=>{let e=(0,c.useContext)(h);return e||console.warn("useMcp being used outside of McpProvider, this is probably a bug"),e};function f(e){let{children:t}=e,[n,l]=(0,c.useState)({}),[p,x]=(0,c.useState)(!1),{addError:f}=(0,a.e)(),{tools:C,onDolphinInterrupted:v}=function(e){let{mcpClients:t}=e,[n,r]=(0,c.useState)([]),l=(0,c.useRef)(!1),d=(0,c.useRef)(null),u=(0,c.useRef)(!1),{addError:p}=(0,a.e)(),{track:h}=(0,i.z$)(),x=(0,c.useCallback)(async(e,n,r)=>{if((0,s.Rx)()&&"dolphin"===e){let e=u.current?'Claude would like to run the tool "'.concat(n.name,'" but was previously interrupted. Do you want to allow this?'):'Claude would like to run the tool "'.concat(n.name,'". Do you want to allow this?');if(l.current&&!confirm(e))return h({event_key:"mcp.tools.called",result:"disallowed",argument_count:Object.keys(r).length}),u.current=!0,{content:[{type:"text",text:"The user has chosen to disallow the tool call."}],isError:!0};d.current=Date.now(),l.current=!1}try{let s=await t[e].callTool({name:n.name,arguments:r},o.M$,{timeout:6e4});if(h({event_key:"mcp.tools.called",result:"success",argument_count:Object.keys(r).length}),"content"in s)return s;return{content:[{type:"text",text:JSON.stringify(s.toolResult,null,2)}],isError:!1}}catch(e){throw p("Failed to call tool ".concat(n.name,": ").concat(e)),h({event_key:"mcp.tools.called",result:"failure",argument_count:Object.keys(r).length}),e}},[p,t,h]);return(0,c.useEffect)(()=>{let e=!1;return async function(){if(!t)return;let n=await (0,m.k)(t,{method:"tools/list",params:{}},o.Gd);e||r(Object.entries(n).map(e=>{var t;let[n,r]=e;return h({event_key:"mcp.tools.listed",tool_count_on_server:r.tools.length}),null!==(t=r.tools.map(e=>({...e,serverName:n,callback:t=>x(n,e,t)})))&&void 0!==t?t:[]}).flat())}(),()=>{e=!0}},[x,t,h]),{tools:n,onDolphinInterrupted:(0,c.useCallback)(()=>{"number"==typeof d.current&&Date.now()<d.current+100||(l.current=!0)},[d])}}({mcpClients:n}),{track:b}=(0,i.z$)();!function(e){let{mcpClients:t}=e,{addError:n}=(0,a.e)(),{track:r}=(0,i.z$)(),{activeOrganization:s}=(0,u.t)(),l=(0,d.uC)("/api/organizations/".concat(null==s?void 0:s.uuid,"/dust/mcp_messages"),"POST",{enabled:!1,onError:()=>n("MCP sampling failed")});(0,c.useEffect)(()=>{},[!1,t,l,r])}({mcpClients:n});let j=(0,c.useCallback)(e=>{if(e.source!==window)return;let{type:t,serverName:n}=e.data;if("mcp-server-connected"!==t||!n)return;let[r]=e.ports;g(r).then(e=>{console.log("Connected to MCP server ".concat(n)),l(t=>({...null!=t?t:{},[n]:e})),"dolphin"===n&&e.setNotificationHandler(o.b5,e=>{"USER_INTERRUPT"===e.params.data&&v()}),b({event_key:"mcp.servers.connected",result:"success"})},e=>{console.error("Could not attach to MCP server ".concat(n,":"),e),f("Could not attach to MCP server ".concat(n)),b({event_key:"mcp.servers.connected",result:"failure"})})},[f,b,v]);(0,c.useEffect)(()=>{window.addEventListener("message",j);let e=!1;async function t(){var t,n;if(!(null===(t=window.claudeAppBindings)||void 0===t?void 0:t.listMcpServers)||!(null===(n=window.claudeAppBindings)||void 0===n?void 0:n.connectToMcpServer))return;let r=await window.claudeAppBindings.listMcpServers();b({event_key:"mcp.servers.listed",server_count:r.length}),e||await Promise.all(r.map(e=>window.claudeAppBindings.connectToMcpServer(e).catch(t=>{console.error("Could not connect to MCP server ".concat(e,":"),t),f("Could not connect to MCP server ".concat(e))})))}return x(!0),t().finally(()=>x(!1)),()=>{e=!0,window.removeEventListener("message",j)}},[j,f,b]);let y=(0,c.useMemo)(()=>Object.keys(n).length>0,[n]);return(0,r.jsx)(h.Provider,{value:{mcpClients:n,mcpTools:C,isLoading:p,isEnabled:y},children:t})}async function g(e){let t=new p(e),n=new l.K({name:"claude-ai",version:"0.1.0"},{capabilities:{}});return await t.start(),await n.connect(t),n}},57012:function(e,t,n){n.d(t,{k:function(){return s}});var r=n(28294);async function s(e,t,n,s){return e?Object.fromEntries((await Promise.all(Object.entries(e).map(async e=>{let[i,a]=e;try{let e=await a.request(t,n,{timeout:5e3,...s});return[i,e]}catch(e){if(e instanceof r.yp&&e.code===r.jK.MethodNotFound)return null;return console.error("Request ".concat(t.method," to ").concat(i," failed: ").concat(e)),null}}))).filter(e=>null!==e)):{}}},77611:function(e,t,n){n.d(t,{c:function(){return s}});var r=n(7653);function s(e){let{skip:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[s,i]=(0,r.useState)(0),a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t){if(!a.current){if("undefined"==typeof Worker)return;let e=new Worker(n.tu(new URL(n.p+n.u(9874),n.b)));e.onmessage=e=>i(e.data),a.current=e}return()=>{var e;null===(e=a.current)||void 0===e||e.terminate(),a.current=null}}},[t]),(0,r.useEffect)(()=>{a.current&&a.current.postMessage(e)},[e]),s}},47910:function(e,t,n){n.d(t,{J:function(){return s}});var r=n(51571);function s(e){let{frontendPrivateApiUrl:t}=(0,r.m)();return"string"!=typeof e?e:t+e}},76335:function(e,t,n){n.d(t,{b:function(){return o},h:function(){return c}});var r=n(27573),s=n(90345),i=n.n(s),a=n(7653);let l=(0,a.createContext)({isOpen:!1,activeFeatureKey:null,openModal:i(),closeModal:i(),setActiveFeatureKey:i()}),o=e=>{let{children:t}=e,[n,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null);return(0,r.jsx)(l.Provider,{value:{isOpen:n,activeFeatureKey:i,openModal:e=>{e&&o(e),s(!0)},closeModal:()=>s(!1),setActiveFeatureKey:o},children:t})},c=()=>(0,a.useContext)(l)},63240:function(e,t,n){n.d(t,{EO:function(){return o},h7:function(){return s},rE:function(){return c}});var r,s,i=n(27573),a=n(7653);(r=s||(s={})).IDLE="IDLE",r.DRAGGING_OFF_TARGET="DRAGGING_OFF_TARGET",r.DRAGGING_ON_TARGET="DRAGGING_ON_TARGET",r.DROPPED="DROPPED";let l=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useDropZone must be used within a DropZoneProvider");return e},c=e=>{let{onDrop:t,children:n,className:r,disabled:s=!1}=e,[o,c]=(0,a.useState)("IDLE"),d=a.useRef(null),u=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=d.current)||void 0===t?void 0:t.contains(e.target))?c("DRAGGING_ON_TARGET"):c("DRAGGING_OFF_TARGET")},[]),m=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=d.current)||void 0===t?void 0:t.contains(e.relatedTarget))||e.target!==document.body&&null!==e.relatedTarget||c("IDLE")},[]),p=(0,a.useCallback)(e=>{var t;(null===(t=d.current)||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),c("IDLE"))},[]),h=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),t(e),c("DROPPED"),setTimeout(()=>{c("IDLE")},500)},[t]);return(0,a.useEffect)(()=>{if(!s)return document.body.addEventListener("dragover",u),document.body.addEventListener("dragleave",m),document.body.addEventListener("drop",p),()=>{document.body.removeEventListener("dragover",u),document.body.removeEventListener("dragleave",m),document.body.removeEventListener("drop",p)};c("IDLE")},[u,m,p,h,s]),(0,i.jsx)(l.Provider,{value:{dragState:o,setDragState:c},children:(0,i.jsx)("div",{ref:d,className:r,onDrop:s?void 0:h,children:n})})}},61814:function(e,t,n){n.d(t,{A2:function(){return _},AZ:function(){return N},HF:function(){return y},Lt:function(){return f},Vy:function(){return b},WR:function(){return k},YG:function(){return g},hP:function(){return w},nI:function(){return j},u2:function(){return S}});var r=n(85565),s=n(27573),i=n(3520),a=n(19570);function l(){let e=(0,r._)(["\n  outline-none\n  py-2\n  px-1.5\n  -mx-1\n  -mt-1\n  mb-1\n  border-b-0.5\n  border-border-300\n"]);return l=function(){return e},e}function o(){let e=(0,r._)(["\n  z-50\n  bg-bg-200\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-lg\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-200\n  shadow-element\n"]);return o=function(){return e},e}function c(){let e=(0,r._)(["\n  rounded\n  py-1\n  px-2\n  max-w-full\n  whitespace-nowrap\n  text-ellipsis\n  overflow-hidden\n  outline-none\n  ring-offset-2\n  ring-offset-bg-300\n  ring-accent-main-100\n  focus-visible:outline-none\n  focus-visible:ring-1\n  focus:backdrop-blur-xl\n  hover:backdrop-blur-xl\n  hover:bg-bg-400/50\n"]);return c=function(){return e},e}function d(){let e=(0,r._)(["text-text-500 pt-1 px-2"]);return d=function(){return e},e}function u(){let e=(0,r._)(["\n  py-1\n  px-2\n  rounded-md\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-300\n  [&[data-highlighted]]:text-text-000\n  ","\n"]);return u=function(){return e},e}function m(){let e=(0,r._)(["\n  py-1\n  px-2\n  rounded-md\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  flex\n  justify-between\n  gap-2\n  items-center\n"]);return m=function(){return e},e}function p(){let e=(0,r._)(["\n  py-1\n  px-2\n  rounded\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-300\n  [&[data-highlighted]]:text-text-000\n"]);return p=function(){return e},e}function h(){let e=(0,r._)(["\n  z-50\n  bg-bg-200\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-lg\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-200\n  shadow-element\n"]);return h=function(){return e},e}function x(){let e=(0,r._)(["\n  h-[0.5px]\n  bg-border-300\n  m-1\n"]);return x=function(){return e},e}function f(e){var t;let{trigger:n,children:r,unstyledTrigger:i=!1,matchTriggerWidth:l=!1,open:o,onOpenChange:c,...d}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(a.fC,{open:o,onOpenChange:c,children:[i?(0,s.jsx)(a.xz,{asChild:!0,children:n}):(0,s.jsx)(v,{asChild:!0,children:n}),(0,s.jsx)(a.Uv,{children:(0,s.jsx)(C,{style:l?{width:"var(--radix-dropdown-menu-trigger-width)"}:void 0,sideOffset:null!==(t=d.sideOffset)&&void 0!==t?t:4,...d,children:r})})]})})}n(7653);let g=(0,i.q)(a.Ju)(l()),C=(0,i.q)(a.VY)(o()),v=(0,i.q)(a.xz)(c());a.Qk;let b=a.Tr,j=a.Uv,y=(0,i.q)(a.Ju)(d()),w=(0,i.q)(a.ck)(u(),e=>{let{disabled:t}=e;return t&&"\n    opacity-50\n    pointer-events-none\n  "}),N=i.q.div(m()),k=(0,i.q)(a.fF)(p()),_=(0,i.q)(a.tu)(h()),S=(0,i.q)(a.VD)(x())},60240:function(e,t,n){n.d(t,{X:function(){return a}});var r=n(27573),s=n(57908),i=n(3095);let a=e=>{let{label:t,checked:n,onChange:a,disabled:l=!1,hideLabel:o,className:c,testId:d,...u}=e;return(0,r.jsxs)("label",{className:"select-none inline-flex align-top items-center gap-2 cursor-pointer",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:n,onChange:()=>{},onClick:e=>{a&&a(e.currentTarget.checked,e.shiftKey)},disabled:l,...u}),(0,r.jsx)("div",{className:(0,s.Z)("w-6 h-6 overflow-hidden flex items-center justify-center border rounded transition-colors duration-100 ease-in-out peer-focus-visible:ring-1 ring-offset-2 ring-offset-bg-300 ring-accent-main-100",n?"bg-accent-secondary-000 border-accent-secondary-000":"bg-bg-000 border-border-200 hover:border-border-100",l?"opacity-50 cursor-not-allowed":"cursor-pointer",c),"data-testid":d,children:n&&(0,r.jsx)("svg",{className:"w-4 h-4 text-oncolor-100",viewBox:"0 0 20 20",fill:"none",children:(0,r.jsx)(i.E.path,{d:"M3.5 10L8 14.5L17 5.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{type:"spring",stiffness:280,damping:25}})})})]}),(0,r.jsx)("span",{className:(0,s.Z)(l?"text-text-500":"text-text-100",o&&"sr-only"),children:t})]})}},7738:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(27573),s=n(57908);function i(e){let{className:t,variant:n,...i}=e;return(0,r.jsxs)("div",{className:(0,s.Z)("relative",t),children:[(0,r.jsx)("input",{type:"checkbox",className:"peer sr-only",...i}),(0,r.jsx)("div",{className:(0,s.Z)("border-border-300 peer-focus:ring-offset-bg-300 peer h-5 w-[36px] rounded-full after:absolute after:start-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:transition-all after:content-[''] peer-checked:after:translate-x-full peer-focus:outline-none peer-focus:ring-1 peer-focus:ring-offset-2 peer-disabled:opacity-50 rtl:peer-checked:after:-translate-x-full",a[n||"default"])})]})}let a={default:"\n    bg-bg-500\n    after:border-border-300\n    after:bg-white\n    peer-focus:ring-accent-secondary-100\n    peer-checked:bg-accent-secondary-000\n    peer-checked:after:border-white\n    ",secondary:"\n    bg-bg-000\n    border\n    after:border-bg-000\n    after:bg-text-500\n    peer-focus:ring-accent-secondary-100\n    peer-checked:bg-accent-secondary-900\n    peer-checked:after:border-accent-secondary-900\n    peer-checked:after:bg-accent-secondary-100\n    "}},12068:function(e,t,n){n.d(t,{g:function(){return a}});var r=n(85565),s=n(27573);function i(){let e=(0,r._)(["\n  relative\n  bg-text-500/50\n  rounded-full\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:-translate-x-full\n  after:bg-[linear-gradient(90deg,rgba(255,255,255,0)_0,rgba(255,255,255,0.15)_20%,rgba(255,255,255,0.35)_60%,rgba(255,255,255,0))]\n  after:animate-[translate-x_1s_infinite]\n"]);return i=function(){return e},e}function a(e){let{className:t,height:n=24,width:r}=e;return(0,s.jsx)(l,{className:t,style:{height:n,width:r||"100%"},children:(0,s.jsx)("span",{className:"sr-only",children:"Loading..."})})}let l=n(3520).q.div(i())},84115:function(e,t,n){n.d(t,{p:function(){return i},x:function(){return s}});var r=n(7653);let s=()=>{let[e,t]=(0,r.useState)(!document.hidden);return(0,r.useEffect)(()=>{let e=()=>t(!document.hidden);return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),e},i=e=>{let{shouldFocus:t,target:n,delayMs:s=100}=e;(0,r.useEffect)(()=>{if(t&&n){let e=setTimeout(()=>{var e;null===(e=n.current)||void 0===e||e.focus()},s);return()=>clearTimeout(e)}},[t,n,s])}},5891:function(e,t,n){n.d(t,{V5:function(){return a},ZQ:function(){return c},r3:function(){return o},tq:function(){return s}});var r=n(7653);function s(){return window.innerWidth<640}let i=/(macintosh|macintel|macppc|mac68k|macos)/i;function a(){let e=window.navigator.userAgent.toLowerCase();return i.test(e)}let l=/(iphone|ipad|ipod|android|mobile|webos)/i;function o(){let e=window.navigator.userAgent.toLowerCase();return l.test(e)}function c(e){(0,r.useEffect)(()=>{let t=document.title;return e&&(document.title="".concat(e," - Claude")),()=>{document.title=t}},[e])}},76009:function(e,t,n){n.d(t,{X_:function(){return a},ir:function(){return s},p5:function(){return i}});var r=n(99694);let s=e=>e===r.co.ACCESS_DENIED||e===r.co.UNAUTHENTICATED||e===r.co.DISABLED,i="Your organization has turned off this integration. Please contact your administrator to re-enable.",a={[r.Fg.GDRIVE]:"Google",[r.Fg.GITHUB]:"GitHub",[r.Fg.OUTLINE]:"Outline"}}}]);