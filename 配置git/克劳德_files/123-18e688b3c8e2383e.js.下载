"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{23232:function(e,t,n){n.d(t,{P9:function(){return g},Vw:function(){return f},aP:function(){return d},cE:function(){return h},fg:function(){return p},us:function(){return m}});var a=n(89992),r=n(88075),o=n(71854),i=n(49793),l=n(99694),u=n(83056),s=n(23428),c=n(71894);let d=e=>{let{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid;return(0,a.Nl)(e.map(e=>"/api/organizations/".concat(n,"/sync/chat/").concat(e)),{queryKey:e.map(e=>[i.cF,{orgUuid:n,syncSourceUuid:e}]),enabled:!!(t&&e.length>0),refetchInterval:e=>!!(e&&(0,s.sf)(e))&&5e3,meta:{noToast:!0}})},f=e=>!!e.some(e=>e.isLoading)||e.some(e=>e.data&&(0,s.sf)(e.data)),p=e=>Math.ceil(d(e).reduce((e,t)=>{var n,a,r;return t.isLoading||!t.data?e:e+(null!==(r=null===(a=t.data)||void 0===a?void 0:null===(n=a.status)||void 0===n?void 0:n.current_size_bytes)&&void 0!==r?r:0)},0)/o.r6),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,r.t)(),o=null==t?void 0:t.uuid,d=null==n?void 0:n.uuid,f=(0,u.useQueryClient)(),p=(0,s.gb)();return(0,a.uC)(()=>"/api/organizations/".concat(d,"/sync/chat"),"POST",{enabled:!!n,...e,onSuccess:function(){for(var t,n,a,r,u,s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];let[h]=c;f.setQueryData([i.cF,{orgUuid:d,syncSourceUuid:h.uuid}],h),h.type===l.Fg.GDRIVE&&h.config.uri&&(null===(t=h.status)||void 0===t?void 0:t.extra)&&(null===(n=h.status)||void 0===n?void 0:n.current_size_bytes)&&f.setQueryData([i.Yp,{accountUUID:o,orgUUID:d,documentId:h.config.uri}],{uri:"drive:///".concat(h.config.uri),title:null===(r=h.status)||void 0===r?void 0:r.extra,size:null===(u=h.status)||void 0===u?void 0:u.current_size_bytes}),null===(a=e.onSuccess)||void 0===a||a.call(e,...c)},onError:function(){for(var t,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];null===(t=e.onError)||void 0===t||t.call(e,...a);let[o,i]=a;p(o,i),i.sync_source_type===l.Fg.GDRIVE&&(0,c.ZZ)(i.sync_source_config.uri)}})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid,o=(0,u.useQueryClient)();return(0,a.uC)(()=>"/api/organizations/".concat(n,"/sync/chat"),"PUT",{enabled:!!t,...e,onSuccess:function(){for(var t,a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];let[u]=r;o.setQueryData([i.cF,{orgUuid:n,syncSourceUuid:u.uuid}],u),null===(t=e.onSuccess)||void 0===t||t.call(e,...r)}})},m=()=>{let{activeOrganization:e}=(0,r.t)(),t=null==e?void 0:e.uuid;return(0,a.uC)(e=>"/api/organizations/".concat(t,"/sync/chat/").concat(e),"DELETE",{enabled:!!e})}},6274:function(e,t,n){n.d(t,{AQ:function(){return g},IP:function(){return f},gr:function(){return s},l2:function(){return c},yg:function(){return p},zB:function(){return d}});var a=n(89992),r=n(88075),o=n(44846),i=n(49793),l=n(83056),u=n(23428);let s=function(e){let{projectUuid:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:o}=(0,r.t)(),i=null==o?void 0:o.uuid,l=h(),s=(0,u.gb)();return(0,a.uC)(()=>"/api/organizations/".concat(i,"/projects/").concat(t,"/syncs"),"POST",{enabled:!!(o&&t),...n,onSuccess:function(){for(var e,a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];l(t),null===(e=n.onSuccess)||void 0===e||e.call(n,...r)},onError:function(){for(var e,t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];null===(e=n.onError)||void 0===e||e.call(n,...a);let[o,i]=a;s(o,i)}})},c=function(e){let{projectUuid:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:o}=(0,r.t)(),i=null==o?void 0:o.uuid,l=h();return(0,a.uC)(()=>"/api/organizations/".concat(i,"/projects/").concat(t,"/syncs"),"PUT",{enabled:!!(o&&t),...n,onSuccess:function(){for(var e,a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];l(t),null===(e=n.onSuccess)||void 0===e||e.call(n,...r)}})},d=e=>{let{projectUuid:t}=e,{activeOrganization:n}=(0,r.t)(),o=null==n?void 0:n.uuid,l=h();return(0,a.Ne)(e=>"/api/organizations/".concat(o,"/projects/").concat(t,"/syncs/").concat(e),"DELETE",(e,t)=>t?t.filter(t=>t.uuid!==e):t,{queryKey:[i.AI,{orgUuid:o,projectUuid:t}],enabled:!!n,onSuccess:()=>{l(t)}})},f=e=>{let{projectUuid:t}=e,{activeOrganization:n}=(0,r.t)(),o=null==n?void 0:n.uuid,l=h();return(0,a.Ne)(()=>"/api/organizations/".concat(o,"/projects/").concat(t,"/syncs/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.sync_source_uuids.includes(t.uuid)):t,{queryKey:[i.AI,{orgUuid:o,projectUuid:t}],enabled:!!n,onSuccess:()=>{l(t)}})},p=e=>{let{activeOrganization:t}=(0,r.t)(),{value:n}=(0,o.F)("nighthawk_enabled"),{value:l}=(0,o.F)("kingfisher_enabled"),{value:s}=(0,o.F)("spider_enabled_2"),c=null==t?void 0:t.uuid,d=(n||l||s)&&!!t&&!!e,{data:f,isLoading:p}=(0,a.WE)("/api/organizations/".concat(c,"/projects/").concat(e,"/syncs"),{queryKey:[i.AI,{orgUuid:c,projectUuid:e}],enabled:d,refetchInterval:e=>(null==e?void 0:e.some(u.sf))?5e3:3e5});return{data:f,isLoading:!!d&&p}},h=()=>{let{activeOrganization:e}=(0,r.t)(),t=null==e?void 0:e.uuid,n=(0,l.useQueryClient)();return e=>{n.invalidateQueries([i.AI,{orgUuid:t,projectUuid:e}]),n.invalidateQueries([i.Xg,{orgUuid:t,projectUuid:e}])}},g=e=>{let{data:t}=p(e);return!!(null==t?void 0:t.some(u.sf))}},58708:function(e,t,n){n.d(t,{GB:function(){return u},HK:function(){return d},KM:function(){return c},fq:function(){return s},h9:function(){return l}});var a=n(89992),r=n(88075),o=n(49793),i=n(83056);let l=()=>{let{activeOrganization:e}=(0,r.t)(),t=null==e?void 0:e.uuid;return(0,a.WE)("/api/organizations/".concat(t,"/list_styles"),{queryKey:[o.it,{orgUUID:t}]})},u=()=>{let{activeOrganization:e}=(0,r.t)(),t=null==e?void 0:e.uuid,n=(0,i.useQueryClient)();return(0,a.uC)("/api/organizations/".concat(t,"/styles/create"),"POST",{onSuccess:()=>{n.invalidateQueries([o.it,{orgUUID:t}])}})},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{activeOrganization:n}=(0,r.t)(),l=null==n?void 0:n.uuid,u=(0,i.useQueryClient)();return(0,a.uC)("/api/organizations/".concat(l,"/styles/").concat(e,"/edit"),"PUT",{onSuccess:()=>{u.invalidateQueries([o.it,{orgUUID:l}])},enabled:!t})},c=e=>{let{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid,l=(0,i.useQueryClient)();return(0,a.uC)("/api/organizations/".concat(n,"/styles/").concat(e,"/delete"),"DELETE",{onSuccess:()=>{l.invalidateQueries([o.it,{orgUUID:n}])}})},d=()=>{let{activeOrganization:e}=(0,r.t)(),t=null==e?void 0:e.uuid;return(0,a.uC)("/api/organizations/".concat(t,"/styles/preview"),"POST")}},23428:function(e,t,n){n.d(t,{E4:function(){return D},En:function(){return P},J$:function(){return N},M1:function(){return C},Mr:function(){return G},N:function(){return T},P8:function(){return M},RS:function(){return z},Y$:function(){return K},Yn:function(){return k},cQ:function(){return A},gQ:function(){return O},gb:function(){return V},hJ:function(){return w},lP:function(){return L},mD:function(){return j},nC:function(){return I},sf:function(){return Y},tc:function(){return S},td:function(){return U},vc:function(){return F},xm:function(){return B},yb:function(){return Q}});var a,r,o,i,l,u,s=n(89992),c=n(88075),d=n(24658),f=n(65490),p=n(2275),h=n(44846),g=n(49793),m=n(99694),v=n(83056),y=n(67754),_=n(7653),b=n(71894);(a=i||(i={})).PENDING="pending",a.STARTED="started",a.COMPLETED="completed",a.FAILED="failed",(r=l||(l={})).PATH_NOT_FOUND="path_not_found",r.INVALID_SHA="invalid_sha",r.SIZE_LIMIT_EXCEEDED="size_limit_exceeded",r.SOURCE_MISSING_OR_CHANGED="source_missing_or_changed",(o=u||(u={})).NOT_AUTHENTICATED="not_authenticated",o.NOT_AUTHORIZED="not_authorized",o.CAN_ACCESS="can_access";let w=e=>e.type===m.Fg.GITHUB?{sync_source_type:m.Fg.GITHUB,sync_source_config:e.config}:e.type===m.Fg.GDRIVE?{sync_source_type:m.Fg.GDRIVE,sync_source_config:e.config}:null,S=()=>{let{activeOrganization:e}=(0,c.t)(),t=null==e?void 0:e.uuid,{value:n}=(0,h.F)("nighthawk_enabled"),{value:a}=(0,h.F)("kingfisher_enabled"),{value:r}=(0,h.F)("spider_enabled_2");return(0,s.WE)("/api/organizations/".concat(t,"/sync/settings"),{queryKey:[g.FU,{orgUUID:t}],enabled:!!(e&&(n||a||r))})},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,c.t)(),n=null==t?void 0:t.uuid,{value:a}=(0,h.F)("nighthawk_enabled"),{value:r}=(0,h.F)("kingfisher_enabled"),{value:o}=(0,h.F)("spider_enabled_2"),i=(0,v.useQueryClient)();return(0,s.Ne)("/api/organizations/".concat(n,"/sync/settings"),"PUT",(e,t)=>{let{type:n,enabled:a}=e;t||(t=[]);let r=t.map(e=>e.type===n?{...e,enabled:a}:e);return r.some(e=>e.type===n)?r:[...t,{type:n,enabled:a}]},{queryKey:[g.FU,{orgUUID:n}],enabled:!!(t&&(a||r||o)),onSuccess:async function(){for(var t,a=arguments.length,r=Array(a),o=0;o<a;o++)r[o]=arguments[o];await i.invalidateQueries([g.FU,{orgUUID:n}]),await (null===(t=e.onSuccess)||void 0===t?void 0:t.call(e,...r))},meta:{errorMessage:"There was an error changing your settings. Please try again."},...e})},E=(e,t)=>{let n=new URLSearchParams(Array.from(t.entries()));n.delete(e);let a=n.toString()?"?".concat(n.toString()):"",r=window.location.pathname+a;window.history.replaceState({...window.history.state,as:r,url:r},"",r)},x=e=>{let{successParam:t,message:n,handleSuccess:a}=e,r=(0,y.useSearchParams)(),{addSuccess:o,clearToast:i}=(0,d.e)(),l=(0,_.useRef)(!1);(0,_.useEffect)(()=>{if(r.has(t)&&!l.current){l.current=!0;let e=o(n,5e3);return null==a||a(),E(t,r),()=>i(e)}},[r,o,a,i,n,t])},k=function(){let{callerIdentifier:e="",handleSuccess:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,c.t)(),a=null==n?void 0:n.uuid,r=M(),o=(0,y.useRouter)(),{data:i}=(0,s.WE)("/api/organizations/".concat(a,"/sync/github/auth"),{queryKey:[g.Os,{orgUUID:a}],enabled:!!(n&&r)}),{mutate:l}=(0,s.uC)("/api/organizations/".concat(a,"/sync/github/auth/start"),"POST",{enabled:!!(n&&r),onSuccess:e=>{o.push(e.redirect_url)}}),u="github_success_".concat(e);x({successParam:u,message:"Successfully connected to Github",handleSuccess:t});let d="".concat(window.location.pathname,"?").concat(u,"=true");return{isGithubAuthenticated:!!(null==i?void 0:i.is_authenticated),initGithubAuth:()=>{l({pre_auth_state:{origin:d}})}}},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,c.t)(),n=null==t?void 0:t.uuid,a=M(),r=(0,v.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(n,"/sync/github/auth"),"DELETE",{enabled:!!(t&&a),...e,onSuccess:function(){for(var t,a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];r.invalidateQueries([g.Os,{orgUUID:n}]),null===(t=e.onSuccess)||void 0===t||t.call(e,...o)}})},D=()=>{let{data:e}=S(),t=(0,c.Cf)(),{value:n}=(0,h.F)("kingfisher_enabled"),a=!!(null==e?void 0:e.find(e=>e.type===m.Fg.GDRIVE&&e.enabled));return!!(n&&(!t||a))},I=function(){let{callerIdentifier:e,handleSuccess:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:a}=(0,c.t)(),r=null==n?void 0:n.uuid,o=null==a?void 0:a.uuid,i=D(),l=(0,y.useRouter)(),u=(0,v.useQueryClient)(),{data:d}=(0,s.WE)("/api/organizations/".concat(o,"/sync/mcp/drive/auth"),{queryKey:[g.Yw,{accountUUID:null==n?void 0:n.uuid,orgUUID:o}],enabled:i,staleTime:3e5}),f="gdrive_success_".concat(null!=e?e:"");x({successParam:f,message:"Successfully connected to Google Drive",handleSuccess:t});let{mutate:h}=(0,s.uC)("/api/organizations/".concat(o,"/sync/mcp/drive/auth/start"),"POST",{enabled:i,onSuccess:e=>{l.push(e.redirect_url)}});return{isDriveAuthenticated:!!(null==d?void 0:d.is_authenticated),initDriveAuth:()=>{let e="".concat(window.location.pathname,"?").concat(f,"=true");if((0,p.Rx)()){let t=window.location.pathname,n=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,a=t.startsWith("/project/")&&n.test(t.slice(9)),r=t.startsWith("/chat/")&&n.test(t.slice(6));e="claude://claude.ai".concat(a||r||"/new"===t?t:"/new","?").concat(f,"=true")}else e="".concat(window.location.pathname,"?").concat(f,"=true");u.invalidateQueries([g.Yw,{accountUUID:r,orgUUID:o}]),h({pre_auth_state:{origin:e},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()})}}},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,c.t)(),a=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid,o=D(),i=(0,v.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(r,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(n&&o),...e,onSuccess:function(){for(var t,n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];i.invalidateQueries([g.Yw,{accountUUID:a,orgUUID:r}]),null===(t=e.onSuccess)||void 0===t||t.call(e,...o)}})},A=e=>{let{documentId:t}=e,{account:n,activeOrganization:a}=(0,c.t)(),r=null==n?void 0:n.uuid,o=null==a?void 0:a.uuid,i=D(),l=(0,v.useQueryClient)(),u=(0,s.WE)("/api/organizations/".concat(o,"/sync/mcp/drive/document/").concat(t),{queryKey:[g.Yp,{accountUUID:r,orgUUID:o,documentId:t}],enabled:i,meta:{noToast:!0}}),d=u.isError;return(0,_.useEffect)(()=>{d&&l.invalidateQueries([g.Yw,{accountUUID:r,orgUUID:o}])},[l,d,r,o]),u},j=e=>{let{activeOrganization:t}=(0,c.t)(),n=null==t?void 0:t.uuid,a=D();return(0,s.Nl)(e.map(e=>"/api/organizations/".concat(n,"/sync/mcp/drive/document/").concat(e)),{queryKey:e.map(e=>[g.Yp,{orgUUID:n,documentId:e}]),enabled:a,meta:{noToast:!0}})},U=e=>{let{account:t,activeOrganization:n}=(0,c.t)(),a=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid,o=D(),i=(0,b.F7)(),{data:l,isSuccess:u,isLoading:d}=(0,s.WE)("/api/organizations/".concat(r,"/sync/mcp/drive/recents"),{queryKey:[g.s8,{accountUUID:a,orgUUID:r}],enabled:e&&o,meta:{noToast:!0}});return(0,_.useEffect)(()=>{if(u&&l){let e=l.map(e=>{let{uri:t,title:n}=e;return{uri:t,title:n}});(0,b.MU)(e)}},[u,l]),{recentDriveDocs:u?l:i,isLoading:d}},O=e=>{let{documentId:t}=e,{account:n,activeOrganization:a}=(0,c.t)(),r=null==n?void 0:n.uuid,o=null==a?void 0:a.uuid,i=N();return(0,s.WE)("/api/organizations/".concat(o,"/sync/mcp/outline/document/").concat(t),{queryKey:[g.q2,{accountUUID:r,orgUUID:o,documentId:t}],enabled:i})},z=e=>{let{account:t,activeOrganization:n}=(0,c.t)(),a=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid,o=N();return(0,s.Nl)(e.map(e=>"/api/organizations/".concat(r,"/sync/mcp/outline/document/").concat(e)),{queryKey:e.map(e=>[g.q2,{accountUUID:a,orgUUID:r,documentId:e}]),enabled:o,meta:{noToast:!0}})},N=()=>{let{data:e}=S();return!1},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,c.t)(),a=null==n?void 0:n.uuid,r=N(),{data:o,refetch:i}=(0,s.WE)("/api/organizations/".concat(a,"/sync/mcp/outline/auth"),{queryKey:[g.Sp,{accountUUID:null==t?void 0:t.uuid,orgUUID:a}],enabled:!!(n&&r),staleTime:5e3}),{mutate:l,isLoading:u}=(0,s.uC)("/api/organizations/".concat(a,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(n&&r),...e,onSuccess:function(){for(var t,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];null===(t=e.onSuccess)||void 0===t||t.call(e,...a)}});return{isOutlineAuthenticated:!!(null==o?void 0:o.is_authenticated),refetch:i,initOutlineAuth:l,isLoadingOutlineAuthInit:u}},Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,c.t)(),a=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid,o=N(),i=(0,v.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(r,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(n&&o),...e,onSuccess:function(){for(var t,n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];i.invalidateQueries([g.Sp,{accountUUID:a,orgUUID:r}]),null===(t=e.onSuccess)||void 0===t||t.call(e,...o)}})},R=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/profile?redirect_url=".concat(e,"&open_outline_auth=true")},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initGithubAuth:t}=k(e),{initDriveAuth:n}=I(e);return e=>{e===m.Fg.GITHUB?t():e===m.Fg.GDRIVE?n():e===m.Fg.OUTLINE&&R()}},M=()=>{let{data:e}=S();return!!(null==e?void 0:e.find(e=>e.type===m.Fg.GITHUB&&e.enabled))},G=()=>{let{activeOrganization:e}=(0,c.t)(),t=null==e?void 0:e.uuid,n=M();return(0,s.WE)("/api/organizations/".concat(t,"/sync/github/repos"),{queryKey:[g.wD,{orgUUID:t}],enabled:!!(e&&n),meta:{noToast:!0}})},H=e=>{let{owner:t,repo:n,branch:a}=e,{activeOrganization:r}=(0,c.t)(),o=null==r?void 0:r.uuid,i=M(),l=new URLSearchParams({owner:null!=t?t:"",repo:null!=n?n:""}).toString();return(0,s.WE)("/api/organizations/".concat(o,"/sync/github/repo?").concat(l),{queryKey:[g.Rz,{orgUUID:o,owner:t,repo:n}],enabled:!!(t&&n&&!a&&r&&i),meta:{noToast:!0}})},q=e=>{let{owner:t,repo:n,branch:a}=e,{activeOrganization:r}=(0,c.t)(),o=null==r?void 0:r.uuid,i=M();return(0,s.WE)("/api/organizations/".concat(o,"/sync/github/repo/").concat(t,"/").concat(n,"/tree/").concat(a),{queryKey:[g.E0,{orgUUID:o,owner:t,repo:n,branch:a}],enabled:!!(t&&n&&a&&r&&i),meta:{noToast:!0}})},K=e=>{var t;let{owner:n,repo:a,branch:r}=e,o=H({owner:n,repo:a,branch:r}),i=q({owner:n,repo:a,branch:r||(null===(t=o.data)||void 0===t?void 0:t.default_branch)});return{data:{repo:o.data,tree:i.data},isFetching:o.isFetching||i.isFetching,error:o.error||i.error}},W=e=>[m.co.CREATED,m.co.PENDING,m.co.UPDATING].includes(e),Y=e=>W(e.status.state),B=e=>[m.co.FAILED,m.co.UPDATE_FAILED].includes(e.status.state),J=e=>{if(e instanceof f.Hx)return e instanceof f.Hx&&401===e.statusCode&&"authentication_error"===e.type},V=()=>{let{addError:e}=(0,d.e)(),t=(0,v.useQueryClient)();return(n,a)=>{J(n)&&(e("Please try again. You may need to reconnect with your ".concat(m.hP[a.sync_source_type]," account.")),g.Su.forEach(e=>{t.invalidateQueries({queryKey:[e]})}),t.invalidateQueries({queryKey:[g.cF]}))}}},50987:function(e,t,n){n.d(t,{x:function(){return w},r:function(){return b}});var a=n(27573),r=n(98635),o=n(64969),i=n(89992),l=n(7653),u=n(23232),s=n(48970),c=n(6274),d=n(95950),f=n(51087),p=n(12063),h=n(74293),g=n(79373),m=n(20504);let v=e=>!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||"true"===e.getAttribute("contenteditable")||"textbox"===e.getAttribute("role")),y=e=>{let t=(0,l.useCallback)(t=>{if(!(!e||v(document.activeElement))&&1===t.key.length&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n;t.preventDefault(),null===(n=e.getEditor())||void 0===n||n.chain().insertContent(t.key).focus().run()}},[e]);(0,l.useEffect)(()=>(document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)),[t])},_=l.createContext({attachments:[],files:[],syncSourceUuids:[],isAtMaxNumUploads:!1,model:"",prompt:"",projectUuid:void 0,isChatSyncing:!1,personalizedStyle:void 0,isProjectSyncing:!1,isProjectLocked:!1,isSending:!1,setPrompt:()=>void 0,setAttachments:()=>void 0,setFiles:()=>void 0,setSyncSourceUuids:()=>void 0,setModel:()=>Promise.resolve(),setProjectUuid:()=>void 0,sendMessage:()=>void 0,stopSampling:()=>void 0,conversation:void 0,focusInput:()=>void 0,isFocused:!1,setIsFocused:()=>void 0,promptInputRef:{current:null},willRedirectOnSubmit:!1,hasBlockingWarning:!1,setHasBlockingWarning:()=>void 0,setPersonalizedStyle:()=>void 0,isUploadingDriveSync:!1,isUploadingGithubSync:!1,setIsUploadingDriveSync:()=>void 0,setIsUploadingGithubSync:()=>void 0,includeProfilePreferences:!0,setIncludeProfilePreferences:()=>void 0}),b=()=>l.useContext(_),w=e=>{var t,n;let v=(0,l.useRef)(null),b="conversation"in e,{children:w,projectUuid:S,namespace:C}=e,E=b?e.conversation:void 0;y(v.current);let{input:x,setInput:k,attachments:T,setAttachments:D,files:I,setFiles:P,syncSourceUuids:A,setSyncSourceUuids:j,clear:U}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=n?"".concat(n,":"):"",[r,o,i]=(0,m.Rr)("".concat(a).concat(e,":attachment"),[]),[u,s,c]=(0,m.Rr)("".concat(a).concat(e,":files"),[]),[d,f,p]=(0,m.Rr)("".concat(a).concat(e,":syncSourceUuids"),[]),[h,g,v]=(0,m.Rr)("".concat(a).concat(e,":textInput"),t);return{attachments:r,setAttachments:o,files:u,setFiles:s,syncSourceUuids:d,setSyncSourceUuids:f,input:h,setInput:g,clear:(0,l.useCallback)(()=>{v(),i(),c(),p()},[i,v,c,p])}}(null!==(t=null==E?void 0:E.id)&&void 0!==t?t:void 0===S?"new-conversation":"".concat(S,":conversation"),"",C),O=(0,u.aP)(A),z=(0,u.Vw)(O),N=(0,i.Wk)(O),F=T.length+I.length+A.length>=r.Qe,[Q,R]=l.useState(null==E?void 0:E.model),{stickyModelPreference:L}=(0,o.M)();(0,l.useEffect)(()=>{!Q&&L&&R(L)},[L,Q,R]);let[M,G]=l.useState(S),H=(0,c.AQ)(M),[q,K]=l.useState(!1),[W,Y]=l.useState(!1),[B,J]=l.useState(!1),[V,Z]=l.useState(!1),{storedStyle:X,defaultStyle:$}=(0,g.O)(),[ee,et]=l.useState(),[en,ea]=l.useState(!0);(0,l.useEffect)(()=>{let e=null!=X?X:$;!ee&&e&&et(e)},[X,$,ee]);let er="setPersonalizedStyleCallback"in e?e.setPersonalizedStyleCallback:null;(0,l.useEffect)(()=>{null==er||er(ee)},[ee,er]);let{projectHasHarmony:eo}=(0,d.Y)(M),{openedFiles:ei,projectDocs:el,projectUuid:eu}=(0,f.b)(),{getInstance:es}=(0,h.s)(),{mutateAsync:ec}=(0,s.u3)({projectUuid:eu}),{mutateAsync:ed}=(0,s.Zy)({projectUuid:eu}),ef=async()=>{if(v.current&&(""!==x.trim()||0!==T.length||0!==I.length||0!==A.length)){U(),e.willRedirectOnSubmit?v.current.setEditable(!1):v.current.setContent(""),K(!0),eo&&await (null===p.ec||void 0===p.ec?void 0:(0,p.ec)(ei,eu,el,ec,ed,es));try{b?await e.onSend({prompt:x,attachments:T,files:I,syncSources:N,personalized_style:ee}):await e.onCreate({prompt:x,attachments:T,files:I,syncSources:N,model:Q,project_uuid:M,personalized_style:ee,include_conversation_preferences:en})}catch(e){var t;k(x),null===(t=v.current)||void 0===t||t.setContent(x),D(T),P(I),j(A),v.current.setEditable(!0)}finally{K(!1)}}},ep=async t=>{if(R(t),b){K(!0);try{await e.onCreate({prompt:x,attachments:T,files:I,syncSources:N,model:t,project_uuid:M})}finally{K(!1)}}},[eh,eg]=l.useState(!1);return(0,a.jsx)(_.Provider,{value:{prompt:x,attachments:T,files:I,syncSourceUuids:A,isAtMaxNumUploads:F,isUploadingDriveSync:B,isUploadingGithubSync:V,model:Q,projectUuid:M,isChatSyncing:z,personalizedStyle:ee,isProjectSyncing:H,isProjectLocked:void 0!==S||void 0!==E,isSending:q,setPrompt:function(e){let{forceUpdateTiptap:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(k(e),!0===t){var n;null===(n=v.current)||void 0===n||n.setContent(e)}},setAttachments:e=>D(e),setFiles:e=>P(e),setSyncSourceUuids:e=>j(e),setModel:ep,setProjectUuid:G,sendMessage:ef,stopSampling:()=>{b&&e.onStopSampling()},conversation:E,focusInput:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.focus()},isFocused:W,setIsFocused:Y,promptInputRef:v,willRedirectOnSubmit:null!==(n=e.willRedirectOnSubmit)&&void 0!==n&&n,hasBlockingWarning:eh,setHasBlockingWarning:eg,setPersonalizedStyle:et,setIsUploadingDriveSync:J,setIsUploadingGithubSync:Z,includeProfilePreferences:en,setIncludeProfilePreferences:ea},children:w})}},79373:function(e,t,n){n.d(t,{O:function(){return l},g:function(){return i}});var a=n(20504),r=n(44846),o=n(58708);let i=(e,t)=>"default"===e.type&&e.key===t||"custom"===e.type&&e.uuid===t,l=()=>{let{value:e}=(0,r.F)("concise_mode_enabled"),{data:t,isLoading:n}=(0,o.h9)(),l=(null==t?void 0:t.defaultStyles)||[],u=[...l,...(null==t?void 0:t.customStyles)||[]],[s,c,d]=(0,a.Rr)("claude_personalized_style",null);if(n||!(null==u?void 0:u.length))return{personalizedStyleOptions:[],defaultStyle:null,storedStyle:null,setStoredStyle:c,clearStoredStyle:d,conciseModeEnabled:e};let f=l.length?l.find(e=>!0===e.isDefault)||l[0]:null;if(e&&(f=l.find(e=>"Concise"===e.key)||f),!s)return{personalizedStyleOptions:u,defaultStyle:f,storedStyle:s,setStoredStyle:c,clearStoredStyle:d,conciseModeEnabled:e};let p=u.find(e=>i(e,s.styleKey)),h=Date.now()-new Date(s.timestamp).getTime()>432e5;return{personalizedStyleOptions:u,storedStyle:p&&!h?p:null,defaultStyle:f,setStoredStyle:c,clearStoredStyle:d,conciseModeEnabled:e}}},71894:function(e,t,n){n.d(t,{F7:function(){return i},MU:function(){return o},ZZ:function(){return l}});let a="recentDriveDocs";function r(e){return"object"==typeof e&&null!==e&&"string"==typeof e.uri&&("string"==typeof e.title||void 0===e.title)}function o(e){localStorage.setItem(a,JSON.stringify(e))}function i(){let e=localStorage.getItem(a);if(e){let t=JSON.parse(e);if(t&&Array.isArray(t)&&t.every(r))return t}return[]}function l(e){let t=i();o(t=t.filter(t=>t.uri!==e))}},98635:function(e,t,n){n.d(t,{Ch:function(){return T},Qe:function(){return E},Qt:function(){return j},Vn:function(){return N},kS:function(){return I},sE:function(){return A}});var a=n(85565),r=n(27573),o=n(89992),i=n(88075),l=n(24658),u=n(92973),s=n(17886),c=n(3520),d=n(65490),f=n(71854),p=n(44846),h=n(36222),g=n(95166),m=n(27222),v=n(13623),y=n(7653),_=n(49456),b=n(27920),w=n(23489),S=n(34016);function C(){let e=(0,a._)(["\n  relative\n  grid\n  place-content-center\n  aspect-square\n  rounded-xl\n  cursor-pointer\n  transition\n  [fieldset:not(:disabled)_&]:hover:bg-bg-400\n  [fieldset:disabled_&]:opacity-50\n  [fieldset:disabled_&]:pointer-events-none\n  focus-within:ring\n  inline-flex\n  items-center\n  justify-center\n  relative\n  shrink-0\n  ring-offset-2\n  ring-offset-bg-300\n  ring-accent-main-100\n  focus-visible:outline-none\n  focus-visible:ring-1\n  disabled:pointer-events-none\n  disabled:opacity-50\n  disabled:shadow-none\n  disabled:drop-shadow-none\n  bg-[radial-gradient(ellipse,_var(--tw-gradient-stops))]\n  from-bg-500/10\n  from-50%\n  to-bg-500/30\n  border-0.5\n  border-border-400\n  font-medium\n  font-styrene\n  text-text-100/90\n  transition-colors\n  active:bg-bg-500/50\n  hover:text-text-000\n  hover:bg-bg-500/60\n"]);return C=function(){return e},e}let E=5,x=e=>{let t=e.webkitRelativePath;return t&&t.length?t:e.name},k=e=>e.replace(/\0/g,""),T=e=>{e.extracted_content=k(e.extracted_content),e.file_name=k(e.file_name),e.file_type=k(e.file_type)},D=(e,t)=>({file_name:x(e),file_type:e.type,file_size:e.size,extracted_content:t});function I(e){let{syncSourceCount:t,files:n,setFiles:a,numExistingConversationFiles:o,attachments:i,setAttachments:u,numExistingConversationAttachments:c,detectSameAttachment:d,selectedModel:f,blobFileUploadsEnabled:p}=e,{addError:v}=(0,l.e)(),S=(0,b.wN)(null);return function(e){let{syncSourceCount:t,onUploadComplete:n,existingAttachments:a,existingFiles:o,numExistingConversationAttachments:i,numExistingConversationFiles:l,selectedModel:u,blobFileUploadsEnabled:c}=e,{modelConfig:d}=(0,w.V)(u),f=d.image_in,[p,v,b,S]=function(e){let{syncSourceCount:t,onUploadComplete:n,existingAttachments:a,existingFiles:r,numExistingConversationFiles:o,selectedModel:i,blobFileUploadsEnabled:l}=e,{modelConfig:u}=(0,w.V)(i),s=u.image_in,c=L()&&u.pdf_in,{isUploading:d,setIsUploading:f,handleError:p,handleUpload:g}=N({imagesEnabled:s,blobFileUploadsEnabled:l,onUploadComplete:n,rasterizePdfUploadsEnabled:c}),m=(0,y.useCallback)(e=>{let{newUploads:n=[],numNewPotentialAttachments:i=0,showError:u=!0}=e,{attachmentUploads:d,imageUploads:f,rasterizedDocumentUploads:g,outOfContextFileUploads:m}=(0,_.Jw)(n,{imagesEnabled:s,blobFileUploadsEnabled:l,rasterizePdfUploadsEnabled:c});return i+d.length+f.length+g.length+m.length+a.length+r.length+t>E?(u&&p("You can add at most ".concat((0,h.M0)(E,"attachment")," to a message. Please select fewer attachments.")),!1):!(f.length+g.length+r.length+o>100)||(u&&p("You can add at most ".concat((0,h.M0)(100,"file")," to a chat. ").concat(o<100?"Please select fewer files.":"Please consider starting a new chat.")),!1)},[s,l,a,r,t,o,p,c]);return[d,f,m,(0,y.useCallback)(async e=>{m({newUploads:e})&&await g(e)},[g,m])]}({syncSourceCount:t,onUploadComplete:n,existingFiles:o,existingAttachments:a,numExistingConversationFiles:l,numExistingConversationAttachments:i,selectedModel:u,blobFileUploadsEnabled:c}),C=function(e){let{handleUpload:t}=e,n=(0,y.useRef)({ready:0,total:0}),a=(0,y.useCallback)(()=>{n.current={ready:0,total:0}},[]),r=(0,y.useCallback)(e=>{n.current.ready+=1,n.current.total===n.current.ready&&t(e)},[t]),o=(0,y.useCallback)((e,t)=>{let a=e.length;for(let i=0;i<a;i++){let a=e[i];a.isFile?(n.current.total+=1,a.file(e=>{t.push(e),r(t)})):a.isDirectory&&a.createReader().readEntries(e=>{o(e,t)})}},[r]);return(0,y.useCallback)(e=>{var t;e.preventDefault(),a();let n=null===(t=e.dataTransfer)||void 0===t?void 0:t.items;if(!n)return;let r=[];for(let e=0;e<(null==n?void 0:n.length);e++){let t=n[e].webkitGetAsEntry();t&&r.push(t)}o(r,[])},[o,a])}({handleUpload:S}),x=(0,y.useCallback)(async e=>{await S(Array.from(e))},[S]),k=(0,y.useCallback)(async e=>{let t=e.target.files;t&&await S(Array.from(t)),e.target.value=""},[S]),T=f?"Upload docs or images to Claude\n(Max ".concat(E,", 30mb each)"):"添加附件 (".concat(E," max, 30mb each)\nAccepts pdf, txt, csv, etc."),D={type:"file",accept:(0,_.tB)({imagesEnabled:f}).join(","),onChange:e=>{k(e)},multiple:!0,"aria-label":"Upload files"};return[p,v,b,C,x,S,(0,r.jsx)(s.u,{className:"text-center",tooltipContent:T,children:(0,r.jsxs)(F,{children:[(0,r.jsx)("input",{"data-testid":"file-upload",className:"absolute inset-0 -z-10 overflow-hidden rounded-xl opacity-0",...D}),p?(0,r.jsx)(g.U,{className:"animate-spin",size:18}):(0,r.jsx)(m.p,{size:18,weight:"light"})]})},"upload-tooltip"),D]}({syncSourceCount:t,onUploadComplete:(0,y.useCallback)(async(e,t)=>{d&&e.find(e=>d(e.extracted_content))&&v("The same attachment was already added earlier. Claude sees the full conversation when replying, so there’s no need to re-upload."),u(t=>[...t,...e]),a(e=>[...e,...t])},[u,d,v,a]),existingAttachments:i,existingFiles:n,numExistingConversationAttachments:c,numExistingConversationFiles:o,selectedModel:null!=f?f:S,blobFileUploadsEnabled:p})}let P=async(e,t,n)=>{let a=new Image;if(a.src=URL.createObjectURL(e),await new Promise(e=>{a.onload=e,setTimeout(e,250)}),!a.width||!a.height||"image/png"!==e.type&&a.width<=t&&a.height<=n)return e;let r=a.width/a.height,o=a.width,i=a.height;a.width>t&&(i=(o=t)/r),i>n&&(o=(i=n)*r);let l=document.createElement("canvas");l.style.display="none",document.body.appendChild(l);let u=l.getContext("2d");if(!u||!u.imageSmoothingQuality)return document.body.removeChild(l),e;u.imageSmoothingQuality="high",l.width=o,l.height=i,u.drawImage(a,0,0,o,i);let s=await new Promise(e=>{l.toBlob(t=>e(t),"image/webp",.85)});return(document.body.removeChild(l),s)?new File([s],e.name,{type:"image/webp"}):e},A=()=>{let{value:e}=(0,p.F)("use_canvas_resize");return(0,y.useCallback)(async t=>e?await P(t,2e3,2e3):t,[e])},j=()=>{let e=R(),t=O();return async(n,a,r)=>{try{return await t(n,a,r)}catch(t){e(t,(0,_.Wr)(n)?"image":"file")}}},U=e=>{let t=R(),n=O(),a=(0,o.OJ)();return async(r,o)=>{let i={};try{i.file=await n(r,o)}catch(n){n instanceof d.Hx&&"document_too_many_pages"===n.errorCode?i.attachment=await Q(a,r,o,e):t(n,"document")}return i}},O=()=>{let e=(0,o.OJ)();return async(t,n,a)=>{let r=new FormData;r.append("file",t);let o=a?"/api/organizations/".concat(n,"/projects/").concat(a,"/upload"):"/api/".concat(n,"/upload"),i=await e(o,{method:"POST",body:r}),l=await i.json();if(i.ok)return l;throw(0,d.fT)(i.status,l,"File upload failed",i.headers)}},z=async(e,t,n,a)=>{let r;let o=new FormData;o.append("file",t);try{r=await e("/api/organizations/".concat(n,"/convert_document"),{method:"POST",body:o})}catch(e){return(0,v.Tb)(e),a("One or more file uploads have failed. Please try again.")}if(429===r.status)return a("Too many file upload attempts. Please wait and try again later.");if(413===r.status)return a("Uploaded file is too large. Try uploading a smaller part of the document, or copy/pasting an excerpt from the file.");if(!r.ok)return a("你提供的文件中，有部分无法提取文字，请检查你的 URL。(请注意！这不是本站点的问题！这是你提问的问题！)");let i=await r.json();return i&&0!==Object.keys(i).length&&i.extracted_content?(i.file_name=x(t),i):a("你提供的文件中，有部分无法提取文字，请检查你的 URL。(请注意！这不是本站点的问题！这是你提问的问题！)")},N=e=>{var t;let{imagesEnabled:n,blobFileUploadsEnabled:a,rasterizePdfUploadsEnabled:r,onUploadComplete:s,onError:c,projectUuid:d}=e,{activeOrganization:p}=(0,i.t)(),g=null!==(t=null==p?void 0:p.uuid)&&void 0!==t?t:"",[m,v]=(0,y.useState)(!1),{addError:b}=(0,l.e)(),w=(0,y.useCallback)(e=>{v(!1),b(e),c&&c()},[b,c,v]),S=A(),C=j(),E=U(w),x=(0,o.OJ)(),k=(0,u.K)(),T=(0,y.useCallback)(async(e,t)=>{let{attachmentUploads:o,imageUploads:i,rasterizedDocumentUploads:l,unsupportedUploads:u,tooLargeUploads:c,outOfContextFileUploads:p}=(0,_.Jw)(e,{imagesEnabled:n,blobFileUploadsEnabled:a,rasterizePdfUploadsEnabled:r}),m=u.map(e=>(0,_.mD)(e.name));if(m.length>0)return w("Files of the following ".concat((0,h._6)(m.length,"format")," are not supported: ").concat([...new Set(m)].join(", "),"."));if(c.length>0)return k.track("file_upload_too_large",{large_files:c.map(e=>({file_type:e.type,file_size:e.size}))}),w("You may not upload files larger than 30mb.");v(!0);let y=[],b=0,T=(e,n)=>{if(void 0===t)return!0;let a=new Blob([n]).size/f.r6;return!((b+=a)>t)||(w("Failed to upload file ".concat(e,". Project knowledge exceeds maximum. Remove files to continue.")),!1)};for(let e of o){let t=await Q(x,e,g,w);if(!(t&&T(e.name,t.extracted_content)))return;await s([t],[])}for(let e of i){let t=await S(e),n=await C(t,g);n&&y.push(n)}for(let e of l){let{file:t,attachment:n}=await E(e,g);if(t&&y.push(t),n){if(!T(e.name,n.extracted_content))return;await s([n],[])}}for(let e of p){let t=await C(e,g,d);t&&y.push(t)}await s([],y),v(!1)},[a,x,s,n,w,C,E,g,S,k,r,d]);return{isUploading:m,setIsUploading:v,handleError:w,handleUpload:T}},F=c.q.label(C()),Q=async(e,t,n,a)=>{if(!(0,_.dF)(t))try{let e=await (0,_.CL)(t);return D(t,e)}catch(e){}let r=await z(e,t,n,a);if(r)return T(r),r},R=()=>{let{addError:e}=(0,l.e)();return(0,y.useCallback)((t,n)=>{if(t instanceof d.Hx){if("rate_limit_error"===t.type){e((0,r.jsxs)("p",{children:["You've reached your limit for ",n," uploads. Please try again later.",(0,r.jsx)(S.o,{})]}));return}if("document_password_protected"===t.errorCode){e((0,r.jsx)("p",{children:"The document you uploaded is password protected. Please remove the password and try again."}));return}}e((0,r.jsxs)("p",{children:["Your ",n," upload failed. Please try again."]}))},[e])},L=()=>{let{value:e}=(0,p.F)("janus_claude-ai");return e}},34016:function(e,t,n){n.d(t,{o:function(){return u}});var a=n(27573),r=n(51571),o=n(88075),i=n(87659);let l=()=>{let e=(0,r.Z)(),{websiteBaseUrl:t}=(0,r.m)();return e?(0,a.jsxs)(a.Fragment,{children:[" ","或者考虑"," ",(0,a.jsx)("a",{href:"/settings/billing?action=subscribe",className:"font-bold underline",rel:"noreferrer",children:"upgrading to Claude Pro"}),"."]}):(0,a.jsxs)(a.Fragment,{children:[" ","Or"," ",(0,a.jsx)(i.default,{href:"".concat(t,"/contact-sales"),className:"font-bold underline",children:"contact sales"})," ","if you would be interested in upgrading to a paid version of Claude."]})};function u(){let e=(0,o.w7)(),t=(0,o.uh)();return e&&!t?(0,a.jsx)(l,{}):null}},27920:function(e,t,n){n.d(t,{hH:function(){return F},wN:function(){return M},Qk:function(){return q},pV:function(){return Q},lE:function(){return R}});var a,r,o,i,l=n(27573),u=n(34016),s=n(51571),c=n(88075),d=n(24658),f=n(92973),p=n(65490),h=n(71854),g=n(6734),m=n(36222),v=n(49793),y=n(71994),_=n(13623),b=n(83056),w=n(90930),S=n(82177),C=n(67754),E=n(7653),x=n(48644),k=n(91014);class T{_getBlockCharCount(e){if("text"===e.type)return e.text.length;if("tool_use"===e.type){var t;return(null===(t=e.partial_json)||void 0===t?void 0:t.length)||0}return e.type,0}_maybeConvertMessageEventToContentBlock(e){switch(e.type){case"content_block_delta":if("text_delta"===e.delta.type)return{type:"text",text:e.delta.text};if("input_json_delta"===e.delta.type){let t=this.completionsToSmooth[this.completionsToSmooth.length-1];if(t&&"tool_use"===t.type)return{type:"tool_use",id:"",name:"",partial_json:e.delta.partial_json};if(t&&"tool_result"===t.type)return{type:"tool_result",tool_use_id:"",name:"",is_error:!1,content:[{type:"text",text:e.delta.partial_json}]}}break;case"content_block_start":return e.content_block}}_set_raw_completion(e){0===this.start&&(this.start=Date.now());let t=this._maybeConvertMessageEventToContentBlock(e);t&&(e=>{if(0===this.completionsToSmooth.length){this.completionsToSmooth.push(e);return}let t=this.completionsToSmooth[this.completionsToSmooth.length-1];if(t.type!==e.type||"tool_use"===e.type&&e.id||"tool_result"===e.type&&e.tool_use_id){this.completionsToSmooth.push(e);return}switch(e.type){case"text":"text"===t.type&&(t.text+=e.text);break;case"tool_use":if("tool_use"===t.type){var n,a;t.partial_json=(null!==(n=t.partial_json)&&void 0!==n?n:"")+(null!==(a=e.partial_json)&&void 0!==a?a:"")}break;case"tool_result":"tool_result"===t.type&&(t.content=e.content)}})(t),this.model_done="message_stop"===e.type;let n=this.completionsToSmooth.reduce((e,t)=>e+this._getBlockCharCount(t),0);this.totalCompletionLength=n,this.arrivals.push([(Date.now()-this.start)/1e3,n])}_get_smoothed_completion(){if(0===this.start)return[];let e=(Date.now()-this.start)/1e3,t=this.arrivals[this.arrivals.length-1][1]+(this.model_done?100:0),n=.9*e-.3,a=this.arrivals.filter(e=>e[0]<n).map(e=>e[1]),r=a[a.length-1],o=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01;if(t===n)return t;let r=e(t),o=e(n);if(t>=n)throw Error("Lower x is greater than upper x");if(r>a)throw Error("Lower f is greater than zero");if(o<-a)throw Error("Upper f is less than zero");for(;r<-a;){let a=(t+n)/2,i=e(a);i<=0?(t=a,r=i):(n=a,o=i)}return t}(n=>{let a=(n-this.x)/(e-this.t),o=1/(e-this.t);return 2*this.gamma*o*(a-this.v)-1/(n-r)+1/(t-n)},r,t),i=(o-this.x)/(e-this.t);this.v=this.alpha*this.v+(1-this.alpha)*i,this.x=Math.max(o,this.x),this.t=e,this.smoother_done=this.model_done&&this.x>=this.totalCompletionLength,this.stats.push({t:e,x:o,v:i,min_chars:r,max_chars:t});let l=(e,t)=>{if("tool_result"===e.type)return e;if("text"===e.type)return{...e,text:e.text.slice(0,t)};if("tool_use"===e.type){var n;return{...e,partial_json:null===(n=e.partial_json)||void 0===n?void 0:n.slice(0,t)}}return e},u=0,s=[];for(let e of this.completionsToSmooth){let t=this._getBlockCharCount(e);if(u+t<this.x)s.push(e),u+=t;else{let t=l(e,this.x-u);s.push(t);break}}return s}getTextCompletion(){let e=this.completionsToSmooth.find(e=>"text"===e.type);return e&&e.text||""}onMessage(e){this._set_raw_completion(e)}async task(e,t){for(;!this.smoother_done&&!t.aborted;)e(this._get_smoothed_completion()),await new Promise(e=>setTimeout(e,10))}constructor(){this.alpha=.99,this.gamma=1e-5,this.v=100,this.x=0,this.t=0,this.arrivals=[[-9999,0]],this.start=0,this.completionsToSmooth=[],this.totalCompletionLength=0,this.model_done=!1,this.smoother_done=!1,this.stats=[]}}var D=n(80523);(a=o||(o={}))[a.APPEND_MESSAGE_WITH_COMPLETION=1]="APPEND_MESSAGE_WITH_COMPLETION",a[a.RETRY_MESSAGE_WITH_COMPLETION=2]="RETRY_MESSAGE_WITH_COMPLETION",(r=i||(i={})).Ping="ping",r.Completion="completion",r.Error="error",r.ContentBlockDelta="content_block_delta",r.ContentBlockStart="content_block_start",r.ContentBlockStop="content_block_stop",r.MessageDelta="message_delta",r.MessageStart="message_start",r.MessageStop="message_stop",r.MessageLimit="message_limit";let I=["close_file","create_file","delete_file","draw_svg","file_search","open_file","repl","str_replace","update_file"];async function P(e){let{frontendPrivateApiUrl:t,endpoint:n,orgUuid:a,conversationUuid:r,body:o,onCompletion:i,onInvokeTool:l,abortController:u,completion:s,getTools:c}=e,d=new T,f=d.task(i,u.signal),h=null,g=null,m=JSON.stringify({...s,...o,text:void 0,rendering_mode:"messages",organization_uuid:void 0,conversation_uuid:void 0}),v="",y="",b="",w=0,S=(0,D.L)(function(e,t,n,a){let r;if(void 0===n||void 0===a)throw Error("Missing org uuid or conversation uuid");switch(t){case 1:r="completion";break;case 2:r="retry_completion";break;default:throw Error("Invalid endpoint")}return"".concat(e,"/api/organizations/").concat(n,"/chat_conversations/").concat(a,"/").concat(r)}(t,n,a,r),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:m,openWhenHidden:!0,signal:u.signal,async onopen(e){var t;if(!e.ok||!(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes(D.a))){let t=await e.text(),n={};try{n=JSON.parse(t)}catch(e){}throw(0,p.fT)(e.status,n,"Failed to fetch",e.headers)}},onmessage(e){var t,n;switch(e.event){case"ping":default:return;case"error":throw(0,p.fT)(0,JSON.parse(e.data),"Streaming error: 22");case"completion":{let n=JSON.parse(e.data);if(void 0===n.completion)throw Error("Unexpected message received when streaming: ".concat(e.data));let a={type:"content_block_delta",index:0,delta:{type:"text_delta",text:n.completion}};h=n.stop_reason,g=null!==(t=n.messageLimit)&&void 0!==t?t:null,d.onMessage(a);break}case"content_block_start":{let t=JSON.parse(e.data);w=t.index,"tool_use"===t.content_block.type&&(y=t.content_block.name,b=t.content_block.id),d.onMessage(t);break}case"content_block_delta":{let t=JSON.parse(e.data);if(t.index!==w)throw Error("Content block index did not match the expected index");(null===(n=t.delta)||void 0===n?void 0:n.type)==="input_json_delta"&&(I.includes(y)||c().some(e=>e.name===y))&&(v+=t.delta.partial_json),d.onMessage(t);break}case"content_block_stop":{if(!y)break;let t=JSON.parse(e.data);if(t.index!==w)throw Error("Content block index did not match the expected index");d.onMessage(t),l(r,y,b,v),v="",y="",b="";break}case"message_delta":case"message_start":case"message_stop":case"message_limit":{let t=JSON.parse(e.data);"message_stop"===t.type&&(h="message_stop"),"message_limit"===t.type&&(g=t.message_limit),d.onMessage(t)}}},onclose(){d.model_done=!0},onerror(e){throw e instanceof p.Hx&&529===e.statusCode||(0,_.Tb)(e),d.model_done=!0,d.smoother_done=!0,e}});return await Promise.all([S,f]),{stopReason:h,messageLimitResult:g}}var A=n(52212),j=n(3982),U=n(46777),O=n(33267),z=n(44768);let N=(0,E.createContext)([null,null]);function F(e){let{children:t}=e,n=(0,E.useState)({});return(0,l.jsx)(N.Provider,{value:n,children:t})}function Q(e,t,n){let{onIncrementalCompletion:a,onStartAppend:r,onStreamCompleted:i}=(0,z.p)(),l=K({conversationUUID:e,endpoint:o.APPEND_MESSAGE_WITH_COMPLETION,onIncrementalCompletion:a,onStreamCompleted:i,onInvokeTool:t,getTools:n}),{runStream:u}=l,s=(0,E.useCallback)(async t=>{let{prompt:n,attachments:a,files:o,syncSources:i,rethrowErrors:l=!1,modelOverride:s,parent_message_uuid:c,personalized_style:d}=t;await r(e,e=>{if(!e)throw Error("Conversation tree must be provided for tree append");let t=(0,A.HX)(e),r=[{uuid:A.wZ,content:[{type:"text",text:n}],created_at:new Date().toISOString(),sender:"human",attachments:a,files:o,files_v2:o,sync_sources:i,index:t+1,parent_message_uuid:null!=c?c:A.QC},{uuid:A.FC,content:[],created_at:new Date().toISOString(),sender:"assistant",attachments:[],files:[],files_v2:[],sync_sources:[],index:t+2,parent_message_uuid:A.wZ}];return(0,A.vv)(e,r)}),await u({prompt:n,attachments:a,files:o,syncSources:i,rethrowErrors:l,modelOverride:s,parent_message_uuid:c,personalized_style:d})},[u,r,e]);return{...l,runStream:s}}function R(e,t,n,a){let{onIncrementalCompletion:r,onStreamCompleted:i,onStartAppend:l}=(0,z.p)(),u=K({conversationUUID:e,endpoint:o.RETRY_MESSAGE_WITH_COMPLETION,onIncrementalCompletion:r,onInvokeTool:t,onStreamCompleted:i,getTools:n}),{runStream:s}=u,c=(0,E.useCallback)(async t=>{await l(e,e=>{let n=[{uuid:A.FC,content:[],created_at:new Date().toISOString(),sender:"assistant",attachments:[],files:[],files_v2:[],sync_sources:[],parent_message_uuid:t,selectedOption:0,index:(0,A.HX)(e)+1}];return(0,A.vv)(e,n)}),await s({prompt:"",attachments:[],files:[],syncSources:[],parent_message_uuid:t,personalized_style:a})},[e,s,l,a]);return{...u,runStream:c}}let L="incomplete_stream",M=e=>{var t,n;let a=G(e),{config:r}=(0,x.useExperiment)("tepui_default_on_claude_free"),o=null==r?void 0:null===(t=r.get("console_default_model_override",null))||void 0===t?void 0:t.model,{layer:i}=(0,x.useLayer)("frontend"),l=null===(n=i.get("console_default_model_override",null))||void 0===n?void 0:n.model,{config:u}=(0,x.useConfig)("console_default_model"),s=u.get("model",null);return a||o||l||s||"claude-2.1"},G=e=>{let{data:t}=(0,k.Rq)(e||""),n=(0,C.useSearchParams)(),a=null==n?void 0:n.get("model");return(null==t?void 0:t.model)?null==t?void 0:t.model:a||void 0},H={value:null},q=()=>{let e=(0,b.useQueryClient)();return{failedStreamRetryData:(0,w.useQuery)([v.sf],()=>H.value,{initialData:null}).data||null,setFailedStreamRetryData:(0,E.useCallback)(t=>{H.value=t,e.invalidateQueries([v.sf])},[e])}};function K(e){var t;let{conversationUUID:n,endpoint:a,getTools:r,onIncrementalCompletion:o,onInvokeTool:i,onStreamCompleted:v}=e,{frontendPrivateApiUrl:b}=(0,s.m)(),{activeOrganization:w}=(0,c.t)(),x=null==w?void 0:w.uuid,{context:T,clearContext:D,setContext:I}=function(e){let[t,n]=(0,E.useContext)(N),[a,r]=(0,E.useState)(),o=(0,E.useCallback)(()=>{n?n(t=>{let n={...t};return delete n[e],n}):r(void 0)},[e,n]),i=(0,E.useCallback)(t=>{n?n(n=>({...n,[e]:t})):r(t)},[e,n]);return{context:t?t[e]:a,clearContext:o,setContext:i}}(n),A=(0,C.useSearchParams)(),z=null==A?void 0:A.get("t"),F=null!==(t=G(n))&&void 0!==t?t:"",Q=null==A?void 0:A.get("max_tokens"),R=(0,O.n)(),{addError:M,clearToast:H}=(0,d.e)(),K=(0,E.useMemo)(y.H,[]),W=(0,k.$H)("push",K),{setFailedStreamRetryData:Y}=q(),B=(0,E.useCallback)(async e=>{await (null==v?void 0:v(n,e)),D()},[v,n,D]),J=(0,E.useCallback)((e,t,a)=>{if(e===L)return M("Network connection interrupted. Claude may still be responding, please wait for a bit to see the response.");if(!(e instanceof p.Hx))return M("We couldn’t connect to Claude. Please check your network connection and try again.");if("rate_limit_error"===e.type){if(e.message.includes("{")&&x)try{let t=JSON.parse(e.message);R(t,x,n)}catch(e){}return M((0,l.jsxs)("p",{children:["You've reached the limit for Claude messages at this time. Please wait before trying again. ",(0,l.jsx)(u.o,{})]}))}if("not_found_error"===e.type)return M((0,l.jsx)("p",{children:"Claude model version not found."}));if("billing_error"===e.type)return M((0,l.jsxs)("p",{children:["We had an unexpected billing error, please"," ",(0,l.jsx)("a",{className:"underline",href:"https://support.anthropic.com/en/articles/9015913-how-can-i-contact-support",target:"_blank",rel:"noreferrer",children:"contact support."})," "]}));if("overloaded_error"===e.type)return M((0,l.jsxs)("p",{children:["Due to unexpected capacity constraints, Claude is unable to respond to your message. Please try again soon.",(0,l.jsx)(u.o,{})]}));if("exceeded_max_uploads_per_message"===e.errorCode){M("Your message will exceed the maximum number of files allowed per message. Consider removing some of your file or adding files over several messages.");return}if("exceeded_max_image_limit_per_chat"===e.errorCode){let e=M((0,l.jsxs)("p",{children:["你的消息将会超过"," ",(0,l.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:h._R,children:"maximum image count"})," ","在这个对话",a>0?(0,l.jsxs)(l.Fragment,{children:[" ","Try uploading ",(0,m._6)(a,"document")," ","with fewer pages, removing images,"]}):" Try removing images"," ",(0,l.jsx)("a",{href:"#",className:"underline",onClick:t=>{t.preventDefault(),W(),H(e)},children:"or starting a new conversation."}),(0,l.jsx)(u.o,{})]}));return}if("invalid_request_error"===e.type&&413===e.statusCode){let e=M((0,l.jsxs)("p",{children:["你的消息将会超过"," ",(0,l.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:h.jC,children:"长度限制"})," ","在这个对话",t>0?"尝试附带更少或更小的文件。":"尝试减少你对话的长度。"," ",(0,l.jsx)("a",{href:"#",className:"underline",onClick:t=>{t.preventDefault(),W(),H(e)},children:"or starting a new conversation."}),(0,l.jsx)(u.o,{})]}));return}return"invalid_request_error"===e.type&&"read_only_mode"===e.extra.code?M((0,l.jsx)("p",{children:"Due to capacity constraints, chatting with Claude is currently not available. Please try again in a little while."})):M(e)},[M,x,R,n,W,H]),V=(0,f.K)(),Z=function(){let{height:e,width:t}=(0,j.iP)(),n=[];return n.length?n.join("\n"):null}(),X=(0,E.useCallback)(async e=>{let{prompt:t,attachments:l,files:u,syncSources:s,rethrowErrors:c=!1,modelOverride:d,parent_message_uuid:f,personalized_style:p}=e;if(T)return;if(!w)throw Error("Cannot stream without an organization");let h=new AbortController;I({controller:h}),Y(null);let m={prompt:t,parent_message_uuid:f,timezone:S.ou.local().zoneName||void 0,personalized_styles:p?[p]:void 0},v=(0,U.l)();(v||Z)&&(m.custom_system_prompt=[v,Z].filter(Boolean).join("\n")),F&&"string"==typeof F&&(m.model=F),d&&(m.model=d),"string"==typeof z&&(m.temperature=parseInt(z)),Q&&"string"==typeof Q&&(m.max_tokens_to_sample=parseInt(Q));let y=r();y.length&&(m.tools=y);let C=[],E=null,x=null,k=null;try{E=(k=await P({frontendPrivateApiUrl:b,endpoint:a,orgUuid:w.uuid,conversationUuid:n,body:{organization_uuid:w.uuid,conversation_uuid:n,text:t,attachments:l,files:u.map(e=>e.file_uuid),sync_sources:s.map(e=>e.uuid)},onCompletion:e=>{o(n,e),C=e},onInvokeTool:i,abortController:h,completion:m,getTools:r})).stopReason,x=k.messageLimitResult}catch(e){if(Y({prompt:t,attachments:l,files:u}),J(e,l.length+u.length,u.filter(e=>"document"===e.file_kind).length),(0,_.Tb)(e),c||(0,g.yG)())throw e}finally{k&&!E&&(o(n,C),J(L,l.length+u.length,u.filter(e=>"document"===e.file_kind).length),V.track("sse_interrupted"),(0,_.uT)("sse_interrupted"),await new Promise(e=>setTimeout(e,3e4))),await B(x)}return C},[T,w,I,Y,Z,F,z,Q,r,b,a,n,i,o,J,B,V]),$=(0,E.useCallback)(()=>{T&&(T.controller.abort(),B(null))},[T,B]);return{runStream:X,isStreaming:!!T,abortStream:$}}},46777:function(e,t,n){n.d(t,{h:function(){return o},l:function(){return i}});var a=n(7653);let r="customSystemPrompt",o=()=>{let[e,t]=(0,a.useState)(()=>"undefined"==typeof localStorage?"":localStorage.getItem(r)||"");return(0,a.useEffect)(()=>{localStorage.setItem(r,e)},[e]),{customSystemPrompt:e,setCustomSystemPrompt:t}},i=()=>"undefined"==typeof localStorage?"":localStorage.getItem(r)},23489:function(e,t,n){n.d(t,{V:function(){return u},u:function(){return s}});var a=n(89992),r=n(88075),o=n(49793),i=n(48644);let l={image_in:!1,pdf_in:!1},u=e=>{let{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid,{data:i,isLoading:u,isPreviousData:s}=(0,a.WE)("/api/organizations/".concat(n,"/model_configs/").concat(e),{queryKey:[o.Qn,n,e],enabled:!!n,staleTime:3e5,meta:{noToast:!0}});return{isLoading:u,modelConfig:!s&&i||l}},s=()=>{let{config:e}=(0,i.useConfig)("claude_ai_models"),t=e.get("models",[]),n=t.filter(e=>!e.inactive),a=n.filter(e=>!e.overflow),r=n.filter(e=>e.overflow);return{allModelOptions:t,activeModelOptions:n,mainModels:a,overflowModels:r}}},65930:function(e,t,n){n.d(t,{b:function(){return f},w:function(){return p}});var a=n(88075),r=n(49793),o=n(71994),i=n(83056),l=n(84739),u=n.n(l),s=n(67754),c=n(7653),d=n(91014);let f=()=>{let e="new-conversation-params-for-navigation",t=(0,i.useQueryClient)(),n=(0,c.useCallback)(()=>{let t=localStorage.getItem(e);if(!t)return{};try{let e=JSON.parse(t);return u()(e,e=>Date.now()-e.created_at<6e4)}catch(t){localStorage.removeItem(e)}return{}},[]);return{prepareNewConversation:(0,c.useCallback)((a,r)=>{let o={created_at:Date.now(),...r};t.setQueryData([e,a],o);let i=n();i[a]=o;try{localStorage.setItem(e,JSON.stringify(i))}catch(e){}},[t,n]),getCreateParamsForConvo:(0,c.useCallback)(a=>{let r=n(),o=t.getQueryData([e,a])||r[a];t.removeQueries([e,a]);let i=u()(r,(e,t)=>t!==a);return localStorage.setItem(e,JSON.stringify(i)),o},[t,n])}},p=()=>{let{mutateAsync:e}=(0,d.$Y)(),[t,n]=(0,c.useReducer)(o.H,"",o.H),{prepareNewConversation:l}=f(),u=(0,i.useQueryClient)(),{activeOrganization:p}=(0,a.t)(),h=null==p?void 0:p.uuid,g=(0,s.useRouter)();return(0,c.useCallback)(async a=>{let{model:o,project_uuid:i,include_conversation_preferences:s}=a,c=e({uuid:t,name:"",model:o,project_uuid:i,include_conversation_preferences:s});l(t,a),await c,g.push("/chat/".concat(t)),n(),u.invalidateQueries([r.tv,{orgUUID:h}])},[e,t,g,l,u,h])}},64969:function(e,t,n){n.d(t,{M:function(){return u}});var a=n(44846),r=n(90930),o=n(7653),i=n(27920),l=n(23489);let u=()=>{let e="sticky-model-selector",{value:t}=(0,a.F)("sticky_model_selector"),{value:n}=(0,a.F)("model_selector_enabled"),{activeModelOptions:u}=(0,l.u)(),s=(0,i.wN)(null),c=(0,r.useQuery)([e],()=>{if(!t||!n)return null;let a=localStorage.getItem(e);return a===s?null:a&&u.find(e=>e.model===a)?a:null},{initialData:null}),d=(0,o.useCallback)(t=>{t&&localStorage.setItem(e,t),c.refetch()},[c]);return{stickyModelPreference:c.data,setStickyModelPreference:d}}},33267:function(e,t,n){n.d(t,{I:function(){return s},n:function(){return u}});var a=n(89992),r=n(88075),o=n(49793),i=n(83056),l=n(7653);let u=()=>{let e=(0,i.useQueryClient)();return(0,l.useCallback)((t,n,a)=>{"within_limit"!==t.type&&(t.conversationUUID=a),e.setQueryData([o.aY],e=>e?{...e,messageLimits:{...e.messageLimits,[n]:t}}:e)},[e])},s=e=>{let{activeOrganization:t}=(0,r.t)(),n=null==t?void 0:t.uuid,o=u(),i={type:"within_limit"};return(0,a.uC)(()=>"/api/organizations/".concat(n,"/reset_rate_limits"),"POST",{onSuccess:()=>{o(i,n,e||"")},meta:{noToast:!0}})}},44768:function(e,t,n){n.d(t,{p:function(){return s}});var a=n(88075),r=n(49793),o=n(83056),i=n(7653),l=n(52212),u=n(33267);let s=()=>{let e=(0,o.useQueryClient)(),{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid,s=(0,i.useRef)(),c=(0,u.n)(),d=(0,i.useCallback)(async(t,a)=>{let o=[r.I8,{orgUUID:n},{uuid:t}],i=e.getQueryData(o);if(!i)throw Error("Conversation tree must be provided for append");let l=a(i);s.current=l,await e.cancelQueries(o),e.setQueryData(o,s.current)},[e,n]),f=(0,i.useCallback)((t,a)=>{0!==a.length&&e.setQueryData([r.I8,{orgUUID:n},{uuid:t}],()=>{let e=s.current;if(!e)throw Error("Conversation tree must be provided for incremental completion");if(!e.current_leaf_message_uuid)throw Error("Couldn't figure out where to put completion");let t=e.messageByUuid.get(e.current_leaf_message_uuid);if(!t)throw Error("New assistant message not found");return t.content=a,{...e,created_at:new Date().toISOString()}})},[e,n]);return{onStartAppend:d,onStreamCompleted:(0,i.useCallback)(async(t,a)=>{let o=[r.I8,{orgUUID:n},{uuid:t}];s.current=void 0,a?(e.setQueryData([r.tv,{orgUUID:n}],e=>{if(!e)return;let n=e.find(e=>e.uuid===t);return n?[{...n,updated_at:new Date().toISOString()},...e.filter(e=>e.uuid!==t)]:e}),await e.invalidateQueries(o)):e.invalidateQueries(o),a&&n&&c(a,n,t)},[e,c,n]),onIncrementalCompletion:f,changeDisplayedConversationPath:(0,i.useCallback)((t,a,o,i)=>{e.setQueryData([r.I8,{orgUUID:n},{uuid:t}],e=>{if(!e)throw Error("Conversation tree must be provided for changeDisplayedConversationPath");let t=(0,l.mj)(e,a,o);return t.current_leaf_message_uuid&&i&&i(t.current_leaf_message_uuid),t})},[e,n])}}},6734:function(e,t,n){n.d(t,{cm:function(){return r},yG:function(){return a}}),n(68571);let a=()=>!1,r=()=>!1},36222:function(e,t,n){n.d(t,{M0:function(){return r},_6:function(){return a},zd:function(){return o}});let a=(e,t,n)=>1===e?t:n||t+"s",r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"s",r=a(e,t,t+n);return"".concat(e," ").concat(r)};function o(e,t){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e.join(" ".concat(t," "));default:return[...e.slice(0,-1),"".concat(t," ").concat(e.at(-1))].join(", ")}}},99694:function(e,t,n){var a,r,o,i;n.d(t,{Fg:function(){return a},co:function(){return r},hP:function(){return l}}),(o=a||(a={})).GITHUB="github",o.GDRIVE="gdrive",o.OUTLINE="outlin";let l={github:"GitHub",gdrive:"Google Drive",outlin:"Outline"};(i=r||(r={})).CREATED="created",i.PENDING="pending",i.FAILED="failed",i.UPDATING="updating",i.UPDATE_FAILED="update_failed",i.READY="ready",i.UNAUTHENTICATED="unauthenticated",i.ACCESS_DENIED="access_denied",i.DISABLED="disabled"}}]);